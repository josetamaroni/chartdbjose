import{e as Xd,c as be,u as Yd}from"./theme-provider-3budwQhK.js";import{r as h,E as Wd,F as Gd,R as _e,j as g,b as Ee,G as Ud,h as X,m as Go,w as Cn,y as Te,I as Kd,A as le,B as ze,D as qd,J as Zd,K as Qd,L as Jd,M as ef,N as tf,O as nf,Q as rf,U as of,V as sf,z as po,W as af,x as go,v as cf,P as pr,k as Ue,X as yo,g as uf,Y as lf,Z as df,T as Zt,e as Qt,f as Jt,C as ff}from"./index-9UMoLW-9.js";import{r as oa,m as hf,v as mf}from"./colors-DRrwJvU-.js";import{D as me}from"./database-type-C2NNW5SW.js";import{u as pf,d as gf,a as ia,e as yf,z as oe,s as kt}from"./use-storage-B2HVcLnk.js";import{P as Se,d as sa,B as on,L as Ut}from"./label-B5AJMxgi.js";const xf=(e,t,n,r)=>{var i,s,a,c;const o=[n,{code:t,...r||{}}];if((s=(i=e==null?void 0:e.services)==null?void 0:i.logger)!=null&&s.forward)return e.services.logger.forward(o,"warn","react-i18next::",!0);gt(o[0])&&(o[0]=`react-i18next:: ${o[0]}`),(c=(a=e==null?void 0:e.services)==null?void 0:a.logger)!=null&&c.warn?e.services.logger.warn(...o):console!=null&&console.warn&&console.warn(...o)},Ti={},xo=(e,t,n,r)=>{gt(n)&&Ti[n]||(gt(n)&&(Ti[n]=new Date),xf(e,t,n,r))},aa=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},vo=(e,t,n)=>{e.loadNamespaces(t,aa(e,n))},Ri=(e,t,n,r)=>{if(gt(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(t)>-1)return vo(e,n,r);n.forEach(o=>{e.options.ns.indexOf(o)<0&&e.options.ns.push(o)}),e.loadLanguages(t,aa(e,r))},vf=(e,t,n={})=>!t.languages||!t.languages.length?(xo(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:n.lng,precheck:(r,o)=>{var i;if(((i=n.bindI18n)==null?void 0:i.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!o(r.isLanguageChangingTo,e))return!1}}),gt=e=>typeof e=="string",wf=e=>typeof e=="object"&&e!==null,bf=h.createContext();class Cf{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const _f=(e,t)=>{const n=h.useRef();return h.useEffect(()=>{n.current=e},[e,t]),n.current},ca=(e,t,n,r)=>e.getFixedT(t,n,r),Ef=(e,t,n,r)=>h.useCallback(ca(e,t,n,r),[e,t,n,r]),ua=(e,t={})=>{var x,M,j,E;const{i18n:n}=t,{i18n:r,defaultNS:o}=h.useContext(bf)||{},i=n||r||Wd();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new Cf),!i){xo(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const N=(D,$)=>gt($)?$:wf($)&&gt($.defaultValue)?$.defaultValue:Array.isArray(D)?D[D.length-1]:D,R=[N,{},!1];return R.t=N,R.i18n={},R.ready=!1,R}(x=i.options.react)!=null&&x.wait&&xo(i,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const s={...Gd(),...i.options.react,...t},{useSuspense:a,keyPrefix:c}=s;let u=o||((M=i.options)==null?void 0:M.defaultNS);u=gt(u)?[u]:u||["translation"],(E=(j=i.reportNamespaces).addUsedNamespaces)==null||E.call(j,u);const d=(i.isInitialized||i.initializedStoreOnce)&&u.every(N=>vf(N,i,s)),l=Ef(i,t.lng||null,s.nsMode==="fallback"?u:u[0],c),f=()=>l,m=()=>ca(i,t.lng||null,s.nsMode==="fallback"?u:u[0],c),[p,y]=h.useState(f);let w=u.join();t.lng&&(w=`${t.lng}${w}`);const v=_f(w),_=h.useRef(!0);h.useEffect(()=>{const{bindI18n:N,bindI18nStore:R}=s;_.current=!0,!d&&!a&&(t.lng?Ri(i,t.lng,u,()=>{_.current&&y(m)}):vo(i,u,()=>{_.current&&y(m)})),d&&v&&v!==w&&_.current&&y(m);const D=()=>{_.current&&y(m)};return N&&(i==null||i.on(N,D)),R&&(i==null||i.store.on(R,D)),()=>{_.current=!1,i&&(N==null||N.split(" ").forEach($=>i.off($,D))),R&&i&&R.split(" ").forEach($=>i.store.off($,D))}},[i,w]),h.useEffect(()=>{_.current&&d&&y(f)},[i,c,d]);const b=[p,i,d];if(b.t=p,b.i18n=i,b.ready=d,d||!d&&!a)return b;throw new Promise(N=>{t.lng?Ri(i,t.lng,u,()=>N()):vo(i,u,()=>N())})},Sf={sm:"640px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1400px"};function Mf(e){const t=Xd({query:`(min-width: ${Sf[e]})`});return{[`is${e[0].toUpperCase()+e.substring(1)}`]:t}}/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=be("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nf=be("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kf=be("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tf=be("ChevronsLeftRight",[["path",{d:"m9 7-5 5 5 5",key:"j5w590"}],["path",{d:"m15 7 5 5-5 5",key:"1bl6da"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rf=be("ChevronsRightLeft",[["path",{d:"m20 17-5-5 5-5",key:"30x0n2"}],["path",{d:"m4 17 5-5-5-5",key:"16spf4"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Df=be("CircleDotDashed",[["path",{d:"M10.1 2.18a9.93 9.93 0 0 1 3.8 0",key:"1qdqn0"}],["path",{d:"M17.6 3.71a9.95 9.95 0 0 1 2.69 2.7",key:"1bq7p6"}],["path",{d:"M21.82 10.1a9.93 9.93 0 0 1 0 3.8",key:"1rlaqf"}],["path",{d:"M20.29 17.6a9.95 9.95 0 0 1-2.7 2.69",key:"1xk03u"}],["path",{d:"M13.9 21.82a9.94 9.94 0 0 1-3.8 0",key:"l7re25"}],["path",{d:"M6.4 20.29a9.95 9.95 0 0 1-2.69-2.7",key:"1v18p6"}],["path",{d:"M2.18 13.9a9.93 9.93 0 0 1 0-3.8",key:"xdo6bj"}],["path",{d:"M3.71 6.4a9.95 9.95 0 0 1 2.7-2.69",key:"1jjmaz"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=be("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Af=be("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zb=be("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=be("MessageCircleMore",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 12h.01",key:"1l6xoz"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jf=be("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qb=be("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=be("SquareDot",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=be("SquareMinus",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=be("SquarePlus",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=be("Table2",[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=be("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lf=be("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]),Uo=_e.forwardRef(({className:e,type:t,...n},r)=>g.jsx("input",{type:t,className:Ee("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...n}));Uo.displayName="Input";var pa={},wo=function(e,t){return wo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},wo(e,t)};function ga(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");wo(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Ie=function(){return Ie=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ie.apply(this,arguments)};function gr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function ya(e,t,n,r){var o=arguments.length,i=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}function xa(e,t){return function(n,r){t(n,r,e)}}function va(e,t,n,r,o,i){function s(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var a=r.kind,c=a==="getter"?"get":a==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),l,f=!1,m=n.length-1;m>=0;m--){var p={};for(var y in r)p[y]=y==="access"?{}:r[y];for(var y in r.access)p.access[y]=r.access[y];p.addInitializer=function(v){if(f)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(v||null))};var w=(0,n[m])(a==="accessor"?{get:d.get,set:d.set}:d[c],p);if(a==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(l=s(w.get))&&(d.get=l),(l=s(w.set))&&(d.set=l),(l=s(w.init))&&o.unshift(l)}else(l=s(w))&&(a==="field"?o.unshift(l):d[c]=l)}u&&Object.defineProperty(u,r.name,d),f=!0}function wa(e,t,n){for(var r=arguments.length>2,o=0;o<t.length;o++)n=r?t[o].call(e,n):t[o].call(e);return r?n:void 0}function ba(e){return typeof e=="symbol"?e:"".concat(e)}function Ca(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function _a(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Ea(e,t,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(d){try{u(r.next(d))}catch(l){s(l)}}function c(d){try{u(r.throw(d))}catch(l){s(l)}}function u(d){d.done?i(d.value):o(d.value).then(a,c)}u((r=r.apply(e,t||[])).next())})}function Sa(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(d){return c([u,d])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(n=0)),n;)try{if(r=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,o=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(d){u=[6,d],o=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var yr=Object.create?function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]};function Ma(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&yr(t,e,n)}function un(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ko(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i}function Na(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ko(arguments[t]));return e}function ka(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}function qo(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function At(e){return this instanceof At?(this.v=e,this):new At(e)}function Ta(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(m){return function(p){return Promise.resolve(p).then(m,l)}}function a(m,p){r[m]&&(o[m]=function(y){return new Promise(function(w,v){i.push([m,y,w,v])>1||c(m,y)})},p&&(o[m]=p(o[m])))}function c(m,p){try{u(r[m](p))}catch(y){f(i[0][3],y)}}function u(m){m.value instanceof At?Promise.resolve(m.value.v).then(d,l):f(i[0][2],m)}function d(m){c("next",m)}function l(m){c("throw",m)}function f(m,p){m(p),i.shift(),i.length&&c(i[0][0],i[0][1])}}function Ra(e){var t,n;return t={},r("next"),r("throw",function(o){throw o}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(o,i){t[o]=e[o]?function(s){return(n=!n)?{value:At(e[o](s)),done:!1}:i?i(s):s}:i}}function Da(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof un=="function"?un(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(s){return new Promise(function(a,c){s=e[i](s),o(a,c,s.done,s.value)})}}function o(i,s,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},s)}}function Ia(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var Of=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},bo=function(e){return bo=Object.getOwnPropertyNames||function(t){var n=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[n.length]=r);return n},bo(e)};function Aa(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=bo(e),r=0;r<n.length;r++)n[r]!=="default"&&yr(t,e,n[r]);return Of(t,e),t}function Pa(e){return e&&e.__esModule?e:{default:e}}function ja(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)}function $a(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n}function La(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function Oa(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,o;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(o=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");o&&(r=function(){try{o.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var Ff=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function Fa(e){function t(i){e.error=e.hasError?new Ff(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var n,r=0;function o(){for(;n=e.stack.pop();)try{if(!n.async&&r===1)return r=0,e.stack.push(n),Promise.resolve().then(o);if(n.dispose){var i=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(i).then(o,function(s){return t(s),o()})}else r|=1}catch(s){t(s)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return o()}function Ha(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,o,i,s){return r?t?".jsx":".js":o&&(!i||!s)?n:o+i+"."+s.toLowerCase()+"js"}):e}const Hf={__extends:ga,__assign:Ie,__rest:gr,__decorate:ya,__param:xa,__esDecorate:va,__runInitializers:wa,__propKey:ba,__setFunctionName:Ca,__metadata:_a,__awaiter:Ea,__generator:Sa,__createBinding:yr,__exportStar:Ma,__values:un,__read:Ko,__spread:Na,__spreadArrays:ka,__spreadArray:qo,__await:At,__asyncGenerator:Ta,__asyncDelegator:Ra,__asyncValues:Da,__makeTemplateObject:Ia,__importStar:Aa,__importDefault:Pa,__classPrivateFieldGet:ja,__classPrivateFieldSet:$a,__classPrivateFieldIn:La,__addDisposableResource:Oa,__disposeResources:Fa,__rewriteRelativeImportExtension:Ha},zf=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Oa,get __assign(){return Ie},__asyncDelegator:Ra,__asyncGenerator:Ta,__asyncValues:Da,__await:At,__awaiter:Ea,__classPrivateFieldGet:ja,__classPrivateFieldIn:La,__classPrivateFieldSet:$a,__createBinding:yr,__decorate:ya,__disposeResources:Fa,__esDecorate:va,__exportStar:Ma,__extends:ga,__generator:Sa,__importDefault:Pa,__importStar:Aa,__makeTemplateObject:Ia,__metadata:_a,__param:xa,__propKey:ba,__read:Ko,__rest:gr,__rewriteRelativeImportExtension:Ha,__runInitializers:wa,__setFunctionName:Ca,__spread:Na,__spreadArray:qo,__spreadArrays:ka,__values:un,default:Hf},Symbol.toStringTag,{value:"Module"})),Bf=Ud(zf);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EventEmitter=void 0,e.default=o;var t=Bf,n=h,r=e.EventEmitter=function(){function i(){var s=this;this.subscriptions=new Set,this.emit=function(a){var c,u;try{for(var d=(0,t.__values)(s.subscriptions),l=d.next();!l.done;l=d.next()){var f=l.value;f(a)}}catch(m){c={error:m}}finally{try{l&&!l.done&&(u=d.return)&&u.call(d)}finally{if(c)throw c.error}}},this.useSubscription=function(a){var c=(0,n.useRef)();c.current=a,(0,n.useEffect)(function(){function u(d){c.current&&c.current(d)}return s.subscriptions.add(u),function(){s.subscriptions.delete(u)}},[])}}return i}();function o(){var i=(0,n.useRef)();return i.current||(i.current=new r),i.current}})(pa);const za=h.createContext({databaseType:me.GENERIC,diagramName:"",diagramId:"",tables:[],relationships:[],dependencies:[],schemas:[],filteredSchemas:[],filterSchemas:X,currentDiagram:{id:"",name:"",databaseType:me.GENERIC,createdAt:new Date,updatedAt:new Date},events:new pa.EventEmitter,updateDiagramId:X,updateDiagramName:X,updateDiagramUpdatedAt:X,loadDiagram:X,loadDiagramFromData:X,clearDiagramData:X,deleteDiagram:X,updateDatabaseType:X,updateDatabaseEdition:X,createTable:X,getTable:X,addTable:X,addTables:X,removeTable:X,removeTables:X,updateTable:X,updateTablesState:X,updateField:X,removeField:X,createField:X,addField:X,getField:X,createIndex:X,addIndex:X,getIndex:X,removeIndex:X,updateIndex:X,createRelationship:X,addRelationship:X,getRelationship:X,removeRelationship:X,updateRelationship:X,removeRelationships:X,addRelationships:X,createDependency:X,addDependency:X,getDependency:X,removeDependency:X,removeDependencies:X,addDependencies:X,updateDependency:X}),xr=()=>h.useContext(za);function Vf(){var e=h.useRef(!0);return e.current?(e.current=!1,!0):e.current}var Xf=function(e,t){var n=Vf();h.useEffect(function(){if(!n)return e()},t)},Yf=function(){};function Ba(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)}function Va(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}var Wf=typeof window<"u",Gf=["mousedown","touchstart"],Xa=function(e,t,n){n===void 0&&(n=Gf);var r=h.useRef(t);h.useEffect(function(){r.current=t},[t]),h.useEffect(function(){for(var o=function(c){var u=e.current;u&&!u.contains(c.target)&&r.current(c)},i=0,s=n;i<s.length;i++){var a=s[i];Ba(document,a,o)}return function(){for(var c=0,u=n;c<u.length;c++){var d=u[c];Va(document,d,o)}}},[n,e])},Uf=Wf?window:null,Di=function(e){return!!e.addEventListener},Ii=function(e){return!!e.on},Kf=function(e,t,n,r){n===void 0&&(n=Uf),h.useEffect(function(){if(t&&n)return Di(n)?Ba(n,e,t,r):Ii(n)&&n.on(e,t,r),function(){Di(n)?Va(n,e,t,r):Ii(n)&&n.off(e,t,r)}},[e,t,n,JSON.stringify(r)])},qf=function(e){return typeof e=="function"?e:typeof e=="string"?function(t){return t.key===e}:e?function(){return!0}:function(){return!1}},Ai=function(e,t,n,r){t===void 0&&(t=Yf),n===void 0&&(n={}),r===void 0&&(r=[e]);var o=n.event,i=o===void 0?"keydown":o,s=n.target,a=n.options,c=h.useMemo(function(){var u=qf(e),d=function(l){if(u(l))return t(l)};return d},r);Kf(i,c,s,a)},Zf=function(e){var t=h.useState([!1,null]),n=t[0],r=t[1];return Ai(e,function(o){return r([!0,o])},{event:"keydown"},[n]),Ai(e,function(o){return r([!1,o])},{event:"keyup"},[n]),n},tr=function(e,t,n,r){r===void 0&&(r=Zf);var o=r(e),i=o[0],s=o[1];Xf(function(){i&&t&&t(s)},[i])},Co=h.forwardRef((e,t)=>{const{children:n,...r}=e,o=h.Children.toArray(n),i=o.find(Jf);if(i){const s=i.props.children,a=o.map(c=>c===i?h.Children.count(s)>1?h.Children.only(null):h.isValidElement(s)?s.props.children:null:c);return g.jsx(_o,{...r,ref:t,children:h.isValidElement(s)?h.cloneElement(s,void 0,a):null})}return g.jsx(_o,{...r,ref:t,children:n})});Co.displayName="Slot";var _o=h.forwardRef((e,t)=>{const{children:n,...r}=e;if(h.isValidElement(n)){const o=th(n);return h.cloneElement(n,{...eh(r,n.props),ref:t?Go(t,o):o})}return h.Children.count(n)>1?h.Children.only(null):null});_o.displayName="SlotClone";var Qf=({children:e})=>g.jsx(g.Fragment,{children:e});function Jf(e){return h.isValidElement(e)&&e.type===Qf}function eh(e,t){const n={...t};for(const r in t){const o=e[r],i=t[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...a)=>{i(...a),o(...a)}:o&&(n[r]=o):r==="style"?n[r]={...o,...i}:r==="className"&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...e,...n}}function th(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Ya(e){const t=e+"CollectionProvider",[n,r]=Cn(t),[o,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),s=m=>{const{scope:p,children:y}=m,w=_e.useRef(null),v=_e.useRef(new Map).current;return g.jsx(o,{scope:p,itemMap:v,collectionRef:w,children:y})};s.displayName=t;const a=e+"CollectionSlot",c=_e.forwardRef((m,p)=>{const{scope:y,children:w}=m,v=i(a,y),_=Te(p,v.collectionRef);return g.jsx(Co,{ref:_,children:w})});c.displayName=a;const u=e+"CollectionItemSlot",d="data-radix-collection-item",l=_e.forwardRef((m,p)=>{const{scope:y,children:w,...v}=m,_=_e.useRef(null),b=Te(p,_),x=i(u,y);return _e.useEffect(()=>(x.itemMap.set(_,{ref:_,...v}),()=>void x.itemMap.delete(_))),g.jsx(Co,{[d]:"",ref:b,children:w})});l.displayName=u;function f(m){const p=i(e+"CollectionConsumer",m);return _e.useCallback(()=>{const w=p.collectionRef.current;if(!w)return[];const v=Array.from(w.querySelectorAll(`[${d}]`));return Array.from(p.itemMap.values()).sort((x,M)=>v.indexOf(x.ref.current)-v.indexOf(M.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:s,Slot:c,ItemSlot:l},f,r]}var nh=h.createContext(void 0);function Wa(e){const t=h.useContext(nh);return e||t||"ltr"}var rh="DismissableLayer",Eo="dismissableLayer.update",oh="dismissableLayer.pointerDownOutside",ih="dismissableLayer.focusOutside",Pi,Ga=h.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Zo=h.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:i,onInteractOutside:s,onDismiss:a,...c}=e,u=h.useContext(Ga),[d,l]=h.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=h.useState({}),p=Te(t,E=>l(E)),y=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=y.indexOf(w),_=d?y.indexOf(d):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,x=_>=v,M=ah(E=>{const N=E.target,R=[...u.branches].some(D=>D.contains(N));!x||R||(o==null||o(E),s==null||s(E),E.defaultPrevented||a==null||a())},f),j=ch(E=>{const N=E.target;[...u.branches].some(D=>D.contains(N))||(i==null||i(E),s==null||s(E),E.defaultPrevented||a==null||a())},f);return Kd(E=>{_===u.layers.size-1&&(r==null||r(E),!E.defaultPrevented&&a&&(E.preventDefault(),a()))},f),h.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Pi=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),ji(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=Pi)}},[d,f,n,u]),h.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),ji())},[d,u]),h.useEffect(()=>{const E=()=>m({});return document.addEventListener(Eo,E),()=>document.removeEventListener(Eo,E)},[]),g.jsx(Se.div,{...c,ref:p,style:{pointerEvents:b?x?"auto":"none":void 0,...e.style},onFocusCapture:le(e.onFocusCapture,j.onFocusCapture),onBlurCapture:le(e.onBlurCapture,j.onBlurCapture),onPointerDownCapture:le(e.onPointerDownCapture,M.onPointerDownCapture)})});Zo.displayName=rh;var sh="DismissableLayerBranch",Ua=h.forwardRef((e,t)=>{const n=h.useContext(Ga),r=h.useRef(null),o=Te(t,r);return h.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),g.jsx(Se.div,{...e,ref:o})});Ua.displayName=sh;function ah(e,t=globalThis==null?void 0:globalThis.document){const n=ze(e),r=h.useRef(!1),o=h.useRef(()=>{});return h.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let c=function(){Ka(oh,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=c,t.addEventListener("click",o.current,{once:!0})):c()}else t.removeEventListener("click",o.current);r.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",i),t.removeEventListener("click",o.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function ch(e,t=globalThis==null?void 0:globalThis.document){const n=ze(e),r=h.useRef(!1);return h.useEffect(()=>{const o=i=>{i.target&&!r.current&&Ka(ih,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function ji(){const e=new CustomEvent(Eo);document.dispatchEvent(e)}function Ka(e,t,n,{discrete:r}){const o=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),r?sa(o,i):o.dispatchEvent(i)}var Jb=Zo,eC=Ua,Yr=0;function uh(){h.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??$i()),document.body.insertAdjacentElement("beforeend",e[1]??$i()),Yr++,()=>{Yr===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Yr--}},[])}function $i(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Wr="focusScope.autoFocusOnMount",Gr="focusScope.autoFocusOnUnmount",Li={bubbles:!1,cancelable:!0},lh="FocusScope",qa=h.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:i,...s}=e,[a,c]=h.useState(null),u=ze(o),d=ze(i),l=h.useRef(null),f=Te(t,y=>c(y)),m=h.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;h.useEffect(()=>{if(r){let y=function(b){if(m.paused||!a)return;const x=b.target;a.contains(x)?l.current=x:rt(l.current,{select:!0})},w=function(b){if(m.paused||!a)return;const x=b.relatedTarget;x!==null&&(a.contains(x)||rt(l.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const M of b)M.removedNodes.length>0&&rt(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",w);const _=new MutationObserver(v);return a&&_.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),_.disconnect()}}},[r,a,m.paused]),h.useEffect(()=>{if(a){Fi.add(m);const y=document.activeElement;if(!a.contains(y)){const v=new CustomEvent(Wr,Li);a.addEventListener(Wr,u),a.dispatchEvent(v),v.defaultPrevented||(dh(gh(Za(a)),{select:!0}),document.activeElement===y&&rt(a))}return()=>{a.removeEventListener(Wr,u),setTimeout(()=>{const v=new CustomEvent(Gr,Li);a.addEventListener(Gr,d),a.dispatchEvent(v),v.defaultPrevented||rt(y??document.body,{select:!0}),a.removeEventListener(Gr,d),Fi.remove(m)},0)}}},[a,u,d,m]);const p=h.useCallback(y=>{if(!n&&!r||m.paused)return;const w=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,v=document.activeElement;if(w&&v){const _=y.currentTarget,[b,x]=fh(_);b&&x?!y.shiftKey&&v===x?(y.preventDefault(),n&&rt(b,{select:!0})):y.shiftKey&&v===b&&(y.preventDefault(),n&&rt(x,{select:!0})):v===_&&y.preventDefault()}},[n,r,m.paused]);return g.jsx(Se.div,{tabIndex:-1,...s,ref:f,onKeyDown:p})});qa.displayName=lh;function dh(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(rt(r,{select:t}),document.activeElement!==n)return}function fh(e){const t=Za(e),n=Oi(t,e),r=Oi(t.reverse(),e);return[n,r]}function Za(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Oi(e,t){for(const n of e)if(!hh(n,{upTo:t}))return n}function hh(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function mh(e){return e instanceof HTMLInputElement&&"select"in e}function rt(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&mh(e)&&t&&e.select()}}var Fi=ph();function ph(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=Hi(e,t),e.unshift(t)},remove(t){var n;e=Hi(e,t),(n=e[0])==null||n.resume()}}}function Hi(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function gh(e){return e.filter(t=>t.tagName!=="A")}var yh="Arrow",Qa=h.forwardRef((e,t)=>{const{children:n,width:r=10,height:o=5,...i}=e;return g.jsx(Se.svg,{...i,ref:t,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:g.jsx("polygon",{points:"0,0 30,0 15,10"})})});Qa.displayName=yh;var xh=Qa,Qo="Popper",[Ja,ec]=Cn(Qo),[vh,tc]=Ja(Qo),nc=e=>{const{__scopePopper:t,children:n}=e,[r,o]=h.useState(null);return g.jsx(vh,{scope:t,anchor:r,onAnchorChange:o,children:n})};nc.displayName=Qo;var rc="PopperAnchor",oc=h.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...o}=e,i=tc(rc,n),s=h.useRef(null),a=Te(t,s);return h.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||s.current)}),r?null:g.jsx(Se.div,{...o,ref:a})});oc.displayName=rc;var Jo="PopperContent",[wh,bh]=Ja(Jo),ic=h.forwardRef((e,t)=>{var J,Y,Q,se,ee,re;const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:i="center",alignOffset:s=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:l="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:p,...y}=e,w=tc(Jo,n),[v,_]=h.useState(null),b=Te(t,ae=>_(ae)),[x,M]=h.useState(null),j=qd(x),E=(j==null?void 0:j.width)??0,N=(j==null?void 0:j.height)??0,R=r+(i!=="center"?"-"+i:""),D=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},$=Array.isArray(u)?u:[u],L=$.length>0,H={padding:D,boundary:$.filter(_h),altBoundary:L},{refs:C,floatingStyles:P,placement:S,isPositioned:I,middlewareData:A}=Zd({strategy:"fixed",placement:R,whileElementsMounted:(...ae)=>sf(...ae,{animationFrame:m==="always"}),elements:{reference:w.anchor},middleware:[Qd({mainAxis:o+N,alignmentAxis:s}),c&&Jd({mainAxis:!0,crossAxis:!1,limiter:l==="partial"?of():void 0,...H}),c&&ef({...H}),tf({...H,apply:({elements:ae,rects:fe,availableWidth:ye,availableHeight:ve})=>{const{width:ct,height:ut}=fe.reference,De=ae.floating.style;De.setProperty("--radix-popper-available-width",`${ye}px`),De.setProperty("--radix-popper-available-height",`${ve}px`),De.setProperty("--radix-popper-anchor-width",`${ct}px`),De.setProperty("--radix-popper-anchor-height",`${ut}px`)}}),x&&nf({element:x,padding:a}),Eh({arrowWidth:E,arrowHeight:N}),f&&rf({strategy:"referenceHidden",...H})]}),[k,O]=cc(S),z=ze(p);po(()=>{I&&(z==null||z())},[I,z]);const V=(J=A.arrow)==null?void 0:J.x,te=(Y=A.arrow)==null?void 0:Y.y,B=((Q=A.arrow)==null?void 0:Q.centerOffset)!==0,[U,q]=h.useState();return po(()=>{v&&q(window.getComputedStyle(v).zIndex)},[v]),g.jsx("div",{ref:C.setFloating,"data-radix-popper-content-wrapper":"",style:{...P,transform:I?P.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:U,"--radix-popper-transform-origin":[(se=A.transformOrigin)==null?void 0:se.x,(ee=A.transformOrigin)==null?void 0:ee.y].join(" "),...((re=A.hide)==null?void 0:re.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:g.jsx(wh,{scope:n,placedSide:k,onArrowChange:M,arrowX:V,arrowY:te,shouldHideArrow:B,children:g.jsx(Se.div,{"data-side":k,"data-align":O,...y,ref:b,style:{...y.style,animation:I?void 0:"none"}})})})});ic.displayName=Jo;var sc="PopperArrow",Ch={top:"bottom",right:"left",bottom:"top",left:"right"},ac=h.forwardRef(function(t,n){const{__scopePopper:r,...o}=t,i=bh(sc,r),s=Ch[i.placedSide];return g.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:g.jsx(xh,{...o,ref:n,style:{...o.style,display:"block"}})})});ac.displayName=sc;function _h(e){return e!==null}var Eh=e=>({name:"transformOrigin",options:e,fn(t){var w,v,_;const{placement:n,rects:r,middlewareData:o}=t,s=((w=o.arrow)==null?void 0:w.centerOffset)!==0,a=s?0:e.arrowWidth,c=s?0:e.arrowHeight,[u,d]=cc(n),l={start:"0%",center:"50%",end:"100%"}[d],f=(((v=o.arrow)==null?void 0:v.x)??0)+a/2,m=(((_=o.arrow)==null?void 0:_.y)??0)+c/2;let p="",y="";return u==="bottom"?(p=s?l:`${f}px`,y=`${-c}px`):u==="top"?(p=s?l:`${f}px`,y=`${r.floating.height+c}px`):u==="right"?(p=`${-c}px`,y=s?l:`${m}px`):u==="left"&&(p=`${r.floating.width+c}px`,y=s?l:`${m}px`),{data:{x:p,y}}}});function cc(e){const[t,n="center"]=e.split("-");return[t,n]}var uc=nc,Sh=oc,Mh=ic,Nh=ac,kh="Portal",lc=h.forwardRef((e,t)=>{var a;const{container:n,...r}=e,[o,i]=h.useState(!1);po(()=>i(!0),[]);const s=n||o&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return s?af.createPortal(g.jsx(Se.div,{...r,ref:t}),s):null});lc.displayName=kh;var Ur="rovingFocusGroup.onEntryFocus",Th={bubbles:!1,cancelable:!0},vr="RovingFocusGroup",[So,dc,Rh]=Ya(vr),[Dh,fc]=Cn(vr,[Rh]),[Ih,Ah]=Dh(vr),hc=h.forwardRef((e,t)=>g.jsx(So.Provider,{scope:e.__scopeRovingFocusGroup,children:g.jsx(So.Slot,{scope:e.__scopeRovingFocusGroup,children:g.jsx(Ph,{...e,ref:t})})}));hc.displayName=vr;var Ph=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:i,currentTabStopId:s,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...l}=e,f=h.useRef(null),m=Te(t,f),p=Wa(i),[y=null,w]=cf({prop:s,defaultProp:a,onChange:c}),[v,_]=h.useState(!1),b=ze(u),x=dc(n),M=h.useRef(!1),[j,E]=h.useState(0);return h.useEffect(()=>{const N=f.current;if(N)return N.addEventListener(Ur,b),()=>N.removeEventListener(Ur,b)},[b]),g.jsx(Ih,{scope:n,orientation:r,dir:p,loop:o,currentTabStopId:y,onItemFocus:h.useCallback(N=>w(N),[w]),onItemShiftTab:h.useCallback(()=>_(!0),[]),onFocusableItemAdd:h.useCallback(()=>E(N=>N+1),[]),onFocusableItemRemove:h.useCallback(()=>E(N=>N-1),[]),children:g.jsx(Se.div,{tabIndex:v||j===0?-1:0,"data-orientation":r,...l,ref:m,style:{outline:"none",...e.style},onMouseDown:le(e.onMouseDown,()=>{M.current=!0}),onFocus:le(e.onFocus,N=>{const R=!M.current;if(N.target===N.currentTarget&&R&&!v){const D=new CustomEvent(Ur,Th);if(N.currentTarget.dispatchEvent(D),!D.defaultPrevented){const $=x().filter(S=>S.focusable),L=$.find(S=>S.active),H=$.find(S=>S.id===y),P=[L,H,...$].filter(Boolean).map(S=>S.ref.current);gc(P,d)}}M.current=!1}),onBlur:le(e.onBlur,()=>_(!1))})})}),mc="RovingFocusGroupItem",pc=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:i,...s}=e,a=go(),c=i||a,u=Ah(mc,n),d=u.currentTabStopId===c,l=dc(n),{onFocusableItemAdd:f,onFocusableItemRemove:m}=u;return h.useEffect(()=>{if(r)return f(),()=>m()},[r,f,m]),g.jsx(So.ItemSlot,{scope:n,id:c,focusable:r,active:o,children:g.jsx(Se.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...s,ref:t,onMouseDown:le(e.onMouseDown,p=>{r?u.onItemFocus(c):p.preventDefault()}),onFocus:le(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:le(e.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){u.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const y=Lh(p,u.orientation,u.dir);if(y!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let v=l().filter(_=>_.focusable).map(_=>_.ref.current);if(y==="last")v.reverse();else if(y==="prev"||y==="next"){y==="prev"&&v.reverse();const _=v.indexOf(p.currentTarget);v=u.loop?Oh(v,_+1):v.slice(_+1)}setTimeout(()=>gc(v))}})})})});pc.displayName=mc;var jh={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function $h(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Lh(e,t,n){const r=$h(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return jh[r]}function gc(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function Oh(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Fh=hc,Hh=pc,yc=h.forwardRef((e,t)=>{const{children:n,...r}=e,o=h.Children.toArray(n),i=o.find(Bh);if(i){const s=i.props.children,a=o.map(c=>c===i?h.Children.count(s)>1?h.Children.only(null):h.isValidElement(s)?s.props.children:null:c);return g.jsx(Mo,{...r,ref:t,children:h.isValidElement(s)?h.cloneElement(s,void 0,a):null})}return g.jsx(Mo,{...r,ref:t,children:n})});yc.displayName="Slot";var Mo=h.forwardRef((e,t)=>{const{children:n,...r}=e;if(h.isValidElement(n)){const o=Xh(n);return h.cloneElement(n,{...Vh(r,n.props),ref:t?Go(t,o):o})}return h.Children.count(n)>1?h.Children.only(null):null});Mo.displayName="SlotClone";var zh=({children:e})=>g.jsx(g.Fragment,{children:e});function Bh(e){return h.isValidElement(e)&&e.type===zh}function Vh(e,t){const n={...t};for(const r in t){const o=e[r],i=t[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...a)=>{i(...a),o(...a)}:o&&(n[r]=o):r==="style"?n[r]={...o,...i}:r==="className"&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...e,...n}}function Xh(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Yh=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},_t=new WeakMap,Dn=new WeakMap,In={},Kr=0,xc=function(e){return e&&(e.host||xc(e.parentNode))},Wh=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=xc(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Gh=function(e,t,n,r){var o=Wh(t,Array.isArray(e)?e:[e]);In[n]||(In[n]=new WeakMap);var i=In[n],s=[],a=new Set,c=new Set(o),u=function(l){!l||a.has(l)||(a.add(l),u(l.parentNode))};o.forEach(u);var d=function(l){!l||c.has(l)||Array.prototype.forEach.call(l.children,function(f){if(a.has(f))d(f);else try{var m=f.getAttribute(r),p=m!==null&&m!=="false",y=(_t.get(f)||0)+1,w=(i.get(f)||0)+1;_t.set(f,y),i.set(f,w),s.push(f),y===1&&p&&Dn.set(f,!0),w===1&&f.setAttribute(n,"true"),p||f.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",f,v)}})};return d(t),a.clear(),Kr++,function(){s.forEach(function(l){var f=_t.get(l)-1,m=i.get(l)-1;_t.set(l,f),i.set(l,m),f||(Dn.has(l)||l.removeAttribute(r),Dn.delete(l)),m||l.removeAttribute(n)}),Kr--,Kr||(_t=new WeakMap,_t=new WeakMap,Dn=new WeakMap,In={})}},Uh=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=Yh(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live]"))),Gh(r,o,n,"aria-hidden")):function(){return null}},Gn="right-scroll-bar-position",Un="width-before-scroll-bar",Kh="with-scroll-bars-hidden",qh="--removed-body-scroll-bar-size";function qr(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Zh(e,t){var n=h.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=t,n.facade}var Qh=typeof window<"u"?h.useLayoutEffect:h.useEffect,zi=new WeakMap;function Jh(e,t){var n=Zh(null,function(r){return e.forEach(function(o){return qr(o,r)})});return Qh(function(){var r=zi.get(n);if(r){var o=new Set(r),i=new Set(e),s=n.current;o.forEach(function(a){i.has(a)||qr(a,null)}),i.forEach(function(a){o.has(a)||qr(a,s)})}zi.set(n,e)},[e]),n}function em(e){return e}function tm(e,t){t===void 0&&(t=em);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var s=t(i,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(i){for(r=!0;n.length;){var s=n;n=[],s.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(i),s=n}var c=function(){var d=s;s=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){s.push(d),u()},filter:function(d){return s=s.filter(d),n}}}};return o}function nm(e){e===void 0&&(e={});var t=tm(null);return t.options=Ie({async:!0,ssr:!1},e),t}var vc=function(e){var t=e.sideCar,n=gr(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return h.createElement(r,Ie({},n))};vc.isSideCarExport=!0;function rm(e,t){return e.useMedium(t),vc}var wc=nm(),Zr=function(){},wr=h.forwardRef(function(e,t){var n=h.useRef(null),r=h.useState({onScrollCapture:Zr,onWheelCapture:Zr,onTouchMoveCapture:Zr}),o=r[0],i=r[1],s=e.forwardProps,a=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,l=e.shards,f=e.sideCar,m=e.noIsolation,p=e.inert,y=e.allowPinchZoom,w=e.as,v=w===void 0?"div":w,_=e.gapMode,b=gr(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),x=f,M=Jh([n,t]),j=Ie(Ie({},b),o);return h.createElement(h.Fragment,null,d&&h.createElement(x,{sideCar:wc,removeScrollBar:u,shards:l,noIsolation:m,inert:p,setCallbacks:i,allowPinchZoom:!!y,lockRef:n,gapMode:_}),s?h.cloneElement(h.Children.only(a),Ie(Ie({},j),{ref:M})):h.createElement(v,Ie({},j,{className:c,ref:M}),a))});wr.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};wr.classNames={fullWidth:Un,zeroRight:Gn};var om=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function im(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=om();return t&&e.setAttribute("nonce",t),e}function sm(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function am(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var cm=function(){var e=0,t=null;return{add:function(n){e==0&&(t=im())&&(sm(t,n),am(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},um=function(){var e=cm();return function(t,n){h.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},bc=function(){var e=um(),t=function(n){var r=n.styles,o=n.dynamic;return e(r,o),null};return t},lm={left:0,top:0,right:0,gap:0},Qr=function(e){return parseInt(e||"",10)||0},dm=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[Qr(n),Qr(r),Qr(o)]},fm=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return lm;var t=dm(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},hm=bc(),Tt="data-scroll-locked",mm=function(e,t,n,r){var o=e.left,i=e.top,s=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Kh,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Tt,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Gn,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Un,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Gn," .").concat(Gn,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Un," .").concat(Un,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Tt,`] {
    `).concat(qh,": ").concat(a,`px;
  }
`)},Bi=function(){var e=parseInt(document.body.getAttribute(Tt)||"0",10);return isFinite(e)?e:0},pm=function(){h.useEffect(function(){return document.body.setAttribute(Tt,(Bi()+1).toString()),function(){var e=Bi()-1;e<=0?document.body.removeAttribute(Tt):document.body.setAttribute(Tt,e.toString())}},[])},gm=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,o=r===void 0?"margin":r;pm();var i=h.useMemo(function(){return fm(o)},[o]);return h.createElement(hm,{styles:mm(i,!t,o,n?"":"!important")})},No=!1;if(typeof window<"u")try{var An=Object.defineProperty({},"passive",{get:function(){return No=!0,!0}});window.addEventListener("test",An,An),window.removeEventListener("test",An,An)}catch{No=!1}var Et=No?{passive:!1}:!1,ym=function(e){return e.tagName==="TEXTAREA"},Cc=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!ym(e)&&n[t]==="visible")},xm=function(e){return Cc(e,"overflowY")},vm=function(e){return Cc(e,"overflowX")},Vi=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=_c(e,r);if(o){var i=Ec(e,r),s=i[1],a=i[2];if(s>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},wm=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},bm=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},_c=function(e,t){return e==="v"?xm(t):vm(t)},Ec=function(e,t){return e==="v"?wm(t):bm(t)},Cm=function(e,t){return e==="h"&&t==="rtl"?-1:1},_m=function(e,t,n,r,o){var i=Cm(e,window.getComputedStyle(t).direction),s=i*r,a=n.target,c=t.contains(a),u=!1,d=s>0,l=0,f=0;do{var m=Ec(e,a),p=m[0],y=m[1],w=m[2],v=y-w-i*p;(p||v)&&_c(e,a)&&(l+=v,f+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!c&&a!==document.body||c&&(t.contains(a)||t===a));return(d&&Math.abs(l)<1||!d&&Math.abs(f)<1)&&(u=!0),u},Pn=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Xi=function(e){return[e.deltaX,e.deltaY]},Yi=function(e){return e&&"current"in e?e.current:e},Em=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Sm=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Mm=0,St=[];function Nm(e){var t=h.useRef([]),n=h.useRef([0,0]),r=h.useRef(),o=h.useState(Mm++)[0],i=h.useState(bc)[0],s=h.useRef(e);h.useEffect(function(){s.current=e},[e]),h.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var y=qo([e.lockRef.current],(e.shards||[]).map(Yi),!0).filter(Boolean);return y.forEach(function(w){return w.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),y.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var a=h.useCallback(function(y,w){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!s.current.allowPinchZoom;var v=Pn(y),_=n.current,b="deltaX"in y?y.deltaX:_[0]-v[0],x="deltaY"in y?y.deltaY:_[1]-v[1],M,j=y.target,E=Math.abs(b)>Math.abs(x)?"h":"v";if("touches"in y&&E==="h"&&j.type==="range")return!1;var N=Vi(E,j);if(!N)return!0;if(N?M=E:(M=E==="v"?"h":"v",N=Vi(E,j)),!N)return!1;if(!r.current&&"changedTouches"in y&&(b||x)&&(r.current=M),!M)return!0;var R=r.current||M;return _m(R,w,y,R==="h"?b:x)},[]),c=h.useCallback(function(y){var w=y;if(!(!St.length||St[St.length-1]!==i)){var v="deltaY"in w?Xi(w):Pn(w),_=t.current.filter(function(M){return M.name===w.type&&(M.target===w.target||w.target===M.shadowParent)&&Em(M.delta,v)})[0];if(_&&_.should){w.cancelable&&w.preventDefault();return}if(!_){var b=(s.current.shards||[]).map(Yi).filter(Boolean).filter(function(M){return M.contains(w.target)}),x=b.length>0?a(w,b[0]):!s.current.noIsolation;x&&w.cancelable&&w.preventDefault()}}},[]),u=h.useCallback(function(y,w,v,_){var b={name:y,delta:w,target:v,should:_,shadowParent:km(v)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(x){return x!==b})},1)},[]),d=h.useCallback(function(y){n.current=Pn(y),r.current=void 0},[]),l=h.useCallback(function(y){u(y.type,Xi(y),y.target,a(y,e.lockRef.current))},[]),f=h.useCallback(function(y){u(y.type,Pn(y),y.target,a(y,e.lockRef.current))},[]);h.useEffect(function(){return St.push(i),e.setCallbacks({onScrollCapture:l,onWheelCapture:l,onTouchMoveCapture:f}),document.addEventListener("wheel",c,Et),document.addEventListener("touchmove",c,Et),document.addEventListener("touchstart",d,Et),function(){St=St.filter(function(y){return y!==i}),document.removeEventListener("wheel",c,Et),document.removeEventListener("touchmove",c,Et),document.removeEventListener("touchstart",d,Et)}},[]);var m=e.removeScrollBar,p=e.inert;return h.createElement(h.Fragment,null,p?h.createElement(i,{styles:Sm(o)}):null,m?h.createElement(gm,{gapMode:e.gapMode}):null)}function km(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Tm=rm(wc,Nm);var Sc=h.forwardRef(function(e,t){return h.createElement(wr,Ie({},e,{ref:t,sideCar:Tm}))});Sc.classNames=wr.classNames;var ko=["Enter"," "],Rm=["ArrowDown","PageUp","Home"],Mc=["ArrowUp","PageDown","End"],Dm=[...Rm,...Mc],Im={ltr:[...ko,"ArrowRight"],rtl:[...ko,"ArrowLeft"]},Am={ltr:["ArrowLeft"],rtl:["ArrowRight"]},_n="Menu",[ln,Pm,jm]=Ya(_n),[bt,Nc]=Cn(_n,[jm,ec,fc]),En=ec(),kc=fc(),[Tc,at]=bt(_n),[$m,Sn]=bt(_n),Rc=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:o,onOpenChange:i,modal:s=!0}=e,a=En(t),[c,u]=h.useState(null),d=h.useRef(!1),l=ze(i),f=Wa(o);return h.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),g.jsx(uc,{...a,children:g.jsx(Tc,{scope:t,open:n,onOpenChange:l,content:c,onContentChange:u,children:g.jsx($m,{scope:t,onClose:h.useCallback(()=>l(!1),[l]),isUsingKeyboardRef:d,dir:f,modal:s,children:r})})})};Rc.displayName=_n;var Lm="MenuAnchor",ei=h.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=En(n);return g.jsx(Sh,{...o,...r,ref:t})});ei.displayName=Lm;var ti="MenuPortal",[Om,Dc]=bt(ti,{forceMount:void 0}),Ic=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:o}=e,i=at(ti,t);return g.jsx(Om,{scope:t,forceMount:n,children:g.jsx(pr,{present:n||i.open,children:g.jsx(lc,{asChild:!0,container:o,children:r})})})};Ic.displayName=ti;var Ae="MenuContent",[Fm,ni]=bt(Ae),Ac=h.forwardRef((e,t)=>{const n=Dc(Ae,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,i=at(Ae,e.__scopeMenu),s=Sn(Ae,e.__scopeMenu);return g.jsx(ln.Provider,{scope:e.__scopeMenu,children:g.jsx(pr,{present:r||i.open,children:g.jsx(ln.Slot,{scope:e.__scopeMenu,children:s.modal?g.jsx(Hm,{...o,ref:t}):g.jsx(zm,{...o,ref:t})})})})}),Hm=h.forwardRef((e,t)=>{const n=at(Ae,e.__scopeMenu),r=h.useRef(null),o=Te(t,r);return h.useEffect(()=>{const i=r.current;if(i)return Uh(i)},[]),g.jsx(ri,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:le(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),zm=h.forwardRef((e,t)=>{const n=at(Ae,e.__scopeMenu);return g.jsx(ri,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),ri=h.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:a,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:l,onInteractOutside:f,onDismiss:m,disableOutsideScroll:p,...y}=e,w=at(Ae,n),v=Sn(Ae,n),_=En(n),b=kc(n),x=Pm(n),[M,j]=h.useState(null),E=h.useRef(null),N=Te(t,E,w.onContentChange),R=h.useRef(0),D=h.useRef(""),$=h.useRef(0),L=h.useRef(null),H=h.useRef("right"),C=h.useRef(0),P=p?Sc:h.Fragment,S=p?{as:yc,allowPinchZoom:!0}:void 0,I=k=>{var J,Y;const O=D.current+k,z=x().filter(Q=>!Q.disabled),V=document.activeElement,te=(J=z.find(Q=>Q.ref.current===V))==null?void 0:J.textValue,B=z.map(Q=>Q.textValue),U=Jm(B,O,te),q=(Y=z.find(Q=>Q.textValue===U))==null?void 0:Y.ref.current;(function Q(se){D.current=se,window.clearTimeout(R.current),se!==""&&(R.current=window.setTimeout(()=>Q(""),1e3))})(O),q&&setTimeout(()=>q.focus())};h.useEffect(()=>()=>window.clearTimeout(R.current),[]),uh();const A=h.useCallback(k=>{var z,V;return H.current===((z=L.current)==null?void 0:z.side)&&tp(k,(V=L.current)==null?void 0:V.area)},[]);return g.jsx(Fm,{scope:n,searchRef:D,onItemEnter:h.useCallback(k=>{A(k)&&k.preventDefault()},[A]),onItemLeave:h.useCallback(k=>{var O;A(k)||((O=E.current)==null||O.focus(),j(null))},[A]),onTriggerLeave:h.useCallback(k=>{A(k)&&k.preventDefault()},[A]),pointerGraceTimerRef:$,onPointerGraceIntentChange:h.useCallback(k=>{L.current=k},[]),children:g.jsx(P,{...S,children:g.jsx(qa,{asChild:!0,trapped:o,onMountAutoFocus:le(i,k=>{var O;k.preventDefault(),(O=E.current)==null||O.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:g.jsx(Zo,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:l,onInteractOutside:f,onDismiss:m,children:g.jsx(Fh,{asChild:!0,...b,dir:v.dir,orientation:"vertical",loop:r,currentTabStopId:M,onCurrentTabStopIdChange:j,onEntryFocus:le(c,k=>{v.isUsingKeyboardRef.current||k.preventDefault()}),preventScrollOnEntryFocus:!0,children:g.jsx(Mh,{role:"menu","aria-orientation":"vertical","data-state":qc(w.open),"data-radix-menu-content":"",dir:v.dir,..._,...y,ref:N,style:{outline:"none",...y.style},onKeyDown:le(y.onKeyDown,k=>{const z=k.target.closest("[data-radix-menu-content]")===k.currentTarget,V=k.ctrlKey||k.altKey||k.metaKey,te=k.key.length===1;z&&(k.key==="Tab"&&k.preventDefault(),!V&&te&&I(k.key));const B=E.current;if(k.target!==B||!Dm.includes(k.key))return;k.preventDefault();const q=x().filter(J=>!J.disabled).map(J=>J.ref.current);Mc.includes(k.key)&&q.reverse(),Zm(q)}),onBlur:le(e.onBlur,k=>{k.currentTarget.contains(k.target)||(window.clearTimeout(R.current),D.current="")}),onPointerMove:le(e.onPointerMove,dn(k=>{const O=k.target,z=C.current!==k.clientX;if(k.currentTarget.contains(O)&&z){const V=k.clientX>C.current?"right":"left";H.current=V,C.current=k.clientX}}))})})})})})})});Ac.displayName=Ae;var Bm="MenuGroup",oi=h.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return g.jsx(Se.div,{role:"group",...r,ref:t})});oi.displayName=Bm;var Vm="MenuLabel",Pc=h.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return g.jsx(Se.div,{...r,ref:t})});Pc.displayName=Vm;var nr="MenuItem",Wi="menu.itemSelect",br=h.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...o}=e,i=h.useRef(null),s=Sn(nr,e.__scopeMenu),a=ni(nr,e.__scopeMenu),c=Te(t,i),u=h.useRef(!1),d=()=>{const l=i.current;if(!n&&l){const f=new CustomEvent(Wi,{bubbles:!0,cancelable:!0});l.addEventListener(Wi,m=>r==null?void 0:r(m),{once:!0}),sa(l,f),f.defaultPrevented?u.current=!1:s.onClose()}};return g.jsx(jc,{...o,ref:c,disabled:n,onClick:le(e.onClick,d),onPointerDown:l=>{var f;(f=e.onPointerDown)==null||f.call(e,l),u.current=!0},onPointerUp:le(e.onPointerUp,l=>{var f;u.current||(f=l.currentTarget)==null||f.click()}),onKeyDown:le(e.onKeyDown,l=>{const f=a.searchRef.current!=="";n||f&&l.key===" "||ko.includes(l.key)&&(l.currentTarget.click(),l.preventDefault())})})});br.displayName=nr;var jc=h.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...i}=e,s=ni(nr,n),a=kc(n),c=h.useRef(null),u=Te(t,c),[d,l]=h.useState(!1),[f,m]=h.useState("");return h.useEffect(()=>{const p=c.current;p&&m((p.textContent??"").trim())},[i.children]),g.jsx(ln.ItemSlot,{scope:n,disabled:r,textValue:o??f,children:g.jsx(Hh,{asChild:!0,...a,focusable:!r,children:g.jsx(Se.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:le(e.onPointerMove,dn(p=>{r?s.onItemLeave(p):(s.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:le(e.onPointerLeave,dn(p=>s.onItemLeave(p))),onFocus:le(e.onFocus,()=>l(!0)),onBlur:le(e.onBlur,()=>l(!1))})})})}),Xm="MenuCheckboxItem",$c=h.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...o}=e;return g.jsx(zc,{scope:e.__scopeMenu,checked:n,children:g.jsx(br,{role:"menuitemcheckbox","aria-checked":rr(n)?"mixed":n,...o,ref:t,"data-state":ai(n),onSelect:le(o.onSelect,()=>r==null?void 0:r(rr(n)?!0:!n),{checkForDefaultPrevented:!1})})})});$c.displayName=Xm;var Lc="MenuRadioGroup",[Ym,Wm]=bt(Lc,{value:void 0,onValueChange:()=>{}}),Oc=h.forwardRef((e,t)=>{const{value:n,onValueChange:r,...o}=e,i=ze(r);return g.jsx(Ym,{scope:e.__scopeMenu,value:n,onValueChange:i,children:g.jsx(oi,{...o,ref:t})})});Oc.displayName=Lc;var Fc="MenuRadioItem",Hc=h.forwardRef((e,t)=>{const{value:n,...r}=e,o=Wm(Fc,e.__scopeMenu),i=n===o.value;return g.jsx(zc,{scope:e.__scopeMenu,checked:i,children:g.jsx(br,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":ai(i),onSelect:le(r.onSelect,()=>{var s;return(s=o.onValueChange)==null?void 0:s.call(o,n)},{checkForDefaultPrevented:!1})})})});Hc.displayName=Fc;var ii="MenuItemIndicator",[zc,Gm]=bt(ii,{checked:!1}),Bc=h.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...o}=e,i=Gm(ii,n);return g.jsx(pr,{present:r||rr(i.checked)||i.checked===!0,children:g.jsx(Se.span,{...o,ref:t,"data-state":ai(i.checked)})})});Bc.displayName=ii;var Um="MenuSeparator",Vc=h.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return g.jsx(Se.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});Vc.displayName=Um;var Km="MenuArrow",Xc=h.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=En(n);return g.jsx(Nh,{...o,...r,ref:t})});Xc.displayName=Km;var si="MenuSub",[qm,Yc]=bt(si),Wc=e=>{const{__scopeMenu:t,children:n,open:r=!1,onOpenChange:o}=e,i=at(si,t),s=En(t),[a,c]=h.useState(null),[u,d]=h.useState(null),l=ze(o);return h.useEffect(()=>(i.open===!1&&l(!1),()=>l(!1)),[i.open,l]),g.jsx(uc,{...s,children:g.jsx(Tc,{scope:t,open:r,onOpenChange:l,content:u,onContentChange:d,children:g.jsx(qm,{scope:t,contentId:go(),triggerId:go(),trigger:a,onTriggerChange:c,children:n})})})};Wc.displayName=si;var en="MenuSubTrigger",Gc=h.forwardRef((e,t)=>{const n=at(en,e.__scopeMenu),r=Sn(en,e.__scopeMenu),o=Yc(en,e.__scopeMenu),i=ni(en,e.__scopeMenu),s=h.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:c}=i,u={__scopeMenu:e.__scopeMenu},d=h.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return h.useEffect(()=>d,[d]),h.useEffect(()=>{const l=a.current;return()=>{window.clearTimeout(l),c(null)}},[a,c]),g.jsx(ei,{asChild:!0,...u,children:g.jsx(jc,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":qc(n.open),...e,ref:Go(t,o.onTriggerChange),onClick:l=>{var f;(f=e.onClick)==null||f.call(e,l),!(e.disabled||l.defaultPrevented)&&(l.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:le(e.onPointerMove,dn(l=>{i.onItemEnter(l),!l.defaultPrevented&&!e.disabled&&!n.open&&!s.current&&(i.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:le(e.onPointerLeave,dn(l=>{var m,p;d();const f=(m=n.content)==null?void 0:m.getBoundingClientRect();if(f){const y=(p=n.content)==null?void 0:p.dataset.side,w=y==="right",v=w?-5:5,_=f[w?"left":"right"],b=f[w?"right":"left"];i.onPointerGraceIntentChange({area:[{x:l.clientX+v,y:l.clientY},{x:_,y:f.top},{x:b,y:f.top},{x:b,y:f.bottom},{x:_,y:f.bottom}],side:y}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(l),l.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:le(e.onKeyDown,l=>{var m;const f=i.searchRef.current!=="";e.disabled||f&&l.key===" "||Im[r.dir].includes(l.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),l.preventDefault())})})})});Gc.displayName=en;var Uc="MenuSubContent",Kc=h.forwardRef((e,t)=>{const n=Dc(Ae,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,i=at(Ae,e.__scopeMenu),s=Sn(Ae,e.__scopeMenu),a=Yc(Uc,e.__scopeMenu),c=h.useRef(null),u=Te(t,c);return g.jsx(ln.Provider,{scope:e.__scopeMenu,children:g.jsx(pr,{present:r||i.open,children:g.jsx(ln.Slot,{scope:e.__scopeMenu,children:g.jsx(ri,{id:a.contentId,"aria-labelledby":a.triggerId,...o,ref:u,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var l;s.isUsingKeyboardRef.current&&((l=c.current)==null||l.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:le(e.onFocusOutside,d=>{d.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:le(e.onEscapeKeyDown,d=>{s.onClose(),d.preventDefault()}),onKeyDown:le(e.onKeyDown,d=>{var m;const l=d.currentTarget.contains(d.target),f=Am[s.dir].includes(d.key);l&&f&&(i.onOpenChange(!1),(m=a.trigger)==null||m.focus(),d.preventDefault())})})})})})});Kc.displayName=Uc;function qc(e){return e?"open":"closed"}function rr(e){return e==="indeterminate"}function ai(e){return rr(e)?"indeterminate":e?"checked":"unchecked"}function Zm(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function Qm(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function Jm(e,t,n){const o=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let s=Qm(e,Math.max(i,0));o.length===1&&(s=s.filter(u=>u!==n));const c=s.find(u=>u.toLowerCase().startsWith(o.toLowerCase()));return c!==n?c:void 0}function ep(e,t){const{x:n,y:r}=e;let o=!1;for(let i=0,s=t.length-1;i<t.length;s=i++){const a=t[i].x,c=t[i].y,u=t[s].x,d=t[s].y;c>r!=d>r&&n<(u-a)*(r-c)/(d-c)+a&&(o=!o)}return o}function tp(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return ep(n,t)}function dn(e){return t=>t.pointerType==="mouse"?e(t):void 0}var np=Rc,rp=ei,op=Ic,ip=Ac,sp=oi,ap=Pc,cp=br,up=$c,lp=Oc,dp=Hc,fp=Bc,hp=Vc,mp=Xc,tC=Wc,pp=Gc,gp=Kc;function Be(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}var yp=["color"],nC=h.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Be(e,yp);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),h.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),xp=["color"],vp=h.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Be(e,xp);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),h.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),wp=["color"],rC=h.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Be(e,wp);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),h.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),bp=["color"],Cp=h.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Be(e,bp);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),h.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),_p=["color"],oC=h.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Be(e,_p);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),h.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Ep=["color"],iC=h.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Be(e,Ep);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),h.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Sp=["color"],Mp=h.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Be(e,Sp);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),h.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:r}))}),Np=["color"],sC=h.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Be(e,Np);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),h.createElement("path",{d:"M5.5 4.625C6.12132 4.625 6.625 4.12132 6.625 3.5C6.625 2.87868 6.12132 2.375 5.5 2.375C4.87868 2.375 4.375 2.87868 4.375 3.5C4.375 4.12132 4.87868 4.625 5.5 4.625ZM9.5 4.625C10.1213 4.625 10.625 4.12132 10.625 3.5C10.625 2.87868 10.1213 2.375 9.5 2.375C8.87868 2.375 8.375 2.87868 8.375 3.5C8.375 4.12132 8.87868 4.625 9.5 4.625ZM10.625 7.5C10.625 8.12132 10.1213 8.625 9.5 8.625C8.87868 8.625 8.375 8.12132 8.375 7.5C8.375 6.87868 8.87868 6.375 9.5 6.375C10.1213 6.375 10.625 6.87868 10.625 7.5ZM5.5 8.625C6.12132 8.625 6.625 8.12132 6.625 7.5C6.625 6.87868 6.12132 6.375 5.5 6.375C4.87868 6.375 4.375 6.87868 4.375 7.5C4.375 8.12132 4.87868 8.625 5.5 8.625ZM10.625 11.5C10.625 12.1213 10.1213 12.625 9.5 12.625C8.87868 12.625 8.375 12.1213 8.375 11.5C8.375 10.8787 8.87868 10.375 9.5 10.375C10.1213 10.375 10.625 10.8787 10.625 11.5ZM5.5 12.625C6.12132 12.625 6.625 12.1213 6.625 11.5C6.625 10.8787 6.12132 10.375 5.5 10.375C4.87868 10.375 4.375 10.8787 4.375 11.5C4.375 12.1213 4.87868 12.625 5.5 12.625Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),kp=["color"],aC=h.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Be(e,kp);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),h.createElement("path",{d:"M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Tp=["color"],cC=h.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Be(e,Tp);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),h.createElement("path",{d:"M8 2H13.5C13.7761 2 14 2.22386 14 2.5V12.5C14 12.7761 13.7761 13 13.5 13H8V2ZM7 2H1.5C1.22386 2 1 2.22386 1 2.5V12.5C1 12.7761 1.22386 13 1.5 13H7V2ZM0 2.5C0 1.67157 0.671573 1 1.5 1H13.5C14.3284 1 15 1.67157 15 2.5V12.5C15 13.3284 14.3284 14 13.5 14H1.5C0.671573 14 0 13.3284 0 12.5V2.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Zc={exports:{}},Qc={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pt=h;function Rp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Dp=typeof Object.is=="function"?Object.is:Rp,Ip=Pt.useState,Ap=Pt.useEffect,Pp=Pt.useLayoutEffect,jp=Pt.useDebugValue;function $p(e,t){var n=t(),r=Ip({inst:{value:n,getSnapshot:t}}),o=r[0].inst,i=r[1];return Pp(function(){o.value=n,o.getSnapshot=t,Jr(o)&&i({inst:o})},[e,n,t]),Ap(function(){return Jr(o)&&i({inst:o}),e(function(){Jr(o)&&i({inst:o})})},[e]),jp(n),n}function Jr(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Dp(e,n)}catch{return!0}}function Lp(e,t){return t()}var Op=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Lp:$p;Qc.useSyncExternalStore=Pt.useSyncExternalStore!==void 0?Pt.useSyncExternalStore:Op;Zc.exports=Qc;var Fp=Zc.exports;const Hp=h.createContext({openCreateDiagramDialog:X,closeCreateDiagramDialog:X,openOpenDiagramDialog:X,closeOpenDiagramDialog:X,openExportSQLDialog:X,closeExportSQLDialog:X,closeCreateRelationshipDialog:X,openCreateRelationshipDialog:X,openImportDatabaseDialog:X,closeImportDatabaseDialog:X,openTableSchemaDialog:X,closeTableSchemaDialog:X,openStarUsDialog:X,closeStarUsDialog:X,openExportImageDialog:X,closeExportImageDialog:X,openExportDiagramDialog:X,closeExportDiagramDialog:X,openImportDiagramDialog:X,closeImportDiagramDialog:X,openImportDBMLDialog:X,closeImportDBMLDialog:X}),zp=()=>h.useContext(Hp),Bp=h.createContext({undo:X,redo:X,hasUndo:!1,hasRedo:!1}),uC=()=>h.useContext(Bp),Vp=h.createContext({openedTableInSidebar:void 0,selectedSidebarSection:"tables",openedRelationshipInSidebar:void 0,openRelationshipFromSidebar:X,closeAllRelationshipsInSidebar:X,openedDependencyInSidebar:void 0,openDependencyFromSidebar:X,closeAllDependenciesInSidebar:X,selectSidebarSection:X,openTableFromSidebar:X,closeAllTablesInSidebar:X,isSidePanelShowed:!1,hideSidePanel:X,showSidePanel:X,toggleSidePanel:X,isSelectSchemaOpen:!1,openSelectSchema:X,closeSelectSchema:X}),Jc=()=>h.useContext(Vp),Xp=h.createContext({closeAlert:X,showAlert:X}),lC=()=>h.useContext(Xp),Yp=1,Wp=1e6;let eo=0;function Gp(){return eo=(eo+1)%Number.MAX_SAFE_INTEGER,eo.toString()}const to=new Map,Gi=e=>{if(to.has(e))return;const t=setTimeout(()=>{to.delete(e),sn({type:"REMOVE_TOAST",toastId:e})},Wp);to.set(e,t)},Up=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,Yp)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?Gi(n):e.toasts.forEach(r=>{Gi(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Kn=[];let qn={toasts:[]};function sn(e){qn=Up(qn,e),Kn.forEach(t=>{t(qn)})}function Kp({...e}){const t=Gp(),n=o=>sn({type:"UPDATE_TOAST",toast:{...o,id:t}}),r=()=>sn({type:"DISMISS_TOAST",toastId:t});return sn({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:o=>{o||r()}}}),{id:t,dismiss:r,update:n}}function dC(){const[e,t]=_e.useState(qn);return _e.useEffect(()=>(Kn.push(t),()=>{const n=Kn.indexOf(t);n>-1&&Kn.splice(n,1)}),[e]),{...e,toast:Kp,dismiss:n=>sn({type:"DISMISS_TOAST",toastId:n})}}const qp=h.createContext({redoStack:[],undoStack:[],addRedoAction:X,addUndoAction:X,resetRedoStack:X,resetUndoStack:X,hasRedo:!1,hasUndo:!1}),Zp=()=>h.useContext(qp),Qp={[me.POSTGRESQL]:"public",[me.SQL_SERVER]:"dbo",[me.CLICKHOUSE]:"default"};var Jp=function(){function e(){var t=this;this.subscriptions=new Set,this.emit=function(n){var r,o;try{for(var i=un(t.subscriptions),s=i.next();!s.done;s=i.next()){var a=s.value;a(n)}}catch(c){r={error:c}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}},this.useSubscription=function(n){var r=h.useRef();r.current=n,h.useEffect(function(){function o(i){r.current&&r.current(i)}return t.subscriptions.add(o),function(){t.subscriptions.delete(o)}},[])}}return e}();function eg(){var e=h.useRef();return e.current||(e.current=new Jp),e.current}const tg=h.createContext(void 0),or=()=>{const e=h.useContext(tg);if(e===void 0)throw new Error("useDiff must be used within an DiffProvider");return e},fC=({children:e,diagram:t,readonly:n})=>{const{hasDiff:r}=or();let o=pf();const i=eg(),{setSchemasFilter:s,schemasFilter:a}=Yd(),{addUndoAction:c,resetRedoStack:u,resetUndoStack:d}=Zp(),[l,f]=h.useState(""),[m,p]=h.useState(""),[y,w]=h.useState(new Date),[v,_]=h.useState(new Date),[b,x]=h.useState(me.GENERIC),[M,j]=h.useState(),[E,N]=h.useState((t==null?void 0:t.tables)??[]),[R,D]=h.useState((t==null?void 0:t.relationships)??[]),[$,L]=h.useState((t==null?void 0:t.dependencies)??[]),{events:H}=or(),C=h.useCallback(T=>{const{tablesAdded:F,fieldsAdded:G,relationshipsAdded:W}=T.data;N(K=>[...K,...F??[]].map(ie=>{const Z=G.get(ie.id);return Z?{...ie,fields:[...ie.fields,...Z]}:ie})),D(K=>[...K,...W??[]])},[]);H.useSubscription(C);const P=Qp[b],S=h.useMemo(()=>n??r??!1,[n,r]);S&&(o=yf);const I=h.useMemo(()=>gf.includes(b)?[...new Set(E.map(T=>T.schema).filter(T=>!!T))].sort((T,F)=>T===P?-1:T.localeCompare(F)).map(T=>({id:ia(T),name:T,tableCount:E.filter(F=>F.schema===T).length})):[],[E,P,b]),A=h.useCallback(T=>{s(F=>({...F,[l]:T}))},[l,s]),k=h.useMemo(()=>{var F,G;return I.length===0?void 0:((a[l]??[]).length===0?void 0:a[l])??[((F=I.find(W=>W.name===P))==null?void 0:F.id)??((G=I[0])==null?void 0:G.id)]},[a,l,I,P]),O=h.useMemo(()=>({id:l,name:m,createdAt:y,updatedAt:v,databaseType:b,databaseEdition:M,tables:E,relationships:R,dependencies:$}),[l,m,b,M,E,R,$,y,v]),z=h.useCallback(async()=>{const T=new Date;N([]),D([]),L([]),_(T),u(),d(),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:T}}),o.deleteDiagramTables(l),o.deleteDiagramRelationships(l),o.deleteDiagramDependencies(l)])},[o,l,u,d]),V=h.useCallback(async()=>{f(""),p(""),x(me.GENERIC),j(void 0),N([]),D([]),L([]),u(),d(),await Promise.all([o.deleteDiagramTables(l),o.deleteDiagramRelationships(l),o.deleteDiagram(l),o.deleteDiagramDependencies(l)])},[o,l,u,d]),te=h.useCallback(async()=>{const T=new Date;_(T),await o.updateDiagram({id:l,attributes:{updatedAt:T}})},[o,l,_]),B=h.useCallback(async T=>{x(T),await o.updateDiagram({id:l,attributes:{databaseType:T}})},[o,l,x]),U=h.useCallback(async T=>{j(T),await o.updateDiagram({id:l,attributes:{databaseEdition:T}})},[o,l,j]),q=h.useCallback(async T=>{const F=l;f(T),await o.updateDiagram({id:F,attributes:{id:T}})},[o,l,f]),J=h.useCallback(async(T,F={updateHistory:!0})=>{const G=m;p(T);const W=new Date;_(W),await o.updateDiagram({id:l,attributes:{name:T,updatedAt:W}}),F.updateHistory&&(c({action:"updateDiagramName",redoData:{name:T},undoData:{name:G}}),u())},[o,l,p,c,m,u]),Y=h.useCallback(async(T,F={updateHistory:!0})=>{N(W=>[...W,...T]);const G=new Date;_(G),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:G}}),...T.map(W=>o.addTable({diagramId:l,table:W}))]),i.emit({action:"add_tables",data:{tables:T}}),F.updateHistory&&(c({action:"addTables",redoData:{tables:T},undoData:{tableIds:T.map(W=>W.id)}}),u())},[o,l,N,c,u,i]),Q=h.useCallback(async(T,F={updateHistory:!0})=>Y([T],F),[Y]),se=h.useCallback(async T=>{const F={id:Ue(),name:`table_${E.length+1}`,x:0,y:0,fields:[{id:Ue(),name:"id",type:b===me.SQLITE?{id:"integer",name:"integer"}:{id:"bigint",name:"bigint"},unique:!0,nullable:!1,primaryKey:!0,createdAt:Date.now()}],indexes:[],color:oa(),createdAt:Date.now(),isView:!1,order:E.length,...T};return await Q(F),F},[Q,E,b]),ee=h.useCallback(T=>E.find(F=>F.id===T)??null,[E]),re=h.useCallback(async(T,F)=>{const G=T.map(Z=>ee(Z)).filter(Z=>!!Z),W=R.filter(Z=>T.includes(Z.sourceTableId)||T.includes(Z.targetTableId)),K=$.filter(Z=>T.includes(Z.tableId)||T.includes(Z.dependentTableId));D(Z=>Z.filter(ue=>!W.some(ce=>ce.id===ue.id))),L(Z=>Z.filter(ue=>!K.some(ce=>ce.id===ue.id))),N(Z=>Z.filter(ue=>!T.includes(ue.id))),i.emit({action:"remove_tables",data:{tableIds:T}});const ie=new Date;_(ie),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:ie}}),...W.map(Z=>o.deleteRelationship({diagramId:l,id:Z.id})),...K.map(Z=>o.deleteDependency({diagramId:l,id:Z.id})),...T.map(Z=>o.deleteTable({diagramId:l,id:Z}))]),G.length>0&&(F!=null&&F.updateHistory)&&(c({action:"removeTables",redoData:{tableIds:T},undoData:{tables:G,relationships:W,dependencies:K}}),u())},[o,l,N,c,u,ee,R,i,$]),ae=h.useCallback(async(T,F={updateHistory:!0})=>re([T],F),[re]),fe=h.useCallback(async(T,F,G={updateHistory:!0})=>{const W=ee(T);N(ie=>ie.map(Z=>Z.id===T?{...Z,...F}:Z)),i.emit({action:"update_table",data:{id:T,table:F}});const K=new Date;_(K),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:K}}),o.updateTable({id:T,attributes:F})]),W&&G.updateHistory&&(c({action:"updateTable",redoData:{tableId:T,table:F},undoData:{tableId:T,table:W}}),u())},[o,N,c,u,ee,l,i]),ye=h.useCallback(async(T,F={updateHistory:!0,forceOverride:!1})=>{const G=he=>{const Ce=T(he);return F.forceOverride?Ce:he.map(Pe=>{const Ct=Ce.find(Vr=>Vr.id===Pe.id);return Ct?{...Pe,...Ct}:Pe}).filter(Pe=>Ce.some(Ct=>Ct.id===Pe.id))},W=yo(E),K=G(E),ie=W.filter(he=>!K.some(Ce=>Ce.id===he.id)),Z=R.filter(he=>ie.some(Ce=>Ce.id===he.sourceTableId||Ce.id===he.targetTableId)),ue=$.filter(he=>ie.some(Ce=>Ce.id===he.tableId||Ce.id===he.dependentTableId));D(he=>he.filter(Ce=>!Z.some(Pe=>Pe.id===Ce.id))),L(he=>he.filter(Ce=>!ue.some(Pe=>Pe.id===Ce.id))),N(G),i.emit({action:"remove_tables",data:{tableIds:ie.map(he=>he.id)}});const ce=[];for(const he of K)ce.push(o.putTable({diagramId:l,table:he}));for(const he of ie)ce.push(o.deleteTable({diagramId:l,id:he.id}));for(const he of Z)ce.push(o.deleteRelationship({diagramId:l,id:he.id}));for(const he of ue)ce.push(o.deleteDependency({diagramId:l,id:he.id}));const we=new Date;_(we),ce.push(o.updateDiagram({id:l,attributes:{updatedAt:we}})),await Promise.all(ce),F.updateHistory&&(c({action:"updateTablesState",redoData:{tables:K},undoData:{tables:W,relationships:Z,dependencies:ue}}),u())},[o,E,N,l,c,u,R,i,$]),ve=h.useCallback((T,F)=>{const G=ee(T);return(G==null?void 0:G.fields.find(W=>W.id===F))??null},[ee]),ct=h.useCallback(async(T,F,G,W={updateHistory:!0})=>{const K=ve(T,F);N(ue=>ue.map(ce=>ce.id===T?{...ce,fields:ce.fields.map(we=>we.id===F?{...we,...G}:we)}:ce));const ie=await o.getTable({diagramId:l,id:T});if(!ie)return;const Z=new Date;_(Z),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:Z}}),o.updateTable({id:T,attributes:{...ie,fields:ie.fields.map(ue=>ue.id===F?{...ue,...G}:ue)}})]),K&&W.updateHistory&&(c({action:"updateField",redoData:{tableId:T,fieldId:F,field:{...K,...G}},undoData:{tableId:T,fieldId:F,field:K}}),u())},[o,l,N,c,u,ve]),ut=h.useCallback(async(T,F,G={updateHistory:!0})=>{var ue;const W=((ue=ee(T))==null?void 0:ue.fields)??[],K=ve(T,F);N(ce=>ce.map(we=>we.id===T?{...we,fields:we.fields.filter(he=>he.id!==F)}:we)),i.emit({action:"remove_field",data:{tableId:T,fieldId:F,fields:W.filter(ce=>ce.id!==F)}});const ie=await o.getTable({diagramId:l,id:T});if(!ie)return;const Z=new Date;_(Z),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:Z}}),o.updateTable({id:T,attributes:{...ie,fields:ie.fields.filter(ce=>ce.id!==F)}})]),K&&G.updateHistory&&(c({action:"removeField",redoData:{tableId:T,fieldId:F},undoData:{tableId:T,field:K}}),u())},[o,l,N,c,u,ve,ee,i]),De=h.useCallback(async(T,F,G={updateHistory:!0})=>{var Z;const W=((Z=ee(T))==null?void 0:Z.fields)??[];N(ue=>ue.map(ce=>ce.id===T?{...ce,fields:[...ce.fields,F]}:ce)),i.emit({action:"add_field",data:{tableId:T,field:F,fields:[...W,F]}});const K=await o.getTable({diagramId:l,id:T});if(!K)return;const ie=new Date;_(ie),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:ie}}),o.updateTable({id:T,attributes:{...K,fields:[...K.fields,F]}})]),G.updateHistory&&(c({action:"addField",redoData:{tableId:T,field:F},undoData:{tableId:T,fieldId:F.id}}),u())},[o,l,N,c,u,i,ee]),lt=h.useCallback(async T=>{var W;const F=ee(T),G={id:Ue(),name:`field_${(((W=F==null?void 0:F.fields)==null?void 0:W.length)??0)+1}`,type:b===me.SQLITE?{id:"integer",name:"integer"}:{id:"bigint",name:"bigint"},unique:!1,nullable:!0,primaryKey:!1,createdAt:Date.now()};return await De(T,G),G},[De,ee,b]),Xe=h.useCallback((T,F)=>{const G=ee(T);return(G==null?void 0:G.indexes.find(W=>W.id===F))??null},[ee]),Ye=h.useCallback(async(T,F,G={updateHistory:!0})=>{N(ie=>ie.map(Z=>Z.id===T?{...Z,indexes:[...Z.indexes,F]}:Z));const W=await o.getTable({diagramId:l,id:T});if(!W)return;const K=new Date;_(K),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:K}}),o.updateTable({id:T,attributes:{...W,indexes:[...W.indexes,F]}})]),G.updateHistory&&(c({action:"addIndex",redoData:{tableId:T,index:F},undoData:{tableId:T,indexId:F.id}}),u())},[o,l,N,c,u]),dt=h.useCallback(async(T,F,G={updateHistory:!0})=>{const W=Xe(T,F);N(Z=>Z.map(ue=>ue.id===T?{...ue,indexes:ue.indexes.filter(ce=>ce.id!==F)}:ue));const K=await o.getTable({diagramId:l,id:T});if(!K)return;const ie=new Date;_(ie),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:ie}}),o.updateTable({id:T,attributes:{...K,indexes:K.indexes.filter(Z=>Z.id!==F)}})]),W&&G.updateHistory&&(c({action:"removeIndex",redoData:{indexId:F,tableId:T},undoData:{tableId:T,index:W}}),u())},[o,l,N,c,u,Xe]),zt=h.useCallback(async T=>{var W;const F=ee(T),G={id:Ue(),name:`index_${(((W=F==null?void 0:F.indexes)==null?void 0:W.length)??0)+1}`,fieldIds:[],unique:!1,createdAt:Date.now()};return await Ye(T,G),G},[Ye,ee]),ft=h.useCallback(async(T,F,G,W={updateHistory:!0})=>{const K=Xe(T,F);N(ue=>ue.map(ce=>ce.id===T?{...ce,indexes:ce.indexes.map(we=>we.id===F?{...we,...G}:we)}:ce));const ie=await o.getTable({diagramId:l,id:T});if(!ie)return;const Z=new Date;_(Z),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:Z}}),o.updateTable({id:T,attributes:{...ie,indexes:ie.indexes.map(ue=>ue.id===F?{...ue,...G}:ue)}})]),K&&W.updateHistory&&(c({action:"updateIndex",redoData:{tableId:T,indexId:F,index:G},undoData:{tableId:T,indexId:F,index:K}}),u())},[o,l,N,c,u,Xe]),We=h.useCallback(async(T,F={updateHistory:!0})=>{D(W=>[...W,...T]);const G=new Date;_(G),await Promise.all([...T.map(W=>o.addRelationship({diagramId:l,relationship:W})),o.updateDiagram({id:l,attributes:{updatedAt:G}})]),F.updateHistory&&(c({action:"addRelationships",redoData:{relationships:T},undoData:{relationshipIds:T.map(W=>W.id)}}),u())},[o,l,D,c,u]),et=h.useCallback(async(T,F={updateHistory:!0})=>We([T],F),[We]),$r=h.useCallback(async({sourceTableId:T,targetTableId:F,sourceFieldId:G,targetFieldId:W})=>{const K=ee(T),ie=(K==null?void 0:K.name)??"",Z=K==null?void 0:K.fields.find(we=>we.id===G),ue=(Z==null?void 0:Z.name)??"",ce={id:Ue(),name:`${ie}_${ue}_fk`,sourceSchema:K==null?void 0:K.schema,sourceTableId:T,targetSchema:K==null?void 0:K.schema,targetTableId:F,sourceFieldId:G,targetFieldId:W,sourceCardinality:"one",targetCardinality:"one",createdAt:Date.now()};return await et(ce),ce},[et,ee]),ht=h.useCallback(T=>R.find(F=>F.id===T)??null,[R]),Bt=h.useCallback(async(T,F={updateHistory:!0})=>{const G=[...R.filter(K=>T.includes(K.id))];D(K=>K.filter(ie=>!T.includes(ie.id)));const W=new Date;_(W),await Promise.all([...T.map(K=>o.deleteRelationship({diagramId:l,id:K})),o.updateDiagram({id:l,attributes:{updatedAt:W}})]),G.length>0&&F.updateHistory&&(c({action:"removeRelationships",redoData:{relationshipsIds:T},undoData:{relationships:G}}),u())},[o,l,D,R,c,u]),Lr=h.useCallback(async(T,F={updateHistory:!0})=>Bt([T],F),[Bt]),Or=h.useCallback(async(T,F,G={updateHistory:!0})=>{const W=ht(T);D(ie=>ie.map(Z=>Z.id===T?{...Z,...F}:Z));const K=new Date;_(K),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:K}}),o.updateRelationship({id:T,attributes:F})]),W&&G.updateHistory&&(c({action:"updateRelationship",redoData:{relationshipId:T,relationship:F},undoData:{relationshipId:T,relationship:W}}),u())},[o,D,c,ht,u,l]),Vt=h.useCallback(async(T,F={updateHistory:!0})=>{L(W=>[...W,...T]);const G=new Date;_(G),await Promise.all([...T.map(W=>o.addDependency({diagramId:l,dependency:W})),o.updateDiagram({id:l,attributes:{updatedAt:G}})]),F.updateHistory&&(c({action:"addDependencies",redoData:{dependencies:T},undoData:{dependenciesIds:T.map(W=>W.id)}}),u())},[o,l,L,c,u]),Xt=h.useCallback(async(T,F={updateHistory:!0})=>Vt([T],F),[Vt]),Fr=h.useCallback(async({tableId:T,dependentTableId:F})=>{const G=ee(T),W=ee(F),K={id:Ue(),tableId:T,dependentTableId:F,dependentSchema:W==null?void 0:W.schema,schema:G==null?void 0:G.schema,createdAt:Date.now()};return await Xt(K),K},[Xt,ee]),Yt=h.useCallback(T=>$.find(F=>F.id===T)??null,[$]),Wt=h.useCallback(async(T,F={updateHistory:!0})=>{const G=[...$.filter(K=>T.includes(K.id))];L(K=>K.filter(ie=>!T.includes(ie.id)));const W=new Date;_(W),await Promise.all([...T.map(K=>o.deleteDependency({diagramId:l,id:K})),o.updateDiagram({id:l,attributes:{updatedAt:W}})]),G.length>0&&F.updateHistory&&(c({action:"removeDependencies",redoData:{dependenciesIds:T},undoData:{dependencies:G}}),u())},[o,l,L,c,u,$]),Hr=h.useCallback(async(T,F={updateHistory:!0})=>Wt([T],F),[Wt]),zr=h.useCallback(async(T,F,G={updateHistory:!0})=>{const W=Yt(T);L(ie=>ie.map(Z=>Z.id===T?{...Z,...F}:Z));const K=new Date;_(K),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:K}}),o.updateDependency({id:T,attributes:F})]),W&&G.updateHistory&&(c({action:"updateDependency",redoData:{dependencyId:T,dependency:F},undoData:{dependencyId:T,dependency:W}}),u())},[o,l,L,c,u,Yt]),Gt=h.useCallback(async T=>{f(T.id),p(T.name),x(T.databaseType),j(T.databaseEdition),N((T==null?void 0:T.tables)??[]),D((T==null?void 0:T.relationships)??[]),L((T==null?void 0:T.dependencies)??[]),w(T.createdAt),_(T.updatedAt),i.emit({action:"load_diagram",data:{diagram:T}})},[f,p,x,j,N,D,L,w,_,i]),Br=h.useCallback(async T=>{const F=await o.getDiagram(T,{includeRelationships:!0,includeTables:!0,includeDependencies:!0});return F&&Gt(F),F},[o,Gt]);return g.jsx(za.Provider,{value:{diagramId:l,diagramName:m,databaseType:b,tables:E,relationships:R,dependencies:$,currentDiagram:O,schemas:I,filteredSchemas:k,events:i,readonly:S,filterSchemas:A,updateDiagramId:q,updateDiagramName:J,loadDiagram:Br,loadDiagramFromData:Gt,updateDatabaseType:B,updateDatabaseEdition:U,clearDiagramData:z,deleteDiagram:V,updateDiagramUpdatedAt:te,createTable:se,addTable:Q,addTables:Y,getTable:ee,removeTable:ae,removeTables:re,updateTable:fe,updateTablesState:ye,updateField:ct,removeField:ut,createField:lt,addField:De,addIndex:Ye,createIndex:zt,removeIndex:dt,getField:ve,getIndex:Xe,updateIndex:ft,addRelationship:et,addRelationships:We,createRelationship:$r,getRelationship:ht,removeRelationship:Lr,removeRelationships:Bt,updateRelationship:Or,addDependency:Xt,addDependencies:Vt,createDependency:Fr,getDependency:Yt,removeDependency:Hr,removeDependencies:Wt,updateDependency:zr},children:e})};function xe(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=xe(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var ng={value:()=>{}};function Cr(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Zn(n)}function Zn(e){this._=e}function rg(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Zn.prototype=Cr.prototype={constructor:Zn,on:function(e,t){var n=this._,r=rg(e+"",n),o,i=-1,s=r.length;if(arguments.length<2){for(;++i<s;)if((o=(e=r[i]).type)&&(o=og(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<s;)if(o=(e=r[i]).type)n[o]=Ui(n[o],e.name,t);else if(t==null)for(o in n)n[o]=Ui(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Zn(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,i;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};function og(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function Ui(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=ng,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var To="http://www.w3.org/1999/xhtml";const Ki={svg:"http://www.w3.org/2000/svg",xhtml:To,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _r(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Ki.hasOwnProperty(t)?{space:Ki[t],local:e}:e}function ig(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===To&&t.documentElement.namespaceURI===To?t.createElement(e):t.createElementNS(n,e)}}function sg(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function eu(e){var t=_r(e);return(t.local?sg:ig)(t)}function ag(){}function ci(e){return e==null?ag:function(){return this.querySelector(e)}}function cg(e){typeof e!="function"&&(e=ci(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,a=r[o]=new Array(s),c,u,d=0;d<s;++d)(c=i[d])&&(u=e.call(c,c.__data__,d,i))&&("__data__"in c&&(u.__data__=c.__data__),a[d]=u);return new Re(r,this._parents)}function ug(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function lg(){return[]}function tu(e){return e==null?lg:function(){return this.querySelectorAll(e)}}function dg(e){return function(){return ug(e.apply(this,arguments))}}function fg(e){typeof e=="function"?e=dg(e):e=tu(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var s=t[i],a=s.length,c,u=0;u<a;++u)(c=s[u])&&(r.push(e.call(c,c.__data__,u,s)),o.push(c));return new Re(r,o)}function nu(e){return function(){return this.matches(e)}}function ru(e){return function(t){return t.matches(e)}}var hg=Array.prototype.find;function mg(e){return function(){return hg.call(this.children,e)}}function pg(){return this.firstElementChild}function gg(e){return this.select(e==null?pg:mg(typeof e=="function"?e:ru(e)))}var yg=Array.prototype.filter;function xg(){return Array.from(this.children)}function vg(e){return function(){return yg.call(this.children,e)}}function wg(e){return this.selectAll(e==null?xg:vg(typeof e=="function"?e:ru(e)))}function bg(e){typeof e!="function"&&(e=nu(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,a=r[o]=[],c,u=0;u<s;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&a.push(c);return new Re(r,this._parents)}function ou(e){return new Array(e.length)}function Cg(){return new Re(this._enter||this._groups.map(ou),this._parents)}function ir(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ir.prototype={constructor:ir,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function _g(e){return function(){return e}}function Eg(e,t,n,r,o,i){for(var s=0,a,c=t.length,u=i.length;s<u;++s)(a=t[s])?(a.__data__=i[s],r[s]=a):n[s]=new ir(e,i[s]);for(;s<c;++s)(a=t[s])&&(o[s]=a)}function Sg(e,t,n,r,o,i,s){var a,c,u=new Map,d=t.length,l=i.length,f=new Array(d),m;for(a=0;a<d;++a)(c=t[a])&&(f[a]=m=s.call(c,c.__data__,a,t)+"",u.has(m)?o[a]=c:u.set(m,c));for(a=0;a<l;++a)m=s.call(e,i[a],a,i)+"",(c=u.get(m))?(r[a]=c,c.__data__=i[a],u.delete(m)):n[a]=new ir(e,i[a]);for(a=0;a<d;++a)(c=t[a])&&u.get(f[a])===c&&(o[a]=c)}function Mg(e){return e.__data__}function Ng(e,t){if(!arguments.length)return Array.from(this,Mg);var n=t?Sg:Eg,r=this._parents,o=this._groups;typeof e!="function"&&(e=_g(e));for(var i=o.length,s=new Array(i),a=new Array(i),c=new Array(i),u=0;u<i;++u){var d=r[u],l=o[u],f=l.length,m=kg(e.call(d,d&&d.__data__,u,r)),p=m.length,y=a[u]=new Array(p),w=s[u]=new Array(p),v=c[u]=new Array(f);n(d,l,y,w,v,m,t);for(var _=0,b=0,x,M;_<p;++_)if(x=y[_]){for(_>=b&&(b=_+1);!(M=w[b])&&++b<p;);x._next=M||null}}return s=new Re(s,r),s._enter=a,s._exit=c,s}function kg(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Tg(){return new Re(this._exit||this._groups.map(ou),this._parents)}function Rg(e,t,n){var r=this.enter(),o=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?i.remove():n(i),r&&o?r.merge(o).order():o}function Dg(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,s=Math.min(o,i),a=new Array(o),c=0;c<s;++c)for(var u=n[c],d=r[c],l=u.length,f=a[c]=new Array(l),m,p=0;p<l;++p)(m=u[p]||d[p])&&(f[p]=m);for(;c<o;++c)a[c]=n[c];return new Re(a,this._parents)}function Ig(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,i=r[o],s;--o>=0;)(s=r[o])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function Ag(e){e||(e=Pg);function t(l,f){return l&&f?e(l.__data__,f.__data__):!l-!f}for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var s=n[i],a=s.length,c=o[i]=new Array(a),u,d=0;d<a;++d)(u=s[d])&&(c[d]=u);c.sort(t)}return new Re(o,this._parents).order()}function Pg(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function jg(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function $g(){return Array.from(this)}function Lg(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var s=r[o];if(s)return s}return null}function Og(){let e=0;for(const t of this)++e;return e}function Fg(){return!this.node()}function Hg(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],i=0,s=o.length,a;i<s;++i)(a=o[i])&&e.call(a,a.__data__,i,o);return this}function zg(e){return function(){this.removeAttribute(e)}}function Bg(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Vg(e,t){return function(){this.setAttribute(e,t)}}function Xg(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Yg(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Wg(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Gg(e,t){var n=_r(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Bg:zg:typeof t=="function"?n.local?Wg:Yg:n.local?Xg:Vg)(n,t))}function iu(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ug(e){return function(){this.style.removeProperty(e)}}function Kg(e,t,n){return function(){this.style.setProperty(e,t,n)}}function qg(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Zg(e,t,n){return arguments.length>1?this.each((t==null?Ug:typeof t=="function"?qg:Kg)(e,t,n??"")):jt(this.node(),e)}function jt(e,t){return e.style.getPropertyValue(t)||iu(e).getComputedStyle(e,null).getPropertyValue(t)}function Qg(e){return function(){delete this[e]}}function Jg(e,t){return function(){this[e]=t}}function e0(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function t0(e,t){return arguments.length>1?this.each((t==null?Qg:typeof t=="function"?e0:Jg)(e,t)):this.node()[e]}function su(e){return e.trim().split(/^|\s+/)}function ui(e){return e.classList||new au(e)}function au(e){this._node=e,this._names=su(e.getAttribute("class")||"")}au.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function cu(e,t){for(var n=ui(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function uu(e,t){for(var n=ui(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function n0(e){return function(){cu(this,e)}}function r0(e){return function(){uu(this,e)}}function o0(e,t){return function(){(t.apply(this,arguments)?cu:uu)(this,e)}}function i0(e,t){var n=su(e+"");if(arguments.length<2){for(var r=ui(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?o0:t?n0:r0)(n,t))}function s0(){this.textContent=""}function a0(e){return function(){this.textContent=e}}function c0(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function u0(e){return arguments.length?this.each(e==null?s0:(typeof e=="function"?c0:a0)(e)):this.node().textContent}function l0(){this.innerHTML=""}function d0(e){return function(){this.innerHTML=e}}function f0(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function h0(e){return arguments.length?this.each(e==null?l0:(typeof e=="function"?f0:d0)(e)):this.node().innerHTML}function m0(){this.nextSibling&&this.parentNode.appendChild(this)}function p0(){return this.each(m0)}function g0(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function y0(){return this.each(g0)}function x0(e){var t=typeof e=="function"?e:eu(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function v0(){return null}function w0(e,t){var n=typeof e=="function"?e:eu(e),r=t==null?v0:typeof t=="function"?t:ci(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function b0(){var e=this.parentNode;e&&e.removeChild(this)}function C0(){return this.each(b0)}function _0(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function E0(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function S0(e){return this.select(e?E0:_0)}function M0(e){return arguments.length?this.property("__data__",e):this.node().__data__}function N0(e){return function(t){e.call(this,t,this.__data__)}}function k0(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function T0(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,i;n<o;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function R0(e,t,n){return function(){var r=this.__on,o,i=N0(t);if(r){for(var s=0,a=r.length;s<a;++s)if((o=r[s]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),o.value=t;return}}this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function D0(e,t,n){var r=k0(e+""),o,i=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,u=a.length,d;c<u;++c)for(o=0,d=a[c];o<i;++o)if((s=r[o]).type===d.type&&s.name===d.name)return d.value}return}for(a=t?R0:T0,o=0;o<i;++o)this.each(a(r[o],t,n));return this}function lu(e,t,n){var r=iu(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function I0(e,t){return function(){return lu(this,e,t)}}function A0(e,t){return function(){return lu(this,e,t.apply(this,arguments))}}function P0(e,t){return this.each((typeof t=="function"?A0:I0)(e,t))}function*j0(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length,s;o<i;++o)(s=r[o])&&(yield s)}var du=[null];function Re(e,t){this._groups=e,this._parents=t}function Mn(){return new Re([[document.documentElement]],du)}function $0(){return this}Re.prototype=Mn.prototype={constructor:Re,select:cg,selectAll:fg,selectChild:gg,selectChildren:wg,filter:bg,data:Ng,enter:Cg,exit:Tg,join:Rg,merge:Dg,selection:$0,order:Ig,sort:Ag,call:jg,nodes:$g,node:Lg,size:Og,empty:Fg,each:Hg,attr:Gg,style:Zg,property:t0,classed:i0,text:u0,html:h0,raise:p0,lower:y0,append:x0,insert:w0,remove:C0,clone:S0,datum:M0,on:D0,dispatch:P0,[Symbol.iterator]:j0};function ke(e){return typeof e=="string"?new Re([[document.querySelector(e)]],[document.documentElement]):new Re([[e]],du)}function L0(e){let t;for(;t=e.sourceEvent;)e=t;return e}function je(e,t){if(e=L0(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const O0={passive:!1},fn={capture:!0,passive:!1};function no(e){e.stopImmediatePropagation()}function Rt(e){e.preventDefault(),e.stopImmediatePropagation()}function fu(e){var t=e.document.documentElement,n=ke(e).on("dragstart.drag",Rt,fn);"onselectstart"in t?n.on("selectstart.drag",Rt,fn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function hu(e,t){var n=e.document.documentElement,r=ke(e).on("dragstart.drag",null);t&&(r.on("click.drag",Rt,fn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const jn=e=>()=>e;function Ro(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:i,x:s,y:a,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}Ro.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function F0(e){return!e.ctrlKey&&!e.button}function H0(){return this.parentNode}function z0(e,t){return t??{x:e.x,y:e.y}}function B0(){return navigator.maxTouchPoints||"ontouchstart"in this}function mu(){var e=F0,t=H0,n=z0,r=B0,o={},i=Cr("start","drag","end"),s=0,a,c,u,d,l=0;function f(x){x.on("mousedown.drag",m).filter(r).on("touchstart.drag",w).on("touchmove.drag",v,O0).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(x,M){if(!(d||!e.call(this,x,M))){var j=b(this,t.call(this,x,M),x,M,"mouse");j&&(ke(x.view).on("mousemove.drag",p,fn).on("mouseup.drag",y,fn),fu(x.view),no(x),u=!1,a=x.clientX,c=x.clientY,j("start",x))}}function p(x){if(Rt(x),!u){var M=x.clientX-a,j=x.clientY-c;u=M*M+j*j>l}o.mouse("drag",x)}function y(x){ke(x.view).on("mousemove.drag mouseup.drag",null),hu(x.view,u),Rt(x),o.mouse("end",x)}function w(x,M){if(e.call(this,x,M)){var j=x.changedTouches,E=t.call(this,x,M),N=j.length,R,D;for(R=0;R<N;++R)(D=b(this,E,x,M,j[R].identifier,j[R]))&&(no(x),D("start",x,j[R]))}}function v(x){var M=x.changedTouches,j=M.length,E,N;for(E=0;E<j;++E)(N=o[M[E].identifier])&&(Rt(x),N("drag",x,M[E]))}function _(x){var M=x.changedTouches,j=M.length,E,N;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),E=0;E<j;++E)(N=o[M[E].identifier])&&(no(x),N("end",x,M[E]))}function b(x,M,j,E,N,R){var D=i.copy(),$=je(R||j,M),L,H,C;if((C=n.call(x,new Ro("beforestart",{sourceEvent:j,target:f,identifier:N,active:s,x:$[0],y:$[1],dx:0,dy:0,dispatch:D}),E))!=null)return L=C.x-$[0]||0,H=C.y-$[1]||0,function P(S,I,A){var k=$,O;switch(S){case"start":o[N]=P,O=s++;break;case"end":delete o[N],--s;case"drag":$=je(A||I,M),O=s;break}D.call(S,x,new Ro(S,{sourceEvent:I,subject:C,target:f,identifier:N,active:O,x:$[0]+L,y:$[1]+H,dx:$[0]-k[0],dy:$[1]-k[1],dispatch:D}),E)}}return f.filter=function(x){return arguments.length?(e=typeof x=="function"?x:jn(!!x),f):e},f.container=function(x){return arguments.length?(t=typeof x=="function"?x:jn(x),f):t},f.subject=function(x){return arguments.length?(n=typeof x=="function"?x:jn(x),f):n},f.touchable=function(x){return arguments.length?(r=typeof x=="function"?x:jn(!!x),f):r},f.on=function(){var x=i.on.apply(i,arguments);return x===i?f:x},f.clickDistance=function(x){return arguments.length?(l=(x=+x)*x,f):Math.sqrt(l)},f}function li(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function pu(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Nn(){}var hn=.7,sr=1/hn,Dt="\\s*([+-]?\\d+)\\s*",mn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",He="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",V0=/^#([0-9a-f]{3,8})$/,X0=new RegExp(`^rgb\\(${Dt},${Dt},${Dt}\\)$`),Y0=new RegExp(`^rgb\\(${He},${He},${He}\\)$`),W0=new RegExp(`^rgba\\(${Dt},${Dt},${Dt},${mn}\\)$`),G0=new RegExp(`^rgba\\(${He},${He},${He},${mn}\\)$`),U0=new RegExp(`^hsl\\(${mn},${He},${He}\\)$`),K0=new RegExp(`^hsla\\(${mn},${He},${He},${mn}\\)$`),qi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};li(Nn,pn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Zi,formatHex:Zi,formatHex8:q0,formatHsl:Z0,formatRgb:Qi,toString:Qi});function Zi(){return this.rgb().formatHex()}function q0(){return this.rgb().formatHex8()}function Z0(){return gu(this).formatHsl()}function Qi(){return this.rgb().formatRgb()}function pn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=V0.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Ji(t):n===3?new Ne(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?$n(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?$n(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=X0.exec(e))?new Ne(t[1],t[2],t[3],1):(t=Y0.exec(e))?new Ne(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=W0.exec(e))?$n(t[1],t[2],t[3],t[4]):(t=G0.exec(e))?$n(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=U0.exec(e))?ns(t[1],t[2]/100,t[3]/100,1):(t=K0.exec(e))?ns(t[1],t[2]/100,t[3]/100,t[4]):qi.hasOwnProperty(e)?Ji(qi[e]):e==="transparent"?new Ne(NaN,NaN,NaN,0):null}function Ji(e){return new Ne(e>>16&255,e>>8&255,e&255,1)}function $n(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ne(e,t,n,r)}function Q0(e){return e instanceof Nn||(e=pn(e)),e?(e=e.rgb(),new Ne(e.r,e.g,e.b,e.opacity)):new Ne}function Do(e,t,n,r){return arguments.length===1?Q0(e):new Ne(e,t,n,r??1)}function Ne(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}li(Ne,Do,pu(Nn,{brighter(e){return e=e==null?sr:Math.pow(sr,e),new Ne(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?hn:Math.pow(hn,e),new Ne(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ne(yt(this.r),yt(this.g),yt(this.b),ar(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:es,formatHex:es,formatHex8:J0,formatRgb:ts,toString:ts}));function es(){return`#${pt(this.r)}${pt(this.g)}${pt(this.b)}`}function J0(){return`#${pt(this.r)}${pt(this.g)}${pt(this.b)}${pt((isNaN(this.opacity)?1:this.opacity)*255)}`}function ts(){const e=ar(this.opacity);return`${e===1?"rgb(":"rgba("}${yt(this.r)}, ${yt(this.g)}, ${yt(this.b)}${e===1?")":`, ${e})`}`}function ar(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function yt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function pt(e){return e=yt(e),(e<16?"0":"")+e.toString(16)}function ns(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new $e(e,t,n,r)}function gu(e){if(e instanceof $e)return new $e(e.h,e.s,e.l,e.opacity);if(e instanceof Nn||(e=pn(e)),!e)return new $e;if(e instanceof $e)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),s=NaN,a=i-o,c=(i+o)/2;return a?(t===i?s=(n-r)/a+(n<r)*6:n===i?s=(r-t)/a+2:s=(t-n)/a+4,a/=c<.5?i+o:2-i-o,s*=60):a=c>0&&c<1?0:s,new $e(s,a,c,e.opacity)}function ey(e,t,n,r){return arguments.length===1?gu(e):new $e(e,t,n,r??1)}function $e(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}li($e,ey,pu(Nn,{brighter(e){return e=e==null?sr:Math.pow(sr,e),new $e(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?hn:Math.pow(hn,e),new $e(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Ne(ro(e>=240?e-240:e+120,o,r),ro(e,o,r),ro(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new $e(rs(this.h),Ln(this.s),Ln(this.l),ar(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ar(this.opacity);return`${e===1?"hsl(":"hsla("}${rs(this.h)}, ${Ln(this.s)*100}%, ${Ln(this.l)*100}%${e===1?")":`, ${e})`}`}}));function rs(e){return e=(e||0)%360,e<0?e+360:e}function Ln(e){return Math.max(0,Math.min(1,e||0))}function ro(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const yu=e=>()=>e;function ty(e,t){return function(n){return e+n*t}}function ny(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function ry(e){return(e=+e)==1?xu:function(t,n){return n-t?ny(t,n,e):yu(isNaN(t)?n:t)}}function xu(e,t){var n=t-e;return n?ty(e,n):yu(isNaN(e)?t:e)}const os=function e(t){var n=ry(t);function r(o,i){var s=n((o=Do(o)).r,(i=Do(i)).r),a=n(o.g,i.g),c=n(o.b,i.b),u=xu(o.opacity,i.opacity);return function(d){return o.r=s(d),o.g=a(d),o.b=c(d),o.opacity=u(d),o+""}}return r.gamma=e,r}(1);function ot(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Io=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,oo=new RegExp(Io.source,"g");function oy(e){return function(){return e}}function iy(e){return function(t){return e(t)+""}}function sy(e,t){var n=Io.lastIndex=oo.lastIndex=0,r,o,i,s=-1,a=[],c=[];for(e=e+"",t=t+"";(r=Io.exec(e))&&(o=oo.exec(t));)(i=o.index)>n&&(i=t.slice(n,i),a[s]?a[s]+=i:a[++s]=i),(r=r[0])===(o=o[0])?a[s]?a[s]+=o:a[++s]=o:(a[++s]=null,c.push({i:s,x:ot(r,o)})),n=oo.lastIndex;return n<t.length&&(i=t.slice(n),a[s]?a[s]+=i:a[++s]=i),a.length<2?c[0]?iy(c[0].x):oy(t):(t=c.length,function(u){for(var d=0,l;d<t;++d)a[(l=c[d]).i]=l.x(u);return a.join("")})}var is=180/Math.PI,Ao={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function vu(e,t,n,r,o,i){var s,a,c;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),e*r<t*n&&(e=-e,t=-t,c=-c,s=-s),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*is,skewX:Math.atan(c)*is,scaleX:s,scaleY:a}}var On;function ay(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ao:vu(t.a,t.b,t.c,t.d,t.e,t.f)}function cy(e){return e==null||(On||(On=document.createElementNS("http://www.w3.org/2000/svg","g")),On.setAttribute("transform",e),!(e=On.transform.baseVal.consolidate()))?Ao:(e=e.matrix,vu(e.a,e.b,e.c,e.d,e.e,e.f))}function wu(e,t,n,r){function o(u){return u.length?u.pop()+" ":""}function i(u,d,l,f,m,p){if(u!==l||d!==f){var y=m.push("translate(",null,t,null,n);p.push({i:y-4,x:ot(u,l)},{i:y-2,x:ot(d,f)})}else(l||f)&&m.push("translate("+l+t+f+n)}function s(u,d,l,f){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),f.push({i:l.push(o(l)+"rotate(",null,r)-2,x:ot(u,d)})):d&&l.push(o(l)+"rotate("+d+r)}function a(u,d,l,f){u!==d?f.push({i:l.push(o(l)+"skewX(",null,r)-2,x:ot(u,d)}):d&&l.push(o(l)+"skewX("+d+r)}function c(u,d,l,f,m,p){if(u!==l||d!==f){var y=m.push(o(m)+"scale(",null,",",null,")");p.push({i:y-4,x:ot(u,l)},{i:y-2,x:ot(d,f)})}else(l!==1||f!==1)&&m.push(o(m)+"scale("+l+","+f+")")}return function(u,d){var l=[],f=[];return u=e(u),d=e(d),i(u.translateX,u.translateY,d.translateX,d.translateY,l,f),s(u.rotate,d.rotate,l,f),a(u.skewX,d.skewX,l,f),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,l,f),u=d=null,function(m){for(var p=-1,y=f.length,w;++p<y;)l[(w=f[p]).i]=w.x(m);return l.join("")}}}var uy=wu(ay,"px, ","px)","deg)"),ly=wu(cy,", ",")",")"),dy=1e-12;function ss(e){return((e=Math.exp(e))+1/e)/2}function fy(e){return((e=Math.exp(e))-1/e)/2}function hy(e){return((e=Math.exp(2*e))-1)/(e+1)}const my=function e(t,n,r){function o(i,s){var a=i[0],c=i[1],u=i[2],d=s[0],l=s[1],f=s[2],m=d-a,p=l-c,y=m*m+p*p,w,v;if(y<dy)v=Math.log(f/u)/t,w=function(E){return[a+E*m,c+E*p,u*Math.exp(t*E*v)]};else{var _=Math.sqrt(y),b=(f*f-u*u+r*y)/(2*u*n*_),x=(f*f-u*u-r*y)/(2*f*n*_),M=Math.log(Math.sqrt(b*b+1)-b),j=Math.log(Math.sqrt(x*x+1)-x);v=(j-M)/t,w=function(E){var N=E*v,R=ss(M),D=u/(n*_)*(R*hy(t*N+M)-fy(M));return[a+D*m,c+D*p,u*R/ss(t*N+M)]}}return w.duration=v*1e3*t/Math.SQRT2,w}return o.rho=function(i){var s=Math.max(.001,+i),a=s*s,c=a*a;return e(s,a,c)},o}(Math.SQRT2,2,4);var $t=0,tn=0,Kt=0,bu=1e3,cr,nn,ur=0,vt=0,Er=0,gn=typeof performance=="object"&&performance.now?performance:Date,Cu=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function di(){return vt||(Cu(py),vt=gn.now()+Er)}function py(){vt=0}function lr(){this._call=this._time=this._next=null}lr.prototype=_u.prototype={constructor:lr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?di():+n)+(t==null?0:+t),!this._next&&nn!==this&&(nn?nn._next=this:cr=this,nn=this),this._call=e,this._time=n,Po()},stop:function(){this._call&&(this._call=null,this._time=1/0,Po())}};function _u(e,t,n){var r=new lr;return r.restart(e,t,n),r}function gy(){di(),++$t;for(var e=cr,t;e;)(t=vt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--$t}function as(){vt=(ur=gn.now())+Er,$t=tn=0;try{gy()}finally{$t=0,xy(),vt=0}}function yy(){var e=gn.now(),t=e-ur;t>bu&&(Er-=t,ur=e)}function xy(){for(var e,t=cr,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:cr=n);nn=e,Po(r)}function Po(e){if(!$t){tn&&(tn=clearTimeout(tn));var t=e-vt;t>24?(e<1/0&&(tn=setTimeout(as,e-gn.now()-Er)),Kt&&(Kt=clearInterval(Kt))):(Kt||(ur=gn.now(),Kt=setInterval(yy,bu)),$t=1,Cu(as))}}function cs(e,t,n){var r=new lr;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var vy=Cr("start","end","cancel","interrupt"),wy=[],Eu=0,us=1,jo=2,Qn=3,ls=4,$o=5,Jn=6;function Sr(e,t,n,r,o,i){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;by(e,n,{name:t,index:r,group:o,on:vy,tween:wy,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Eu})}function fi(e,t){var n=Fe(e,t);if(n.state>Eu)throw new Error("too late; already scheduled");return n}function Ve(e,t){var n=Fe(e,t);if(n.state>Qn)throw new Error("too late; already running");return n}function Fe(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function by(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=_u(i,0,n.time);function i(u){n.state=us,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var d,l,f,m;if(n.state!==us)return c();for(d in r)if(m=r[d],m.name===n.name){if(m.state===Qn)return cs(s);m.state===ls?(m.state=Jn,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete r[d]):+d<t&&(m.state=Jn,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete r[d])}if(cs(function(){n.state===Qn&&(n.state=ls,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=jo,n.on.call("start",e,e.__data__,n.index,n.group),n.state===jo){for(n.state=Qn,o=new Array(f=n.tween.length),d=0,l=-1;d<f;++d)(m=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(o[++l]=m);o.length=l+1}}function a(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=$o,1),l=-1,f=o.length;++l<f;)o[l].call(e,d);n.state===$o&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=Jn,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function er(e,t){var n=e.__transition,r,o,i=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){i=!1;continue}o=r.state>jo&&r.state<$o,r.state=Jn,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}i&&delete e.__transition}}function Cy(e){return this.each(function(){er(this,e)})}function _y(e,t){var n,r;return function(){var o=Ve(this,e),i=o.tween;if(i!==n){r=n=i;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}o.tween=r}}function Ey(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var i=Ve(this,e),s=i.tween;if(s!==r){o=(r=s).slice();for(var a={name:t,value:n},c=0,u=o.length;c<u;++c)if(o[c].name===t){o[c]=a;break}c===u&&o.push(a)}i.tween=o}}function Sy(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Fe(this.node(),n).tween,o=0,i=r.length,s;o<i;++o)if((s=r[o]).name===e)return s.value;return null}return this.each((t==null?_y:Ey)(n,e,t))}function hi(e,t,n){var r=e._id;return e.each(function(){var o=Ve(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return Fe(o,r).value[t]}}function Su(e,t){var n;return(typeof t=="number"?ot:t instanceof pn?os:(n=pn(t))?(t=n,os):sy)(e,t)}function My(e){return function(){this.removeAttribute(e)}}function Ny(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ky(e,t,n){var r,o=n+"",i;return function(){var s=this.getAttribute(e);return s===o?null:s===r?i:i=t(r=s,n)}}function Ty(e,t,n){var r,o=n+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===r?i:i=t(r=s,n)}}function Ry(e,t,n){var r,o,i;return function(){var s,a=n(this),c;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),c=a+"",s===c?null:s===r&&c===o?i:(o=c,i=t(r=s,a)))}}function Dy(e,t,n){var r,o,i;return function(){var s,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),c=a+"",s===c?null:s===r&&c===o?i:(o=c,i=t(r=s,a)))}}function Iy(e,t){var n=_r(e),r=n==="transform"?ly:Su;return this.attrTween(e,typeof t=="function"?(n.local?Dy:Ry)(n,r,hi(this,"attr."+e,t)):t==null?(n.local?Ny:My)(n):(n.local?Ty:ky)(n,r,t))}function Ay(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Py(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function jy(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Py(e,i)),n}return o._value=t,o}function $y(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Ay(e,i)),n}return o._value=t,o}function Ly(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=_r(e);return this.tween(n,(r.local?jy:$y)(r,t))}function Oy(e,t){return function(){fi(this,e).delay=+t.apply(this,arguments)}}function Fy(e,t){return t=+t,function(){fi(this,e).delay=t}}function Hy(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Oy:Fy)(t,e)):Fe(this.node(),t).delay}function zy(e,t){return function(){Ve(this,e).duration=+t.apply(this,arguments)}}function By(e,t){return t=+t,function(){Ve(this,e).duration=t}}function Vy(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?zy:By)(t,e)):Fe(this.node(),t).duration}function Xy(e,t){if(typeof t!="function")throw new Error;return function(){Ve(this,e).ease=t}}function Yy(e){var t=this._id;return arguments.length?this.each(Xy(t,e)):Fe(this.node(),t).ease}function Wy(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ve(this,e).ease=n}}function Gy(e){if(typeof e!="function")throw new Error;return this.each(Wy(this._id,e))}function Uy(e){typeof e!="function"&&(e=nu(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,a=r[o]=[],c,u=0;u<s;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&a.push(c);return new Ze(r,this._parents,this._name,this._id)}function Ky(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),s=new Array(r),a=0;a<i;++a)for(var c=t[a],u=n[a],d=c.length,l=s[a]=new Array(d),f,m=0;m<d;++m)(f=c[m]||u[m])&&(l[m]=f);for(;a<r;++a)s[a]=t[a];return new Ze(s,this._parents,this._name,this._id)}function qy(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Zy(e,t,n){var r,o,i=qy(t)?fi:Ve;return function(){var s=i(this,e),a=s.on;a!==r&&(o=(r=a).copy()).on(t,n),s.on=o}}function Qy(e,t){var n=this._id;return arguments.length<2?Fe(this.node(),n).on.on(e):this.each(Zy(n,e,t))}function Jy(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function ex(){return this.on("end.remove",Jy(this._id))}function tx(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ci(e));for(var r=this._groups,o=r.length,i=new Array(o),s=0;s<o;++s)for(var a=r[s],c=a.length,u=i[s]=new Array(c),d,l,f=0;f<c;++f)(d=a[f])&&(l=e.call(d,d.__data__,f,a))&&("__data__"in d&&(l.__data__=d.__data__),u[f]=l,Sr(u[f],t,n,f,u,Fe(d,n)));return new Ze(i,this._parents,t,n)}function nx(e){var t=this._name,n=this._id;typeof e!="function"&&(e=tu(e));for(var r=this._groups,o=r.length,i=[],s=[],a=0;a<o;++a)for(var c=r[a],u=c.length,d,l=0;l<u;++l)if(d=c[l]){for(var f=e.call(d,d.__data__,l,c),m,p=Fe(d,n),y=0,w=f.length;y<w;++y)(m=f[y])&&Sr(m,t,n,y,f,p);i.push(f),s.push(d)}return new Ze(i,s,t,n)}var rx=Mn.prototype.constructor;function ox(){return new rx(this._groups,this._parents)}function ix(e,t){var n,r,o;return function(){var i=jt(this,e),s=(this.style.removeProperty(e),jt(this,e));return i===s?null:i===n&&s===r?o:o=t(n=i,r=s)}}function Mu(e){return function(){this.style.removeProperty(e)}}function sx(e,t,n){var r,o=n+"",i;return function(){var s=jt(this,e);return s===o?null:s===r?i:i=t(r=s,n)}}function ax(e,t,n){var r,o,i;return function(){var s=jt(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),jt(this,e))),s===c?null:s===r&&c===o?i:(o=c,i=t(r=s,a))}}function cx(e,t){var n,r,o,i="style."+t,s="end."+i,a;return function(){var c=Ve(this,e),u=c.on,d=c.value[i]==null?a||(a=Mu(t)):void 0;(u!==n||o!==d)&&(r=(n=u).copy()).on(s,o=d),c.on=r}}function ux(e,t,n){var r=(e+="")=="transform"?uy:Su;return t==null?this.styleTween(e,ix(e,r)).on("end.style."+e,Mu(e)):typeof t=="function"?this.styleTween(e,ax(e,r,hi(this,"style."+e,t))).each(cx(this._id,e)):this.styleTween(e,sx(e,r,t),n).on("end.style."+e,null)}function lx(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function dx(e,t,n){var r,o;function i(){var s=t.apply(this,arguments);return s!==o&&(r=(o=s)&&lx(e,s,n)),r}return i._value=t,i}function fx(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,dx(e,t,n??""))}function hx(e){return function(){this.textContent=e}}function mx(e){return function(){var t=e(this);this.textContent=t??""}}function px(e){return this.tween("text",typeof e=="function"?mx(hi(this,"text",e)):hx(e==null?"":e+""))}function gx(e){return function(t){this.textContent=e.call(this,t)}}function yx(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&gx(o)),t}return r._value=e,r}function xx(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,yx(e))}function vx(){for(var e=this._name,t=this._id,n=Nu(),r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],a=s.length,c,u=0;u<a;++u)if(c=s[u]){var d=Fe(c,t);Sr(c,e,n,u,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Ze(r,this._parents,e,n)}function wx(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,s){var a={value:s},c={value:function(){--o===0&&i()}};n.each(function(){var u=Ve(this,r),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),u.on=t}),o===0&&i()})}var bx=0;function Ze(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Nu(){return++bx}var Ge=Mn.prototype;Ze.prototype={constructor:Ze,select:tx,selectAll:nx,selectChild:Ge.selectChild,selectChildren:Ge.selectChildren,filter:Uy,merge:Ky,selection:ox,transition:vx,call:Ge.call,nodes:Ge.nodes,node:Ge.node,size:Ge.size,empty:Ge.empty,each:Ge.each,on:Qy,attr:Iy,attrTween:Ly,style:ux,styleTween:fx,text:px,textTween:xx,remove:ex,tween:Sy,delay:Hy,duration:Vy,ease:Yy,easeVarying:Gy,end:wx,[Symbol.iterator]:Ge[Symbol.iterator]};function Cx(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var _x={time:null,delay:0,duration:250,ease:Cx};function Ex(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Sx(e){var t,n;e instanceof Ze?(t=e._id,e=e._name):(t=Nu(),(n=_x).time=di(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],a=s.length,c,u=0;u<a;++u)(c=s[u])&&Sr(c,e,t,u,s,n||Ex(c,t));return new Ze(r,this._parents,e,t)}Mn.prototype.interrupt=Cy;Mn.prototype.transition=Sx;const Fn=e=>()=>e;function Mx(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Ke(e,t,n){this.k=e,this.x=t,this.y=n}Ke.prototype={constructor:Ke,scale:function(e){return e===1?this:new Ke(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ke(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Mr=new Ke(1,0,0);ku.prototype=Ke.prototype;function ku(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Mr;return e.__zoom}function io(e){e.stopImmediatePropagation()}function qt(e){e.preventDefault(),e.stopImmediatePropagation()}function Nx(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function kx(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ds(){return this.__zoom||Mr}function Tx(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Rx(){return navigator.maxTouchPoints||"ontouchstart"in this}function Dx(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function Tu(){var e=Nx,t=kx,n=Dx,r=Tx,o=Rx,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,c=my,u=Cr("start","zoom","end"),d,l,f,m=500,p=150,y=0,w=10;function v(C){C.property("__zoom",ds).on("wheel.zoom",N,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",D).filter(o).on("touchstart.zoom",$).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",H).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(C,P,S,I){var A=C.selection?C.selection():C;A.property("__zoom",ds),C!==A?M(C,P,S,I):A.interrupt().each(function(){j(this,arguments).event(I).start().zoom(null,typeof P=="function"?P.apply(this,arguments):P).end()})},v.scaleBy=function(C,P,S,I){v.scaleTo(C,function(){var A=this.__zoom.k,k=typeof P=="function"?P.apply(this,arguments):P;return A*k},S,I)},v.scaleTo=function(C,P,S,I){v.transform(C,function(){var A=t.apply(this,arguments),k=this.__zoom,O=S==null?x(A):typeof S=="function"?S.apply(this,arguments):S,z=k.invert(O),V=typeof P=="function"?P.apply(this,arguments):P;return n(b(_(k,V),O,z),A,s)},S,I)},v.translateBy=function(C,P,S,I){v.transform(C,function(){return n(this.__zoom.translate(typeof P=="function"?P.apply(this,arguments):P,typeof S=="function"?S.apply(this,arguments):S),t.apply(this,arguments),s)},null,I)},v.translateTo=function(C,P,S,I,A){v.transform(C,function(){var k=t.apply(this,arguments),O=this.__zoom,z=I==null?x(k):typeof I=="function"?I.apply(this,arguments):I;return n(Mr.translate(z[0],z[1]).scale(O.k).translate(typeof P=="function"?-P.apply(this,arguments):-P,typeof S=="function"?-S.apply(this,arguments):-S),k,s)},I,A)};function _(C,P){return P=Math.max(i[0],Math.min(i[1],P)),P===C.k?C:new Ke(P,C.x,C.y)}function b(C,P,S){var I=P[0]-S[0]*C.k,A=P[1]-S[1]*C.k;return I===C.x&&A===C.y?C:new Ke(C.k,I,A)}function x(C){return[(+C[0][0]+ +C[1][0])/2,(+C[0][1]+ +C[1][1])/2]}function M(C,P,S,I){C.on("start.zoom",function(){j(this,arguments).event(I).start()}).on("interrupt.zoom end.zoom",function(){j(this,arguments).event(I).end()}).tween("zoom",function(){var A=this,k=arguments,O=j(A,k).event(I),z=t.apply(A,k),V=S==null?x(z):typeof S=="function"?S.apply(A,k):S,te=Math.max(z[1][0]-z[0][0],z[1][1]-z[0][1]),B=A.__zoom,U=typeof P=="function"?P.apply(A,k):P,q=c(B.invert(V).concat(te/B.k),U.invert(V).concat(te/U.k));return function(J){if(J===1)J=U;else{var Y=q(J),Q=te/Y[2];J=new Ke(Q,V[0]-Y[0]*Q,V[1]-Y[1]*Q)}O.zoom(null,J)}})}function j(C,P,S){return!S&&C.__zooming||new E(C,P)}function E(C,P){this.that=C,this.args=P,this.active=0,this.sourceEvent=null,this.extent=t.apply(C,P),this.taps=0}E.prototype={event:function(C){return C&&(this.sourceEvent=C),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(C,P){return this.mouse&&C!=="mouse"&&(this.mouse[1]=P.invert(this.mouse[0])),this.touch0&&C!=="touch"&&(this.touch0[1]=P.invert(this.touch0[0])),this.touch1&&C!=="touch"&&(this.touch1[1]=P.invert(this.touch1[0])),this.that.__zoom=P,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(C){var P=ke(this.that).datum();u.call(C,this.that,new Mx(C,{sourceEvent:this.sourceEvent,target:v,transform:this.that.__zoom,dispatch:u}),P)}};function N(C,...P){if(!e.apply(this,arguments))return;var S=j(this,P).event(C),I=this.__zoom,A=Math.max(i[0],Math.min(i[1],I.k*Math.pow(2,r.apply(this,arguments)))),k=je(C);if(S.wheel)(S.mouse[0][0]!==k[0]||S.mouse[0][1]!==k[1])&&(S.mouse[1]=I.invert(S.mouse[0]=k)),clearTimeout(S.wheel);else{if(I.k===A)return;S.mouse=[k,I.invert(k)],er(this),S.start()}qt(C),S.wheel=setTimeout(O,p),S.zoom("mouse",n(b(_(I,A),S.mouse[0],S.mouse[1]),S.extent,s));function O(){S.wheel=null,S.end()}}function R(C,...P){if(f||!e.apply(this,arguments))return;var S=C.currentTarget,I=j(this,P,!0).event(C),A=ke(C.view).on("mousemove.zoom",V,!0).on("mouseup.zoom",te,!0),k=je(C,S),O=C.clientX,z=C.clientY;fu(C.view),io(C),I.mouse=[k,this.__zoom.invert(k)],er(this),I.start();function V(B){if(qt(B),!I.moved){var U=B.clientX-O,q=B.clientY-z;I.moved=U*U+q*q>y}I.event(B).zoom("mouse",n(b(I.that.__zoom,I.mouse[0]=je(B,S),I.mouse[1]),I.extent,s))}function te(B){A.on("mousemove.zoom mouseup.zoom",null),hu(B.view,I.moved),qt(B),I.event(B).end()}}function D(C,...P){if(e.apply(this,arguments)){var S=this.__zoom,I=je(C.changedTouches?C.changedTouches[0]:C,this),A=S.invert(I),k=S.k*(C.shiftKey?.5:2),O=n(b(_(S,k),I,A),t.apply(this,P),s);qt(C),a>0?ke(this).transition().duration(a).call(M,O,I,C):ke(this).call(v.transform,O,I,C)}}function $(C,...P){if(e.apply(this,arguments)){var S=C.touches,I=S.length,A=j(this,P,C.changedTouches.length===I).event(C),k,O,z,V;for(io(C),O=0;O<I;++O)z=S[O],V=je(z,this),V=[V,this.__zoom.invert(V),z.identifier],A.touch0?!A.touch1&&A.touch0[2]!==V[2]&&(A.touch1=V,A.taps=0):(A.touch0=V,k=!0,A.taps=1+!!d);d&&(d=clearTimeout(d)),k&&(A.taps<2&&(l=V[0],d=setTimeout(function(){d=null},m)),er(this),A.start())}}function L(C,...P){if(this.__zooming){var S=j(this,P).event(C),I=C.changedTouches,A=I.length,k,O,z,V;for(qt(C),k=0;k<A;++k)O=I[k],z=je(O,this),S.touch0&&S.touch0[2]===O.identifier?S.touch0[0]=z:S.touch1&&S.touch1[2]===O.identifier&&(S.touch1[0]=z);if(O=S.that.__zoom,S.touch1){var te=S.touch0[0],B=S.touch0[1],U=S.touch1[0],q=S.touch1[1],J=(J=U[0]-te[0])*J+(J=U[1]-te[1])*J,Y=(Y=q[0]-B[0])*Y+(Y=q[1]-B[1])*Y;O=_(O,Math.sqrt(J/Y)),z=[(te[0]+U[0])/2,(te[1]+U[1])/2],V=[(B[0]+q[0])/2,(B[1]+q[1])/2]}else if(S.touch0)z=S.touch0[0],V=S.touch0[1];else return;S.zoom("touch",n(b(O,z,V),S.extent,s))}}function H(C,...P){if(this.__zooming){var S=j(this,P).event(C),I=C.changedTouches,A=I.length,k,O;for(io(C),f&&clearTimeout(f),f=setTimeout(function(){f=null},m),k=0;k<A;++k)O=I[k],S.touch0&&S.touch0[2]===O.identifier?delete S.touch0:S.touch1&&S.touch1[2]===O.identifier&&delete S.touch1;if(S.touch1&&!S.touch0&&(S.touch0=S.touch1,delete S.touch1),S.touch0)S.touch0[1]=this.__zoom.invert(S.touch0[0]);else if(S.end(),S.taps===2&&(O=je(O,this),Math.hypot(l[0]-O[0],l[1]-O[1])<w)){var z=ke(this).on("dblclick.zoom");z&&z.apply(this,arguments)}}}return v.wheelDelta=function(C){return arguments.length?(r=typeof C=="function"?C:Fn(+C),v):r},v.filter=function(C){return arguments.length?(e=typeof C=="function"?C:Fn(!!C),v):e},v.touchable=function(C){return arguments.length?(o=typeof C=="function"?C:Fn(!!C),v):o},v.extent=function(C){return arguments.length?(t=typeof C=="function"?C:Fn([[+C[0][0],+C[0][1]],[+C[1][0],+C[1][1]]]),v):t},v.scaleExtent=function(C){return arguments.length?(i[0]=+C[0],i[1]=+C[1],v):[i[0],i[1]]},v.translateExtent=function(C){return arguments.length?(s[0][0]=+C[0][0],s[1][0]=+C[1][0],s[0][1]=+C[0][1],s[1][1]=+C[1][1],v):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},v.constrain=function(C){return arguments.length?(n=C,v):n},v.duration=function(C){return arguments.length?(a=+C,v):a},v.interpolate=function(C){return arguments.length?(c=C,v):c},v.on=function(){var C=u.on.apply(u,arguments);return C===u?v:C},v.clickDistance=function(C){return arguments.length?(y=(C=+C)*C,v):Math.sqrt(y)},v.tapDistance=function(C){return arguments.length?(w=+C,v):w},v}const Qe={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID."},yn=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ru=["Enter"," ","Escape"];var Lt;(function(e){e.Strict="strict",e.Loose="loose"})(Lt||(Lt={}));var xt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(xt||(xt={}));var xn;(function(e){e.Partial="partial",e.Full="full"})(xn||(xn={}));const Du={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var it;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(it||(it={}));var dr;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(dr||(dr={}));var ne;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(ne||(ne={}));const fs={[ne.Left]:ne.Right,[ne.Right]:ne.Left,[ne.Top]:ne.Bottom,[ne.Bottom]:ne.Top};function Iu(e){return e===null?null:e?"valid":"invalid"}const Au=e=>"id"in e&&"source"in e&&"target"in e,Ix=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),mi=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),kn=(e,t=[0,0])=>{const{width:n,height:r}=Je(e),o=e.origin??t,i=n*o[0],s=r*o[1];return{x:e.position.x-i,y:e.position.y-s}},Ax=(e,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const i=typeof o=="string";let s=!t.nodeLookup&&!i?o:void 0;t.nodeLookup&&(s=i?t.nodeLookup.get(o):mi(o)?o:t.nodeLookup.get(o.id));const a=s?fr(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Nr(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return kr(n)},Tn=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const o=fr(r);n=Nr(n,o)}}),kr(n)},Pu=(e,t,[n,r,o]=[0,0,1],i=!1,s=!1)=>{const a={...Rn(t,[n,r,o]),width:t.width/o,height:t.height/o},c=[];for(const u of e.values()){const{measured:d,selectable:l=!0,hidden:f=!1}=u;if(s&&!l||f)continue;const m=d.width??u.width??u.initialWidth??null,p=d.height??u.height??u.initialHeight??null,y=vn(a,Ft(u)),w=(m??0)*(p??0),v=i&&y>0;(!u.internals.handleBounds||v||y>=w||u.dragging)&&c.push(u)}return c},Px=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function Lo(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(o=>o.id)):null;return e.forEach(o=>{o.measured.width&&o.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!o.hidden)&&(!r||r.has(o.id))&&n.set(o.id,o)}),n}async function Oo({nodes:e,width:t,height:n,panZoom:r,minZoom:o,maxZoom:i},s){if(e.size===0)return Promise.resolve(!1);const a=Tn(e),c=pi(a,t,n,(s==null?void 0:s.minZoom)??o,(s==null?void 0:s.maxZoom)??i,(s==null?void 0:s.padding)??.1);return await r.setViewport(c,{duration:s==null?void 0:s.duration}),Promise.resolve(!0)}function ju({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:o,onError:i}){const s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:c,y:u}=a?a.internals.positionAbsolute:{x:0,y:0},d=s.origin??r;let l=o;if(s.extent==="parent"&&!s.expandParent)if(!a)i==null||i("005",Qe.error005());else{const m=a.measured.width,p=a.measured.height;m&&p&&(l=[[c,u],[c+m,u+p]])}else a&&Ht(s.extent)&&(l=[[s.extent[0][0]+c,s.extent[0][1]+u],[s.extent[1][0]+c,s.extent[1][1]+u]]);const f=Ht(l)?wt(t,l,s.measured):t;return{position:{x:f.x-c+s.measured.width*d[0],y:f.y-u+s.measured.height*d[1]},positionAbsolute:f}}async function jx({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:o}){const i=new Set(e.map(f=>f.id)),s=[];for(const f of n){if(f.deletable===!1)continue;const m=i.has(f.id),p=!m&&f.parentId&&s.find(y=>y.id===f.parentId);(m||p)&&s.push(f)}const a=new Set(t.map(f=>f.id)),c=r.filter(f=>f.deletable!==!1),d=Px(s,c);for(const f of c)a.has(f.id)&&!d.find(p=>p.id===f.id)&&d.push(f);if(!o)return{edges:d,nodes:s};const l=await o({nodes:s,edges:d});return typeof l=="boolean"?l?{edges:d,nodes:s}:{edges:[],nodes:[]}:l}const Ot=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),wt=(e={x:0,y:0},t,n)=>({x:Ot(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Ot(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function $u(e,t,n){const{width:r,height:o}=Je(n),{x:i,y:s}=n.internals.positionAbsolute;return wt(e,[[i,s],[i+r,s+o]],t)}const hs=(e,t,n)=>e<t?Ot(Math.abs(e-t),1,t)/t:e>n?-Ot(Math.abs(e-n),1,t)/t:0,Lu=(e,t,n=15,r=40)=>{const o=hs(e.x,r,t.width-r)*n,i=hs(e.y,r,t.height-r)*n;return[o,i]},Nr=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Fo=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),kr=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Ft=(e,t=[0,0])=>{var o,i;const{x:n,y:r}=mi(e)?e.internals.positionAbsolute:kn(e,t);return{x:n,y:r,width:((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0,height:((i=e.measured)==null?void 0:i.height)??e.height??e.initialHeight??0}},fr=(e,t=[0,0])=>{var o,i;const{x:n,y:r}=mi(e)?e.internals.positionAbsolute:kn(e,t);return{x:n,y:r,x2:n+(((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0),y2:r+(((i=e.measured)==null?void 0:i.height)??e.height??e.initialHeight??0)}},Ou=(e,t)=>kr(Nr(Fo(e),Fo(t))),vn=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},ms=e=>Le(e.width)&&Le(e.height)&&Le(e.x)&&Le(e.y),Le=e=>!isNaN(e)&&isFinite(e),$x=(e,t)=>{},Tr=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Rn=({x:e,y:t},[n,r,o],i=!1,s=[1,1])=>{const a={x:(e-n)/o,y:(t-r)/o};return i?Tr(a,s):a},Fu=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),pi=(e,t,n,r,o,i)=>{const s=t/(e.width*(1+i)),a=n/(e.height*(1+i)),c=Math.min(s,a),u=Ot(c,r,o),d=e.x+e.width/2,l=e.y+e.height/2,f=t/2-d*u,m=n/2-l*u;return{x:f,y:m,zoom:u}},hr=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Ht(e){return e!==void 0&&e!=="parent"}function Je(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function Hu(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function zu(e,t={width:0,height:0},n,r,o){const i={...e},s=r.get(n);if(s){const a=s.origin||o;i.x+=s.internals.positionAbsolute.x-(t.width??0)*a[0],i.y+=s.internals.positionAbsolute.y-(t.height??0)*a[1]}return i}function ps(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function an(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:o}){const{x:i,y:s}=qe(e),a=Rn({x:i-((o==null?void 0:o.left)??0),y:s-((o==null?void 0:o.top)??0)},r),{x:c,y:u}=n?Tr(a,t):a;return{xSnapped:c,ySnapped:u,...a}}const Rr=e=>({width:e.offsetWidth,height:e.offsetHeight}),Bu=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Lx=["INPUT","SELECT","TEXTAREA"];function Ho(e){var r,o;const t=((o=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:o[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:Lx.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const Vu=e=>"clientX"in e,qe=(e,t)=>{var i,s;const n=Vu(e),r=n?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,o=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},gs=(e,t,n,r,o)=>{const i=t.querySelectorAll(`.${e}`);return!i||!i.length?null:Array.from(i).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:o,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...Rr(s)}})};function Xu({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:i,targetControlX:s,targetControlY:a}){const c=e*.125+o*.375+s*.375+n*.125,u=t*.125+i*.375+a*.375+r*.125,d=Math.abs(c-e),l=Math.abs(u-t);return[c,u,d,l]}function Hn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function ys({pos:e,x1:t,y1:n,x2:r,y2:o,c:i}){switch(e){case ne.Left:return[t-Hn(t-r,i),n];case ne.Right:return[t+Hn(r-t,i),n];case ne.Top:return[t,n-Hn(n-o,i)];case ne.Bottom:return[t,n+Hn(o-n,i)]}}function Yu({sourceX:e,sourceY:t,sourcePosition:n=ne.Bottom,targetX:r,targetY:o,targetPosition:i=ne.Top,curvature:s=.25}){const[a,c]=ys({pos:n,x1:e,y1:t,x2:r,y2:o,c:s}),[u,d]=ys({pos:i,x1:r,y1:o,x2:e,y2:t,c:s}),[l,f,m,p]=Xu({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:a,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${a},${c} ${u},${d} ${r},${o}`,l,f,m,p]}function Wu({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,i=n<e?n+o:n-o,s=Math.abs(r-t)/2,a=r<t?r+s:r-s;return[i,a,o,s]}function Ox({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:o=!1}){if(!o)return r;const i=n||t.selected||e.selected,s=Math.max(e.internals.z||0,t.internals.z||0,1e3);return r+(i?s:0)}function Fx({sourceNode:e,targetNode:t,width:n,height:r,transform:o}){const i=Nr(fr(e),fr(t));i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);const s={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:r/o[2]};return vn(s,kr(i))>0}const Hx=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,zx=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Bx=(e,t)=>{if(!e.source||!e.target)return t;let n;return Au(e)?n={...e}:n={...e,id:Hx(e)},zx(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function Gu({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,i,s,a]=Wu({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,i,s,a]}const xs={[ne.Left]:{x:-1,y:0},[ne.Right]:{x:1,y:0},[ne.Top]:{x:0,y:-1},[ne.Bottom]:{x:0,y:1}},Vx=({source:e,sourcePosition:t=ne.Bottom,target:n})=>t===ne.Left||t===ne.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},vs=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Xx({source:e,sourcePosition:t=ne.Bottom,target:n,targetPosition:r=ne.Top,center:o,offset:i}){const s=xs[t],a=xs[r],c={x:e.x+s.x*i,y:e.y+s.y*i},u={x:n.x+a.x*i,y:n.y+a.y*i},d=Vx({source:c,sourcePosition:t,target:u}),l=d.x!==0?"x":"y",f=d[l];let m=[],p,y;const w={x:0,y:0},v={x:0,y:0},[_,b,x,M]=Wu({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[l]*a[l]===-1){p=o.x??_,y=o.y??b;const E=[{x:p,y:c.y},{x:p,y:u.y}],N=[{x:c.x,y},{x:u.x,y}];s[l]===f?m=l==="x"?E:N:m=l==="x"?N:E}else{const E=[{x:c.x,y:u.y}],N=[{x:u.x,y:c.y}];if(l==="x"?m=s.x===f?N:E:m=s.y===f?E:N,t===r){const H=Math.abs(e[l]-n[l]);if(H<=i){const C=Math.min(i-1,i-H);s[l]===f?w[l]=(c[l]>e[l]?-1:1)*C:v[l]=(u[l]>n[l]?-1:1)*C}}if(t!==r){const H=l==="x"?"y":"x",C=s[l]===a[H],P=c[H]>u[H],S=c[H]<u[H];(s[l]===1&&(!C&&P||C&&S)||s[l]!==1&&(!C&&S||C&&P))&&(m=l==="x"?E:N)}const R={x:c.x+w.x,y:c.y+w.y},D={x:u.x+v.x,y:u.y+v.y},$=Math.max(Math.abs(R.x-m[0].x),Math.abs(D.x-m[0].x)),L=Math.max(Math.abs(R.y-m[0].y),Math.abs(D.y-m[0].y));$>=L?(p=(R.x+D.x)/2,y=m[0].y):(p=m[0].x,y=(R.y+D.y)/2)}return[[e,{x:c.x+w.x,y:c.y+w.y},...m,{x:u.x+v.x,y:u.y+v.y},n],p,y,x,M]}function Yx(e,t,n,r){const o=Math.min(vs(e,t)/2,vs(t,n)/2,r),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s){const u=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${i+o*u},${s}Q ${i},${s} ${i},${s+o*d}`}const a=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${i},${s+o*c}Q ${i},${s} ${i+o*a},${s}`}function zo({sourceX:e,sourceY:t,sourcePosition:n=ne.Bottom,targetX:r,targetY:o,targetPosition:i=ne.Top,borderRadius:s=5,centerX:a,centerY:c,offset:u=20}){const[d,l,f,m,p]=Xx({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:i,center:{x:a,y:c},offset:u});return[d.reduce((w,v,_)=>{let b="";return _>0&&_<d.length-1?b=Yx(d[_-1],v,d[_+1],s):b=`${_===0?"M":"L"}${v.x} ${v.y}`,w+=b,w},""),l,f,m,p]}function ws(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Wx(e){var l;const{sourceNode:t,targetNode:n}=e;if(!ws(t)||!ws(n))return null;const r=t.internals.handleBounds||bs(t.handles),o=n.internals.handleBounds||bs(n.handles),i=Cs((r==null?void 0:r.source)??[],e.sourceHandle),s=Cs(e.connectionMode===Lt.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),e.targetHandle);if(!i||!s)return(l=e.onError)==null||l.call(e,"008",Qe.error008(i?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(i==null?void 0:i.position)||ne.Bottom,c=(s==null?void 0:s.position)||ne.Top,u=wn(t,i,a),d=wn(n,s,c);return{sourceX:u.x,sourceY:u.y,targetX:d.x,targetY:d.y,sourcePosition:a,targetPosition:c}}function bs(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function wn(e,t,n=ne.Left,r=!1){const o=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,i=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:s,height:a}=t??Je(e);if(r)return{x:o+s/2,y:i+a/2};switch((t==null?void 0:t.position)??n){case ne.Top:return{x:o+s/2,y:i};case ne.Right:return{x:o+s,y:i+a/2};case ne.Bottom:return{x:o+s/2,y:i+a};case ne.Left:return{x:o,y:i+a/2}}}function Cs(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Bo(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function Gx(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:o}){const i=new Set;return e.reduce((s,a)=>([a.markerStart||r,a.markerEnd||o].forEach(c=>{if(c&&typeof c=="object"){const u=Bo(c,t);i.has(u)||(s.push({id:u,color:c.color||n,...c}),i.add(u))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))}const gi={nodeOrigin:[0,0],nodeExtent:yn,elevateNodesOnSelect:!0,defaults:{}},Ux={...gi,checkEquality:!0};function yi(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function Kx(e,t,n){const r=yi(gi,n);for(const o of e.values())if(o.parentId)xi(o,e,t,r);else{const i=kn(o,r.nodeOrigin),s=Ht(o.extent)?o.extent:r.nodeExtent,a=wt(i,s,Je(o));o.internals.positionAbsolute=a}}function Vo(e,t,n,r){var a,c;const o=yi(Ux,r),i=new Map(t),s=o!=null&&o.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const u of e){let d=i.get(u.id);if(o.checkEquality&&u===(d==null?void 0:d.internals.userNode))t.set(u.id,d);else{const l=kn(u,o.nodeOrigin),f=Ht(u.extent)?u.extent:o.nodeExtent,m=wt(l,f,Je(u));d={...o.defaults,...u,measured:{width:(a=u.measured)==null?void 0:a.width,height:(c=u.measured)==null?void 0:c.height},internals:{positionAbsolute:m,handleBounds:u.measured?d==null?void 0:d.internals.handleBounds:void 0,z:Uu(u,s),userNode:u}},t.set(u.id,d)}u.parentId&&xi(d,t,n,r)}}function qx(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function xi(e,t,n,r){const{elevateNodesOnSelect:o,nodeOrigin:i,nodeExtent:s}=yi(gi,r),a=e.parentId,c=t.get(a);if(!c){console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}qx(e,n);const u=o?1e3:0,{x:d,y:l,z:f}=Zx(e,c,i,s,u),{positionAbsolute:m}=e.internals,p=d!==m.x||l!==m.y;(p||f!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:p?{x:d,y:l}:m,z:f}})}function Uu(e,t){return(Le(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Zx(e,t,n,r,o){const{x:i,y:s}=t.internals.positionAbsolute,a=Je(e),c=kn(e,n),u=Ht(e.extent)?wt(c,e.extent,a):c;let d=wt({x:i+u.x,y:s+u.y},r,a);e.extent==="parent"&&(d=$u(d,a,t));const l=Uu(e,o),f=t.internals.z??0;return{x:d.x,y:d.y,z:f>l?f:l}}function vi(e,t,n,r=[0,0]){var s;const o=[],i=new Map;for(const a of e){const c=t.get(a.parentId);if(!c)continue;const u=((s=i.get(a.parentId))==null?void 0:s.expandedRect)??Ft(c),d=Ou(u,a.rect);i.set(a.parentId,{expandedRect:d,parent:c})}return i.size>0&&i.forEach(({expandedRect:a,parent:c},u)=>{var b;const d=c.internals.positionAbsolute,l=Je(c),f=c.origin??r,m=a.x<d.x?Math.round(Math.abs(d.x-a.x)):0,p=a.y<d.y?Math.round(Math.abs(d.y-a.y)):0,y=Math.max(l.width,Math.round(a.width)),w=Math.max(l.height,Math.round(a.height)),v=(y-l.width)*f[0],_=(w-l.height)*f[1];(m>0||p>0||v||_)&&(o.push({id:u,type:"position",position:{x:c.position.x-m+v,y:c.position.y-p+_}}),(b=n.get(u))==null||b.forEach(x=>{e.some(M=>M.id===x.id)||o.push({id:x.id,type:"position",position:{x:x.position.x+m,y:x.position.y+p}})})),(l.width<a.width||l.height<a.height||m||p)&&o.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:y+(m?f[0]*m-v:0),height:w+(p?f[1]*p-_:0)}})}),o}function Qx(e,t,n,r,o,i){const s=r==null?void 0:r.querySelector(".xyflow__viewport");let a=!1;if(!s)return{changes:[],updatedInternals:a};const c=[],u=window.getComputedStyle(s),{m22:d}=new window.DOMMatrixReadOnly(u.transform),l=[];for(const f of e.values()){const m=t.get(f.id);if(!m)continue;if(m.hidden){t.set(m.id,{...m,internals:{...m.internals,handleBounds:void 0}}),a=!0;continue}const p=Rr(f.nodeElement),y=m.measured.width!==p.width||m.measured.height!==p.height;if(!!(p.width&&p.height&&(y||!m.internals.handleBounds||f.force))){const v=f.nodeElement.getBoundingClientRect(),_=Ht(m.extent)?m.extent:i;let{positionAbsolute:b}=m.internals;m.parentId&&m.extent==="parent"?b=$u(b,p,t.get(m.parentId)):_&&(b=wt(b,_,p));const x={...m,measured:p,internals:{...m.internals,positionAbsolute:b,handleBounds:{source:gs("source",f.nodeElement,v,d,m.id),target:gs("target",f.nodeElement,v,d,m.id)}}};t.set(m.id,x),m.parentId&&xi(x,t,n,{nodeOrigin:o}),a=!0,y&&(c.push({id:m.id,type:"dimensions",dimensions:p}),m.expandParent&&m.parentId&&l.push({id:m.id,parentId:m.parentId,rect:Ft(x,o)}))}}if(l.length>0){const f=vi(l,t,n,o);c.push(...f)}return{changes:c,updatedInternals:a}}async function Jx({delta:e,panZoom:t,transform:n,translateExtent:r,width:o,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,i]],r),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}function _s(e,t,n,r,o,i){let s=o;const a=r.get(s)||new Map;r.set(s,a.set(n,t)),s=`${o}-${e}`;const c=r.get(s)||new Map;if(r.set(s,c.set(n,t)),i){s=`${o}-${e}-${i}`;const u=r.get(s)||new Map;r.set(s,u.set(n,t))}}function Ku(e,t,n){e.clear(),t.clear();for(const r of n){const{source:o,target:i,sourceHandle:s=null,targetHandle:a=null}=r,c={edgeId:r.id,source:o,target:i,sourceHandle:s,targetHandle:a},u=`${o}-${s}--${i}-${a}`,d=`${i}-${a}--${o}-${s}`;_s("source",c,d,e,o,s),_s("target",c,u,e,i,a),t.set(r.id,r)}}function qu(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:qu(n,t):!1}function Es(e,t,n){var o;let r=e;do{if((o=r==null?void 0:r.matches)!=null&&o.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function ev(e,t,n,r){const o=new Map;for(const[i,s]of e)if((s.selected||s.id===r)&&(!s.parentId||!qu(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const a=e.get(i);a&&o.set(i,{id:i,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return o}function so({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var s,a,c;const o=[];for(const[u,d]of t){const l=(s=n.get(u))==null?void 0:s.internals.userNode;l&&o.push({...l,position:d.position,dragging:r})}if(!e)return[o[0],o];const i=(a=n.get(e))==null?void 0:a.internals.userNode;return[i?{...i,position:((c=t.get(e))==null?void 0:c.position)||i.position,dragging:r}:o[0],o]}function tv({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:o}){let i={x:null,y:null},s=0,a=new Map,c=!1,u={x:0,y:0},d=null,l=!1,f=null,m=!1;function p({noDragClassName:w,handleSelector:v,domNode:_,isSelectable:b,nodeId:x,nodeClickDistance:M=0}){f=ke(_);function j({x:D,y:$},L){const{nodeLookup:H,nodeExtent:C,snapGrid:P,snapToGrid:S,nodeOrigin:I,onNodeDrag:A,onSelectionDrag:k,onError:O,updateNodePositions:z}=t();i={x:D,y:$};let V=!1,te={x:0,y:0,x2:0,y2:0};if(a.size>1&&C){const B=Tn(a);te=Fo(B)}for(const[B,U]of a){if(!H.has(B))continue;let q={x:D-U.distance.x,y:$-U.distance.y};S&&(q=Tr(q,P));let J=[[C[0][0],C[0][1]],[C[1][0],C[1][1]]];if(a.size>1&&C&&!U.extent){const{positionAbsolute:se}=U.internals,ee=se.x-te.x+C[0][0],re=se.x+U.measured.width-te.x2+C[1][0],ae=se.y-te.y+C[0][1],fe=se.y+U.measured.height-te.y2+C[1][1];J=[[ee,ae],[re,fe]]}const{position:Y,positionAbsolute:Q}=ju({nodeId:B,nextPosition:q,nodeLookup:H,nodeExtent:J,nodeOrigin:I,onError:O});V=V||U.position.x!==Y.x||U.position.y!==Y.y,U.position=Y,U.internals.positionAbsolute=Q}if(V&&(z(a,!0),L&&(r||A||!x&&k))){const[B,U]=so({nodeId:x,dragItems:a,nodeLookup:H});r==null||r(L,a,B,U),A==null||A(L,B,U),x||k==null||k(L,U)}}async function E(){if(!d)return;const{transform:D,panBy:$,autoPanSpeed:L}=t(),[H,C]=Lu(u,d,L);(H!==0||C!==0)&&(i.x=(i.x??0)-H/D[2],i.y=(i.y??0)-C/D[2],await $({x:H,y:C})&&j(i,null)),s=requestAnimationFrame(E)}function N(D){var V;const{nodeLookup:$,multiSelectionActive:L,nodesDraggable:H,transform:C,snapGrid:P,snapToGrid:S,selectNodesOnDrag:I,onNodeDragStart:A,onSelectionDragStart:k,unselectNodesAndEdges:O}=t();l=!0,(!I||!b)&&!L&&x&&((V=$.get(x))!=null&&V.selected||O()),b&&I&&x&&(e==null||e(x));const z=an(D.sourceEvent,{transform:C,snapGrid:P,snapToGrid:S,containerBounds:d});if(i=z,a=ev($,H,z,x),a.size>0&&(n||A||!x&&k)){const[te,B]=so({nodeId:x,dragItems:a,nodeLookup:$});n==null||n(D.sourceEvent,a,te,B),A==null||A(D.sourceEvent,te,B),x||k==null||k(D.sourceEvent,B)}}const R=mu().clickDistance(M).on("start",D=>{const{domNode:$,nodeDragThreshold:L,transform:H,snapGrid:C,snapToGrid:P}=t();d=($==null?void 0:$.getBoundingClientRect())||null,m=!1,L===0&&N(D),i=an(D.sourceEvent,{transform:H,snapGrid:C,snapToGrid:P,containerBounds:d}),u=qe(D.sourceEvent,d)}).on("drag",D=>{const{autoPanOnNodeDrag:$,transform:L,snapGrid:H,snapToGrid:C,nodeDragThreshold:P,nodeLookup:S}=t(),I=an(D.sourceEvent,{transform:L,snapGrid:H,snapToGrid:C,containerBounds:d});if((D.sourceEvent.type==="touchmove"&&D.sourceEvent.touches.length>1||x&&!S.has(x))&&(m=!0),!m){if(!c&&$&&l&&(c=!0,E()),!l){const A=I.xSnapped-(i.x??0),k=I.ySnapped-(i.y??0);Math.sqrt(A*A+k*k)>P&&N(D)}(i.x!==I.xSnapped||i.y!==I.ySnapped)&&a&&l&&(u=qe(D.sourceEvent,d),j(I,D.sourceEvent))}}).on("end",D=>{if(!(!l||m)&&(c=!1,l=!1,cancelAnimationFrame(s),a.size>0)){const{nodeLookup:$,updateNodePositions:L,onNodeDragStop:H,onSelectionDragStop:C}=t();if(L(a,!1),o||H||!x&&C){const[P,S]=so({nodeId:x,dragItems:a,nodeLookup:$,dragging:!1});o==null||o(D.sourceEvent,a,P,S),H==null||H(D.sourceEvent,P,S),x||C==null||C(D.sourceEvent,S)}}}).filter(D=>{const $=D.target;return!D.button&&(!w||!Es($,`.${w}`,_))&&(!v||Es($,v,_))});f.call(R)}function y(){f==null||f.on(".drag",null)}return{update:p,destroy:y}}function nv(e,t,n){const r=[],o={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const i of t.values())vn(o,Ft(i))>0&&r.push(i);return r}const rv=250;function ov(e,t,n,r){var a,c;let o=[],i=1/0;const s=nv(e,n,t+rv);for(const u of s){const d=[...((a=u.internals.handleBounds)==null?void 0:a.source)??[],...((c=u.internals.handleBounds)==null?void 0:c.target)??[]];for(const l of d){if(r.nodeId===l.nodeId&&r.type===l.type&&r.id===l.id)continue;const{x:f,y:m}=wn(u,l,l.position,!0),p=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(m-e.y,2));p>t||(p<i?(o=[{...l,x:f,y:m}],i=p):p===i&&o.push({...l,x:f,y:m}))}}if(!o.length)return null;if(o.length>1){const u=r.type==="source"?"target":"source";return o.find(d=>d.type===u)??o[0]}return o[0]}function Zu(e,t,n,r,o,i=!1){var u,d,l;const s=r.get(e);if(!s)return null;const a=o==="strict"?(u=s.internals.handleBounds)==null?void 0:u[t]:[...((d=s.internals.handleBounds)==null?void 0:d.source)??[],...((l=s.internals.handleBounds)==null?void 0:l.target)??[]],c=(n?a==null?void 0:a.find(f=>f.id===n):a==null?void 0:a[0])??null;return c&&i?{...c,...wn(s,c,c.position,!0)}:c}function Qu(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function iv(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const Ju=()=>!0;function sv(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:o,edgeUpdaterType:i,isTarget:s,domNode:a,nodeLookup:c,lib:u,autoPanOnConnect:d,flowId:l,panBy:f,cancelConnection:m,onConnectStart:p,onConnect:y,onConnectEnd:w,isValidConnection:v=Ju,onReconnectEnd:_,updateConnection:b,getTransform:x,getFromHandle:M,autoPanSpeed:j}){const E=Bu(e.target);let N=0,R;const{x:D,y:$}=qe(e),L=E==null?void 0:E.elementFromPoint(D,$),H=Qu(i,L),C=a==null?void 0:a.getBoundingClientRect();if(!C||!H)return;const P=Zu(o,H,r,c,t);if(!P)return;let S=qe(e,C),I=!1,A=null,k=!1,O=null;function z(){if(!d||!C)return;const[Q,se]=Lu(S,C,j);f({x:Q,y:se}),N=requestAnimationFrame(z)}const V={...P,nodeId:o,type:H,position:P.position},te=c.get(o),U={inProgress:!0,isValid:null,from:wn(te,V,ne.Left,!0),fromHandle:V,fromPosition:V.position,fromNode:te,to:S,toHandle:null,toPosition:fs[V.position],toNode:null};b(U);let q=U;p==null||p(e,{nodeId:o,handleId:r,handleType:H});function J(Q){if(!M()||!V){Y(Q);return}const se=x();S=qe(Q,C),R=ov(Rn(S,se,!1,[1,1]),n,c,V),I||(z(),I=!0);const ee=el(Q,{handle:R,connectionMode:t,fromNodeId:o,fromHandleId:r,fromType:s?"target":"source",isValidConnection:v,doc:E,lib:u,flowId:l,nodeLookup:c});O=ee.handleDomNode,A=ee.connection,k=iv(!!R,ee.isValid);const re={...q,isValid:k,to:R&&k?Fu({x:R.x,y:R.y},se):S,toHandle:ee.toHandle,toPosition:k&&ee.toHandle?ee.toHandle.position:fs[V.position],toNode:ee.toHandle?c.get(ee.toHandle.nodeId):null};k&&R&&q.toHandle&&re.toHandle&&q.toHandle.type===re.toHandle.type&&q.toHandle.nodeId===re.toHandle.nodeId&&q.toHandle.id===re.toHandle.id&&q.to.x===re.to.x&&q.to.y===re.to.y||(b(re),q=re)}function Y(Q){(R||O)&&A&&k&&(y==null||y(A));const{inProgress:se,...ee}=q,re={...ee,toPosition:q.toHandle?q.toPosition:null};w==null||w(Q,re),i&&(_==null||_(Q,re)),m(),cancelAnimationFrame(N),I=!1,k=!1,A=null,O=null,E.removeEventListener("mousemove",J),E.removeEventListener("mouseup",Y),E.removeEventListener("touchmove",J),E.removeEventListener("touchend",Y)}E.addEventListener("mousemove",J),E.addEventListener("mouseup",Y),E.addEventListener("touchmove",J),E.addEventListener("touchend",Y)}function el(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:o,fromType:i,doc:s,lib:a,flowId:c,isValidConnection:u=Ju,nodeLookup:d}){const l=i==="target",f=t?s.querySelector(`.${a}-flow__handle[data-id="${c}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:m,y:p}=qe(e),y=s.elementFromPoint(m,p),w=y!=null&&y.classList.contains(`${a}-flow__handle`)?y:f,v={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){const _=Qu(void 0,w),b=w.getAttribute("data-nodeid"),x=w.getAttribute("data-handleid"),M=w.classList.contains("connectable"),j=w.classList.contains("connectableend");if(!b||!_)return v;const E={source:l?b:r,sourceHandle:l?x:o,target:l?r:b,targetHandle:l?o:x};v.connection=E;const R=M&&j&&(n===Lt.Strict?l&&_==="source"||!l&&_==="target":b!==r||x!==o);v.isValid=R&&u(E),v.toHandle=Zu(b,_,x,d,n,!1)}return v}const Xo={onPointerDown:sv,isValid:el};function av({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const o=ke(e);function i({translateExtent:a,width:c,height:u,zoomStep:d=10,pannable:l=!0,zoomable:f=!0,inversePan:m=!1}){const p=b=>{const x=n();if(b.sourceEvent.type!=="wheel"||!t)return;const M=-b.sourceEvent.deltaY*(b.sourceEvent.deltaMode===1?.05:b.sourceEvent.deltaMode?1:.002)*d,j=x[2]*Math.pow(2,M);t.scaleTo(j)};let y=[0,0];const w=b=>{(b.sourceEvent.type==="mousedown"||b.sourceEvent.type==="touchstart")&&(y=[b.sourceEvent.clientX??b.sourceEvent.touches[0].clientX,b.sourceEvent.clientY??b.sourceEvent.touches[0].clientY])},v=b=>{const x=n();if(b.sourceEvent.type!=="mousemove"&&b.sourceEvent.type!=="touchmove"||!t)return;const M=[b.sourceEvent.clientX??b.sourceEvent.touches[0].clientX,b.sourceEvent.clientY??b.sourceEvent.touches[0].clientY],j=[M[0]-y[0],M[1]-y[1]];y=M;const E=r()*Math.max(x[2],Math.log(x[2]))*(m?-1:1),N={x:x[0]-j[0]*E,y:x[1]-j[1]*E},R=[[0,0],[c,u]];t.setViewportConstrained({x:N.x,y:N.y,zoom:x[2]},R,a)},_=Tu().on("start",w).on("zoom",l?v:null).on("zoom.wheel",f?p:null);o.call(_,{})}function s(){o.on("zoom",null)}return{update:i,destroy:s,pointer:je}}const cv=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Dr=e=>({x:e.x,y:e.y,zoom:e.k}),ao=({x:e,y:t,zoom:n})=>Mr.translate(e,t).scale(n),Mt=(e,t)=>e.target.closest(`.${t}`),tl=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),co=(e,t=0,n=()=>{})=>{const r=typeof t=="number"&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},nl=e=>{const t=e.ctrlKey&&hr()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function uv({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:o,panOnScrollSpeed:i,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:c,onPanZoomEnd:u}){return d=>{if(Mt(d,t))return!1;d.preventDefault(),d.stopImmediatePropagation();const l=n.property("__zoom").k||1;if(d.ctrlKey&&s){const w=je(d),v=nl(d),_=l*Math.pow(2,v);r.scaleTo(n,_,w,d);return}const f=d.deltaMode===1?20:1;let m=o===xt.Vertical?0:d.deltaX*f,p=o===xt.Horizontal?0:d.deltaY*f;!hr()&&d.shiftKey&&o!==xt.Vertical&&(m=d.deltaY*f,p=0),r.translateBy(n,-(m/l)*i,-(p/l)*i,{internal:!0});const y=Dr(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,a==null||a(d,y)),e.isPanScrolling&&(c==null||c(d,y),e.panScrollTimeout=setTimeout(()=>{u==null||u(d,y),e.isPanScrolling=!1},150))}}function lv({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,o){if(!t&&r.type==="wheel"&&!r.ctrlKey||Mt(r,e))return null;r.preventDefault(),n.call(this,r,o)}}function dv({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var i,s,a;if((i=r.sourceEvent)!=null&&i.internal)return;const o=Dr(r.transform);e.mouseButton=((s=r.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=o,((a=r.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,o))}}function fv({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:o}){return i=>{var s,a;e.usedRightMouseButton=!!(n&&tl(t,e.mouseButton??0)),(s=i.sourceEvent)!=null&&s.sync||r([i.transform.x,i.transform.y,i.transform.k]),o&&!((a=i.sourceEvent)!=null&&a.internal)&&(o==null||o(i.sourceEvent,Dr(i.transform)))}}function hv({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:o,onPaneContextMenu:i}){return s=>{var a;if(!((a=s.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,i&&tl(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&i(s.sourceEvent),e.usedRightMouseButton=!1,r(!1),o&&cv(e.prevViewport,s.transform))){const c=Dr(s.transform);e.prevViewport=c,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o==null||o(s.sourceEvent,c)},n?150:0)}}}function mv({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:o,zoomOnDoubleClick:i,userSelectionActive:s,noWheelClassName:a,noPanClassName:c,lib:u}){return d=>{var p;const l=e||t,f=n&&d.ctrlKey;if(d.button===1&&d.type==="mousedown"&&(Mt(d,`${u}-flow__node`)||Mt(d,`${u}-flow__edge`)))return!0;if(!r&&!l&&!o&&!i&&!n||s||Mt(d,a)&&d.type==="wheel"||Mt(d,c)&&(d.type!=="wheel"||o&&d.type==="wheel"&&!e)||!n&&d.ctrlKey&&d.type==="wheel")return!1;if(!n&&d.type==="touchstart"&&((p=d.touches)==null?void 0:p.length)>1)return d.preventDefault(),!1;if(!l&&!o&&!f&&d.type==="wheel"||!r&&(d.type==="mousedown"||d.type==="touchstart")||Array.isArray(r)&&!r.includes(d.button)&&d.type==="mousedown")return!1;const m=Array.isArray(r)&&r.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||d.type==="wheel")&&m}}function pv({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:o,viewport:i,onPanZoom:s,onPanZoomStart:a,onPanZoomEnd:c,onDraggingChange:u}){const d={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},l=e.getBoundingClientRect(),f=Tu().clickDistance(!Le(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(o),m=ke(e).call(f);b({x:i.x,y:i.y,zoom:Ot(i.zoom,t,n)},[[0,0],[l.width,l.height]],o);const p=m.on("wheel.zoom"),y=m.on("dblclick.zoom");f.wheelDelta(nl);function w(L,H){return m?new Promise(C=>{f==null||f.transform(co(m,H==null?void 0:H.duration,()=>C(!0)),L)}):Promise.resolve(!1)}function v({noWheelClassName:L,noPanClassName:H,onPaneContextMenu:C,userSelectionActive:P,panOnScroll:S,panOnDrag:I,panOnScrollMode:A,panOnScrollSpeed:k,preventScrolling:O,zoomOnPinch:z,zoomOnScroll:V,zoomOnDoubleClick:te,zoomActivationKeyPressed:B,lib:U,onTransformChange:q}){P&&!d.isZoomingOrPanning&&_();const Y=S&&!B&&!P?uv({zoomPanValues:d,noWheelClassName:L,d3Selection:m,d3Zoom:f,panOnScrollMode:A,panOnScrollSpeed:k,zoomOnPinch:z,onPanZoomStart:a,onPanZoom:s,onPanZoomEnd:c}):lv({noWheelClassName:L,preventScrolling:O,d3ZoomHandler:p});if(m.on("wheel.zoom",Y,{passive:!1}),!P){const se=dv({zoomPanValues:d,onDraggingChange:u,onPanZoomStart:a});f.on("start",se);const ee=fv({zoomPanValues:d,panOnDrag:I,onPaneContextMenu:!!C,onPanZoom:s,onTransformChange:q});f.on("zoom",ee);const re=hv({zoomPanValues:d,panOnDrag:I,panOnScroll:S,onPaneContextMenu:C,onPanZoomEnd:c,onDraggingChange:u});f.on("end",re)}const Q=mv({zoomActivationKeyPressed:B,panOnDrag:I,zoomOnScroll:V,panOnScroll:S,zoomOnDoubleClick:te,zoomOnPinch:z,userSelectionActive:P,noPanClassName:H,noWheelClassName:L,lib:U});f.filter(Q),te?m.on("dblclick.zoom",y):m.on("dblclick.zoom",null)}function _(){f.on("zoom",null)}async function b(L,H,C){const P=ao(L),S=f==null?void 0:f.constrain()(P,H,C);return S&&await w(S),new Promise(I=>I(S))}async function x(L,H){const C=ao(L);return await w(C,H),new Promise(P=>P(C))}function M(L){if(m){const H=ao(L),C=m.property("__zoom");(C.k!==L.zoom||C.x!==L.x||C.y!==L.y)&&(f==null||f.transform(m,H,null,{sync:!0}))}}function j(){const L=m?ku(m.node()):{x:0,y:0,k:1};return{x:L.x,y:L.y,zoom:L.k}}function E(L,H){return m?new Promise(C=>{f==null||f.scaleTo(co(m,H==null?void 0:H.duration,()=>C(!0)),L)}):Promise.resolve(!1)}function N(L,H){return m?new Promise(C=>{f==null||f.scaleBy(co(m,H==null?void 0:H.duration,()=>C(!0)),L)}):Promise.resolve(!1)}function R(L){f==null||f.scaleExtent(L)}function D(L){f==null||f.translateExtent(L)}function $(L){const H=!Le(L)||L<0?0:L;f==null||f.clickDistance(H)}return{update:v,destroy:_,setViewport:x,setViewportConstrained:b,getViewport:j,scaleTo:E,scaleBy:N,setScaleExtent:R,setTranslateExtent:D,syncViewport:M,setClickDistance:$}}var It;(function(e){e.Line="line",e.Handle="handle"})(It||(It={}));const gv=["top-left","top-right","bottom-left","bottom-right"],yv=["top","right","bottom","left"];function xv({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:o,affectsY:i}){const s=e-t,a=n-r,c=[s>0?1:s<0?-1:0,a>0?1:a<0?-1:0];return s&&o&&(c[0]=c[0]*-1),a&&i&&(c[1]=c[1]*-1),c}function vv(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),o=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:o}}function tt(e,t){return Math.max(0,t-e)}function nt(e,t){return Math.max(0,e-t)}function zn(e,t,n){return Math.max(0,t-e,e-n)}function Ss(e,t){return e?!t:t}function wv(e,t,n,r,o,i,s,a){let{affectsX:c,affectsY:u}=t;const{isHorizontal:d,isVertical:l}=t,f=d&&l,{xSnapped:m,ySnapped:p}=n,{minWidth:y,maxWidth:w,minHeight:v,maxHeight:_}=r,{x:b,y:x,width:M,height:j,aspectRatio:E}=e;let N=Math.floor(d?m-e.pointerX:0),R=Math.floor(l?p-e.pointerY:0);const D=M+(c?-N:N),$=j+(u?-R:R),L=-i[0]*M,H=-i[1]*j;let C=zn(D,y,w),P=zn($,v,_);if(s){let A=0,k=0;c&&N<0?A=tt(b+N+L,s[0][0]):!c&&N>0&&(A=nt(b+D+L,s[1][0])),u&&R<0?k=tt(x+R+H,s[0][1]):!u&&R>0&&(k=nt(x+$+H,s[1][1])),C=Math.max(C,A),P=Math.max(P,k)}if(a){let A=0,k=0;c&&N>0?A=nt(b+N,a[0][0]):!c&&N<0&&(A=tt(b+D,a[1][0])),u&&R>0?k=nt(x+R,a[0][1]):!u&&R<0&&(k=tt(x+$,a[1][1])),C=Math.max(C,A),P=Math.max(P,k)}if(o){if(d){const A=zn(D/E,v,_)*E;if(C=Math.max(C,A),s){let k=0;!c&&!u||c&&!u&&f?k=nt(x+H+D/E,s[1][1])*E:k=tt(x+H+(c?N:-N)/E,s[0][1])*E,C=Math.max(C,k)}if(a){let k=0;!c&&!u||c&&!u&&f?k=tt(x+D/E,a[1][1])*E:k=nt(x+(c?N:-N)/E,a[0][1])*E,C=Math.max(C,k)}}if(l){const A=zn($*E,y,w)/E;if(P=Math.max(P,A),s){let k=0;!c&&!u||u&&!c&&f?k=nt(b+$*E+L,s[1][0])/E:k=tt(b+(u?R:-R)*E+L,s[0][0])/E,P=Math.max(P,k)}if(a){let k=0;!c&&!u||u&&!c&&f?k=tt(b+$*E,a[1][0])/E:k=nt(b+(u?R:-R)*E,a[0][0])/E,P=Math.max(P,k)}}}R=R+(R<0?P:-P),N=N+(N<0?C:-C),o&&(f?D>$*E?R=(Ss(c,u)?-N:N)/E:N=(Ss(c,u)?-R:R)*E:d?(R=N/E,u=c):(N=R*E,c=u));const S=c?b+N:b,I=u?x+R:x;return{width:M+(c?-N:N),height:j+(u?-R:R),x:i[0]*N*(c?-1:1)+S,y:i[1]*R*(u?-1:1)+I}}const rl={width:0,height:0,x:0,y:0},bv={...rl,pointerX:0,pointerY:0,aspectRatio:1};function Cv(e){return[[0,0],[e.measured.width,e.measured.height]]}function _v(e,t,n){const r=t.position.x+e.position.x,o=t.position.y+e.position.y,i=e.measured.width??0,s=e.measured.height??0,a=n[0]*i,c=n[1]*s;return[[r-a,o-c],[r+i-a,o+s-c]]}function Ev({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:o}){const i=ke(e);function s({controlPosition:c,boundaries:u,keepAspectRatio:d,onResizeStart:l,onResize:f,onResizeEnd:m,shouldResize:p}){let y={...rl},w={...bv};const v=vv(c);let _,b=null,x=[],M,j,E;const N=mu().on("start",R=>{const{nodeLookup:D,transform:$,snapGrid:L,snapToGrid:H,nodeOrigin:C,paneDomNode:P}=n();if(_=D.get(t),!_)return;b=(P==null?void 0:P.getBoundingClientRect())??null;const{xSnapped:S,ySnapped:I}=an(R.sourceEvent,{transform:$,snapGrid:L,snapToGrid:H,containerBounds:b});y={width:_.measured.width??0,height:_.measured.height??0,x:_.position.x??0,y:_.position.y??0},w={...y,pointerX:S,pointerY:I,aspectRatio:y.width/y.height},M=void 0,_.parentId&&(_.extent==="parent"||_.expandParent)&&(M=D.get(_.parentId),j=M&&_.extent==="parent"?Cv(M):void 0),x=[],E=void 0;for(const[A,k]of D)if(k.parentId===t&&(x.push({id:A,position:{...k.position},extent:k.extent}),k.extent==="parent"||k.expandParent)){const O=_v(k,_,k.origin??C);E?E=[[Math.min(O[0][0],E[0][0]),Math.min(O[0][1],E[0][1])],[Math.max(O[1][0],E[1][0]),Math.max(O[1][1],E[1][1])]]:E=O}l==null||l(R,{...y})}).on("drag",R=>{const{transform:D,snapGrid:$,snapToGrid:L,nodeOrigin:H}=n(),C=an(R.sourceEvent,{transform:D,snapGrid:$,snapToGrid:L,containerBounds:b}),P=[];if(!_)return;const{x:S,y:I,width:A,height:k}=y,O={},z=_.origin??H,{width:V,height:te,x:B,y:U}=wv(w,v,C,u,d,z,j,E),q=V!==A,J=te!==k,Y=B!==S&&q,Q=U!==I&&J;if(!Y&&!Q&&!q&&!J)return;if((Y||Q||z[0]===1||z[1]===1)&&(O.x=Y?B:y.x,O.y=Q?U:y.y,y.x=O.x,y.y=O.y,x.length>0)){const ae=B-S,fe=U-I;for(const ye of x)ye.position={x:ye.position.x-ae+z[0]*(V-A),y:ye.position.y-fe+z[1]*(te-k)},P.push(ye)}if((q||J)&&(O.width=q?V:y.width,O.height=J?te:y.height,y.width=O.width,y.height=O.height),M&&_.expandParent){const ae=z[0]*(O.width??0);O.x&&O.x<ae&&(y.x=ae,w.x=w.x-(O.x-ae));const fe=z[1]*(O.height??0);O.y&&O.y<fe&&(y.y=fe,w.y=w.y-(O.y-fe))}const se=xv({width:y.width,prevWidth:A,height:y.height,prevHeight:k,affectsX:v.affectsX,affectsY:v.affectsY}),ee={...y,direction:se};(p==null?void 0:p(R,ee))!==!1&&(f==null||f(R,ee),r(O,P))}).on("end",R=>{m==null||m(R,{...y}),o==null||o()});i.call(N)}function a(){i.on(".drag",null)}return{update:s,destroy:a}}var ol={exports:{}},il={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ir=h,Sv=Fp;function Mv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Nv=typeof Object.is=="function"?Object.is:Mv,kv=Sv.useSyncExternalStore,Tv=Ir.useRef,Rv=Ir.useEffect,Dv=Ir.useMemo,Iv=Ir.useDebugValue;il.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var i=Tv(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=Dv(function(){function c(m){if(!u){if(u=!0,d=m,m=r(m),o!==void 0&&s.hasValue){var p=s.value;if(o(p,m))return l=p}return l=m}if(p=l,Nv(d,m))return p;var y=r(m);return o!==void 0&&o(p,y)?(d=m,p):(d=m,l=y)}var u=!1,d,l,f=n===void 0?null:n;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,n,r,o]);var a=kv(e,i[0],i[1]);return Rv(function(){s.hasValue=!0,s.value=a},[a]),Iv(a),a};ol.exports=il;var Av=ol.exports;const Pv=uf(Av),jv={},Ms=e=>{let t;const n=new Set,r=(d,l)=>{const f=typeof d=="function"?d(t):d;if(!Object.is(f,t)){const m=t;t=l??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(p=>p(t,m))}},o=()=>t,c={setState:r,getState:o,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(jv?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,o,c);return c},$v=e=>e?Ms(e):Ms,{useDebugValue:Lv}=_e,{useSyncExternalStoreWithSelector:Ov}=Pv,Fv=e=>e;function sl(e,t=Fv,n){const r=Ov(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Lv(r),r}const Ns=(e,t)=>{const n=$v(e),r=(o,i=t)=>sl(n,o,i);return Object.assign(r,n),r},Hv=(e,t)=>e?Ns(e,t):Ns;function ge(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const Ar=h.createContext(null),zv=Ar.Provider,al=Qe.error001();function de(e,t){const n=h.useContext(Ar);if(n===null)throw new Error(al);return sl(n,e,t)}function pe(){const e=h.useContext(Ar);if(e===null)throw new Error(al);return h.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const ks={display:"none"},Bv={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},cl="react-flow__node-desc",ul="react-flow__edge-desc",Vv="react-flow__aria-live",Xv=e=>e.ariaLiveMessage;function Yv({rfId:e}){const t=de(Xv);return g.jsx("div",{id:`${Vv}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Bv,children:t})}function Wv({rfId:e,disableKeyboardA11y:t}){return g.jsxs(g.Fragment,{children:[g.jsxs("div",{id:`${cl}-${e}`,style:ks,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),g.jsx("div",{id:`${ul}-${e}`,style:ks,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&g.jsx(Yv,{rfId:e})]})}const Gv=e=>e.userSelectionActive?"none":"all",wi=h.forwardRef(({position:e="top-left",children:t,className:n,style:r,...o},i)=>{const s=de(Gv),a=`${e}`.split("-");return g.jsx("div",{className:xe(["react-flow__panel",n,...a]),style:{...r,pointerEvents:s},ref:i,...o,children:t})});function Uv({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:g.jsx(wi,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:g.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Kv=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},Bn=e=>e.id;function qv(e,t){return ge(e.selectedNodes.map(Bn),t.selectedNodes.map(Bn))&&ge(e.selectedEdges.map(Bn),t.selectedEdges.map(Bn))}function Zv({onSelectionChange:e}){const t=pe(),{selectedNodes:n,selectedEdges:r}=de(Kv,qv);return h.useEffect(()=>{const o={nodes:n,edges:r};e==null||e(o),t.getState().onSelectionChangeHandlers.forEach(i=>i(o))},[n,r,e]),null}const Qv=e=>!!e.onSelectionChangeHandlers;function Jv({onSelectionChange:e}){const t=de(Qv);return e||t?g.jsx(Zv,{onSelectionChange:e}):null}const ll=[0,0],ew={x:0,y:0,zoom:1},tw=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],Ts=[...tw,"rfId"],nw=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),Rs={translateExtent:yn,nodeOrigin:ll,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function rw(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:o,setTranslateExtent:i,setNodeExtent:s,reset:a,setDefaultNodesAndEdges:c,setPaneClickDistance:u}=de(nw,ge),d=pe();h.useEffect(()=>(c(e.defaultNodes,e.defaultEdges),()=>{l.current=Rs,a()}),[]);const l=h.useRef(Rs);return h.useEffect(()=>{for(const f of Ts){const m=e[f],p=l.current[f];m!==p&&(typeof e[f]>"u"||(f==="nodes"?t(m):f==="edges"?n(m):f==="minZoom"?r(m):f==="maxZoom"?o(m):f==="translateExtent"?i(m):f==="nodeExtent"?s(m):f==="paneClickDistance"?u(m):f==="fitView"?d.setState({fitViewOnInit:m}):f==="fitViewOptions"?d.setState({fitViewOnInitOptions:m}):d.setState({[f]:m})))}l.current=e},Ts.map(f=>e[f])),null}function Ds(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function ow(e){var r;const[t,n]=h.useState(e==="system"?null:e);return h.useEffect(()=>{if(e!=="system"){n(e);return}const o=Ds(),i=()=>n(o!=null&&o.matches?"dark":"light");return i(),o==null||o.addEventListener("change",i),()=>{o==null||o.removeEventListener("change",i)}},[e]),t!==null?t:(r=Ds())!=null&&r.matches?"dark":"light"}const Is=typeof document<"u"?document:null;function bn(e=null,t={target:Is,actInsideInputWithModifier:!0}){const[n,r]=h.useState(!1),o=h.useRef(!1),i=h.useRef(new Set([])),[s,a]=h.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(l=>typeof l=="string").map(l=>l.replace("+",`
`).replace(`

`,`
+`).split(`
`)),d=u.reduce((l,f)=>l.concat(...f),[]);return[u,d]}return[[],[]]},[e]);return h.useEffect(()=>{const c=(t==null?void 0:t.target)||Is;if(e!==null){const u=f=>{if(o.current=f.ctrlKey||f.metaKey||f.shiftKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&Ho(f))return!1;const p=Ps(f.code,a);i.current.add(f[p]),As(s,i.current,!1)&&(f.preventDefault(),r(!0))},d=f=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&Ho(f))return!1;const p=Ps(f.code,a);As(s,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(f[p]),f.key==="Meta"&&i.current.clear(),o.current=!1},l=()=>{i.current.clear(),r(!1)};return c==null||c.addEventListener("keydown",u),c==null||c.addEventListener("keyup",d),window.addEventListener("blur",l),window.addEventListener("contextmenu",l),()=>{c==null||c.removeEventListener("keydown",u),c==null||c.removeEventListener("keyup",d),window.removeEventListener("blur",l),window.removeEventListener("contextmenu",l)}}},[e,r]),n}function As(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function Ps(e,t){return t.includes(e)?"code":"key"}const iw=()=>{const e=pe();return h.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,o,i],panZoom:s}=e.getState();return s?(await s.setViewport({x:t.x??r,y:t.y??o,zoom:t.zoom??i},{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},fitView:t=>{const{nodeLookup:n,minZoom:r,maxZoom:o,panZoom:i,domNode:s}=e.getState();if(!i||!s)return Promise.resolve(!1);const a=Lo(n,t),{width:c,height:u}=Rr(s);return Oo({nodes:a,width:c,height:u,minZoom:r,maxZoom:o,panZoom:i},t)},setCenter:async(t,n,r)=>{const{width:o,height:i,maxZoom:s,panZoom:a}=e.getState(),c=typeof(r==null?void 0:r.zoom)<"u"?r.zoom:s,u=o/2-t*c,d=i/2-n*c;return a?(await a.setViewport({x:u,y:d,zoom:c},{duration:r==null?void 0:r.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{const{width:r,height:o,minZoom:i,maxZoom:s,panZoom:a}=e.getState(),c=pi(t,r,o,i,s,(n==null?void 0:n.padding)??.1);return a?(await a.setViewport(c,{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={snapToGrid:!0})=>{const{transform:r,snapGrid:o,domNode:i}=e.getState();if(!i)return t;const{x:s,y:a}=i.getBoundingClientRect(),c={x:t.x-s,y:t.y-a};return Rn(c,r,n.snapToGrid,o)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:o,y:i}=r.getBoundingClientRect(),s=Fu(t,n);return{x:s.x+o,y:s.y+i}}}),[])};function dl(e,t){const n=[],r=new Map,o=[];for(const i of e)if(i.type==="add"){o.push(i);continue}else if(i.type==="remove"||i.type==="replace")r.set(i.id,[i]);else{const s=r.get(i.id);s?s.push(i):r.set(i.id,[i])}for(const i of t){const s=r.get(i.id);if(!s){n.push(i);continue}if(s[0].type==="remove")continue;if(s[0].type==="replace"){n.push({...s[0].item});continue}const a={...i};for(const c of s)sw(c,a);n.push(a)}return o.length&&o.forEach(i=>{i.index!==void 0?n.splice(i.index,0,{...i.item}):n.push({...i.item})}),n}function sw(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(t.width=e.dimensions.width,t.height=e.dimensions.height)),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function fl(e,t){return dl(e,t)}function hl(e,t){return dl(e,t)}function mt(e,t){return{id:e,type:"select",selected:t}}function Nt(e,t=new Set,n=!1){const r=[];for(const[o,i]of e){const s=t.has(o);!(i.selected===void 0&&!s)&&i.selected!==s&&(n&&(i.selected=s),r.push(mt(i.id,s)))}return r}function js({items:e=[],lookup:t}){var o;const n=[],r=new Map(e.map(i=>[i.id,i]));for(const[i,s]of e.entries()){const a=t.get(s.id),c=((o=a==null?void 0:a.internals)==null?void 0:o.userNode)??a;c!==void 0&&c!==s&&n.push({id:s.id,item:s,type:"replace"}),c===void 0&&n.push({item:s,type:"add",index:i})}for(const[i]of t)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function $s(e){return{id:e.id,type:"remove"}}const Ls=e=>Ix(e),aw=e=>Au(e);function ml(e){return h.forwardRef(e)}const cw=typeof window<"u"?h.useLayoutEffect:h.useEffect;function Os(e){const[t,n]=h.useState(BigInt(0)),[r]=h.useState(()=>uw(()=>n(o=>o+BigInt(1))));return cw(()=>{const o=r.get();o.length&&(e(o),r.reset())},[t]),r}function uw(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const pl=h.createContext(null);function lw({children:e}){const t=pe(),n=h.useCallback(a=>{const{nodes:c=[],setNodes:u,hasDefaultNodes:d,onNodesChange:l,nodeLookup:f}=t.getState();let m=c;for(const p of a)m=typeof p=="function"?p(m):p;d?u(m):l&&l(js({items:m,lookup:f}))},[]),r=Os(n),o=h.useCallback(a=>{const{edges:c=[],setEdges:u,hasDefaultEdges:d,onEdgesChange:l,edgeLookup:f}=t.getState();let m=c;for(const p of a)m=typeof p=="function"?p(m):p;d?u(m):l&&l(js({items:m,lookup:f}))},[]),i=Os(o),s=h.useMemo(()=>({nodeQueue:r,edgeQueue:i}),[]);return g.jsx(pl.Provider,{value:s,children:e})}function dw(){const e=h.useContext(pl);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const fw=e=>!!e.panZoom;function bi(){const e=iw(),t=pe(),n=dw(),r=de(fw),o=h.useMemo(()=>{const i=l=>t.getState().nodeLookup.get(l),s=l=>{n.nodeQueue.push(l)},a=l=>{n.edgeQueue.push(l)},c=l=>{var v,_;const{nodeLookup:f,nodeOrigin:m}=t.getState(),p=Ls(l)?l:f.get(l.id),y=p.parentId?zu(p.position,p.measured,p.parentId,f,m):p.position,w={...p,position:y,width:((v=p.measured)==null?void 0:v.width)??p.width,height:((_=p.measured)==null?void 0:_.height)??p.height};return Ft(w)},u=(l,f,m={replace:!1})=>{s(p=>p.map(y=>{if(y.id===l){const w=typeof f=="function"?f(y):f;return m.replace&&Ls(w)?w:{...y,...w}}return y}))},d=(l,f,m={replace:!1})=>{a(p=>p.map(y=>{if(y.id===l){const w=typeof f=="function"?f(y):f;return m.replace&&aw(w)?w:{...y,...w}}return y}))};return{getNodes:()=>t.getState().nodes.map(l=>({...l})),getNode:l=>{var f;return(f=i(l))==null?void 0:f.internals.userNode},getInternalNode:i,getEdges:()=>{const{edges:l=[]}=t.getState();return l.map(f=>({...f}))},getEdge:l=>t.getState().edgeLookup.get(l),setNodes:s,setEdges:a,addNodes:l=>{const f=Array.isArray(l)?l:[l];n.nodeQueue.push(m=>[...m,...f])},addEdges:l=>{const f=Array.isArray(l)?l:[l];n.edgeQueue.push(m=>[...m,...f])},toObject:()=>{const{nodes:l=[],edges:f=[],transform:m}=t.getState(),[p,y,w]=m;return{nodes:l.map(v=>({...v})),edges:f.map(v=>({...v})),viewport:{x:p,y,zoom:w}}},deleteElements:async({nodes:l=[],edges:f=[]})=>{const{nodes:m,edges:p,onNodesDelete:y,onEdgesDelete:w,triggerNodeChanges:v,triggerEdgeChanges:_,onDelete:b,onBeforeDelete:x}=t.getState(),{nodes:M,edges:j}=await jx({nodesToRemove:l,edgesToRemove:f,nodes:m,edges:p,onBeforeDelete:x}),E=j.length>0,N=M.length>0;if(E){const R=j.map($s);w==null||w(j),_(R)}if(N){const R=M.map($s);y==null||y(M),v(R)}return(N||E)&&(b==null||b({nodes:M,edges:j})),{deletedNodes:M,deletedEdges:j}},getIntersectingNodes:(l,f=!0,m)=>{const p=ms(l),y=p?l:c(l),w=m!==void 0;return y?(m||t.getState().nodes).filter(v=>{const _=t.getState().nodeLookup.get(v.id);if(_&&!p&&(v.id===l.id||!_.internals.positionAbsolute))return!1;const b=Ft(w?v:_),x=vn(b,y);return f&&x>0||x>=y.width*y.height}):[]},isNodeIntersecting:(l,f,m=!0)=>{const y=ms(l)?l:c(l);if(!y)return!1;const w=vn(y,f);return m&&w>0||w>=y.width*y.height},updateNode:u,updateNodeData:(l,f,m={replace:!1})=>{u(l,p=>{const y=typeof f=="function"?f(p):f;return m.replace?{...p,data:y}:{...p,data:{...p.data,...y}}},m)},updateEdge:d,updateEdgeData:(l,f,m={replace:!1})=>{d(l,p=>{const y=typeof f=="function"?f(p):f;return m.replace?{...p,data:y}:{...p,data:{...p.data,...y}}},m)},getNodesBounds:l=>{const{nodeLookup:f,nodeOrigin:m}=t.getState();return Ax(l,{nodeLookup:f,nodeOrigin:m})},getHandleConnections:({type:l,id:f,nodeId:m})=>{var p;return Array.from(((p=t.getState().connectionLookup.get(`${m}-${l}${f?`-${f}`:""}`))==null?void 0:p.values())??[])},getNodeConnections:({type:l,handleId:f,nodeId:m})=>{var p;return Array.from(((p=t.getState().connectionLookup.get(`${m}${l?f?`-${l}-${f}`:`-${l}`:""}`))==null?void 0:p.values())??[])}}},[]);return h.useMemo(()=>({...o,...e,viewportInitialized:r}),[r])}const Fs=e=>e.selected,hw={actInsideInputWithModifier:!1},mw=typeof window<"u"?window:void 0;function pw({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=pe(),{deleteElements:r}=bi(),o=bn(e,hw),i=bn(t,{target:mw});h.useEffect(()=>{if(o){const{edges:s,nodes:a}=n.getState();r({nodes:a.filter(Fs),edges:s.filter(Fs)}),n.setState({nodesSelectionActive:!1})}},[o]),h.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])}function gw(e){const t=pe();h.useEffect(()=>{const n=()=>{var o,i;if(!e.current)return!1;const r=Rr(e.current);(r.height===0||r.width===0)&&((i=(o=t.getState()).onError)==null||i.call(o,"004",Qe.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const Pr={position:"absolute",width:"100%",height:"100%",top:0,left:0},yw=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function xw({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:o=.5,panOnScrollMode:i=xt.Free,zoomOnDoubleClick:s=!0,panOnDrag:a=!0,defaultViewport:c,translateExtent:u,minZoom:d,maxZoom:l,zoomActivationKeyCode:f,preventScrolling:m=!0,children:p,noWheelClassName:y,noPanClassName:w,onViewportChange:v,isControlledViewport:_,paneClickDistance:b}){const x=pe(),M=h.useRef(null),{userSelectionActive:j,lib:E}=de(yw,ge),N=bn(f),R=h.useRef();gw(M);const D=h.useCallback($=>{v==null||v({x:$[0],y:$[1],zoom:$[2]}),_||x.setState({transform:$})},[v,_]);return h.useEffect(()=>{if(M.current){R.current=pv({domNode:M.current,minZoom:d,maxZoom:l,translateExtent:u,viewport:c,paneClickDistance:b,onDraggingChange:C=>x.setState({paneDragging:C}),onPanZoomStart:(C,P)=>{const{onViewportChangeStart:S,onMoveStart:I}=x.getState();I==null||I(C,P),S==null||S(P)},onPanZoom:(C,P)=>{const{onViewportChange:S,onMove:I}=x.getState();I==null||I(C,P),S==null||S(P)},onPanZoomEnd:(C,P)=>{const{onViewportChangeEnd:S,onMoveEnd:I}=x.getState();I==null||I(C,P),S==null||S(P)}});const{x:$,y:L,zoom:H}=R.current.getViewport();return x.setState({panZoom:R.current,transform:[$,L,H],domNode:M.current.closest(".react-flow")}),()=>{var C;(C=R.current)==null||C.destroy()}}},[]),h.useEffect(()=>{var $;($=R.current)==null||$.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:o,panOnScrollMode:i,zoomOnDoubleClick:s,panOnDrag:a,zoomActivationKeyPressed:N,preventScrolling:m,noPanClassName:w,userSelectionActive:j,noWheelClassName:y,lib:E,onTransformChange:D})},[e,t,n,r,o,i,s,a,N,m,w,j,y,E,D]),g.jsx("div",{className:"react-flow__renderer",ref:M,style:Pr,children:p})}const vw=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function ww(){const{userSelectionActive:e,userSelectionRect:t}=de(vw,ge);return e&&t?g.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const uo=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},bw=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging});function Cw({isSelecting:e,selectionKeyPressed:t,selectionMode:n=xn.Full,panOnDrag:r,selectionOnDrag:o,onSelectionStart:i,onSelectionEnd:s,onPaneClick:a,onPaneContextMenu:c,onPaneScroll:u,onPaneMouseEnter:d,onPaneMouseMove:l,onPaneMouseLeave:f,children:m}){const p=pe(),{userSelectionActive:y,elementsSelectable:w,dragging:v}=de(bw,ge),_=w&&(e||y),b=h.useRef(null),x=h.useRef(),M=h.useRef(new Set),j=h.useRef(new Set),E=h.useRef(!1),N=h.useRef(!1),R=S=>{if(E.current){E.current=!1;return}a==null||a(S),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},D=S=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){S.preventDefault();return}c==null||c(S)},$=u?S=>u(S):void 0,L=S=>{var z,V;const{resetSelectedElements:I,domNode:A}=p.getState();if(x.current=A==null?void 0:A.getBoundingClientRect(),!w||!e||S.button!==0||S.target!==b.current||!x.current)return;(V=(z=S.target)==null?void 0:z.setPointerCapture)==null||V.call(z,S.pointerId),N.current=!0,E.current=!1;const{x:k,y:O}=qe(S.nativeEvent,x.current);I(),p.setState({userSelectionRect:{width:0,height:0,startX:k,startY:O,x:k,y:O}}),i==null||i(S)},H=S=>{const{userSelectionRect:I,transform:A,nodeLookup:k,edgeLookup:O,connectionLookup:z,triggerNodeChanges:V,triggerEdgeChanges:te,defaultEdgeOptions:B}=p.getState();if(!x.current||!I)return;E.current=!0;const{x:U,y:q}=qe(S.nativeEvent,x.current),{startX:J,startY:Y}=I,Q={startX:J,startY:Y,x:U<J?U:J,y:q<Y?q:Y,width:Math.abs(U-J),height:Math.abs(q-Y)},se=M.current,ee=j.current;M.current=new Set(Pu(k,Q,A,n===xn.Partial,!0).map(ae=>ae.id)),j.current=new Set;const re=(B==null?void 0:B.selectable)??!0;for(const ae of M.current){const fe=z.get(ae);if(fe)for(const{edgeId:ye}of fe.values()){const ve=O.get(ye);ve&&(ve.selectable??re)&&j.current.add(ye)}}if(!ps(se,M.current)){const ae=Nt(k,M.current,!0);V(ae)}if(!ps(ee,j.current)){const ae=Nt(O,j.current);te(ae)}p.setState({userSelectionRect:Q,userSelectionActive:!0,nodesSelectionActive:!1})},C=S=>{var A,k;if(S.button!==0||!N.current)return;(k=(A=S.target)==null?void 0:A.releasePointerCapture)==null||k.call(A,S.pointerId);const{userSelectionRect:I}=p.getState();!y&&I&&S.target===b.current&&(R==null||R(S)),p.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:M.current.size>0}),s==null||s(S),(t||o)&&(E.current=!1),N.current=!1},P=r===!0||Array.isArray(r)&&r.includes(0);return g.jsxs("div",{className:xe(["react-flow__pane",{draggable:P,dragging:v,selection:e}]),onClick:_?void 0:uo(R,b),onContextMenu:uo(D,b),onWheel:uo($,b),onPointerEnter:_?void 0:d,onPointerDown:_?L:l,onPointerMove:_?H:l,onPointerUp:_?C:void 0,onPointerLeave:f,ref:b,style:Pr,children:[m,g.jsx(ww,{})]})}function Yo({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:i,multiSelectionActive:s,nodeLookup:a,onError:c}=t.getState(),u=a.get(e);if(!u){c==null||c("012",Qe.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&s)&&(i({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=r==null?void 0:r.current)==null?void 0:d.blur()})):o([e])}function gl({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:i,nodeClickDistance:s}){const a=pe(),[c,u]=h.useState(!1),d=h.useRef();return h.useEffect(()=>{d.current=tv({getStoreItems:()=>a.getState(),onNodeMouseDown:l=>{Yo({id:l,store:a,nodeRef:e})},onDragStart:()=>{u(!0)},onDragStop:()=>{u(!1)}})},[]),h.useEffect(()=>{var l,f;if(t)(l=d.current)==null||l.destroy();else if(e.current)return(f=d.current)==null||f.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:i,nodeId:o,nodeClickDistance:s}),()=>{var m;(m=d.current)==null||m.destroy()}},[n,r,t,i,e,o]),c}const _w=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function yl(){const e=pe();return h.useCallback(n=>{const{nodeExtent:r,snapToGrid:o,snapGrid:i,nodesDraggable:s,onError:a,updateNodePositions:c,nodeLookup:u,nodeOrigin:d}=e.getState(),l=new Map,f=_w(s),m=o?i[0]:5,p=o?i[1]:5,y=n.direction.x*m*n.factor,w=n.direction.y*p*n.factor;for(const[,v]of u){if(!f(v))continue;let _={x:v.internals.positionAbsolute.x+y,y:v.internals.positionAbsolute.y+w};o&&(_=Tr(_,i));const{position:b,positionAbsolute:x}=ju({nodeId:v.id,nextPosition:_,nodeLookup:u,nodeExtent:r,nodeOrigin:d,onError:a});v.position=b,v.internals.positionAbsolute=x,l.set(v.id,v)}c(l)},[])}const Ci=h.createContext(null),Ew=Ci.Provider;Ci.Consumer;const xl=()=>h.useContext(Ci),Sw=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),Mw=(e,t,n)=>r=>{const{connectionClickStartHandle:o,connectionMode:i,connection:s}=r,{fromHandle:a,toHandle:c,isValid:u}=s,d=(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.id)===t&&(c==null?void 0:c.type)===n;return{connectingFrom:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===n,connectingTo:d,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.id)===t&&(o==null?void 0:o.type)===n,isPossibleEndHandle:i===Lt.Strict?(a==null?void 0:a.type)!==n:e!==(a==null?void 0:a.nodeId)||t!==(a==null?void 0:a.id),connectionInProcess:!!a,valid:d&&u}};function Nw({type:e="source",position:t=ne.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:i=!0,id:s,onConnect:a,children:c,className:u,onMouseDown:d,onTouchStart:l,...f},m){var C,P;const p=s||null,y=e==="target",w=pe(),v=xl(),{connectOnClick:_,noPanClassName:b,rfId:x}=de(Sw,ge),{connectingFrom:M,connectingTo:j,clickConnecting:E,isPossibleEndHandle:N,connectionInProcess:R,valid:D}=de(Mw(v,p,e),ge);v||(P=(C=w.getState()).onError)==null||P.call(C,"010",Qe.error010());const $=S=>{const{defaultEdgeOptions:I,onConnect:A,hasDefaultEdges:k}=w.getState(),O={...I,...S};if(k){const{edges:z,setEdges:V}=w.getState();V(Bx(O,z))}A==null||A(O),a==null||a(O)},L=S=>{if(!v)return;const I=Vu(S.nativeEvent);if(o&&(I&&S.button===0||!I)){const A=w.getState();Xo.onPointerDown(S.nativeEvent,{autoPanOnConnect:A.autoPanOnConnect,connectionMode:A.connectionMode,connectionRadius:A.connectionRadius,domNode:A.domNode,nodeLookup:A.nodeLookup,lib:A.lib,isTarget:y,handleId:p,nodeId:v,flowId:A.rfId,panBy:A.panBy,cancelConnection:A.cancelConnection,onConnectStart:A.onConnectStart,onConnectEnd:A.onConnectEnd,updateConnection:A.updateConnection,onConnect:$,isValidConnection:n||A.isValidConnection,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,autoPanSpeed:A.autoPanSpeed})}I?d==null||d(S):l==null||l(S)},H=S=>{const{onClickConnectStart:I,onClickConnectEnd:A,connectionClickStartHandle:k,connectionMode:O,isValidConnection:z,lib:V,rfId:te,nodeLookup:B,connection:U}=w.getState();if(!v||!k&&!o)return;if(!k){I==null||I(S.nativeEvent,{nodeId:v,handleId:p,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:v,type:e,id:p}});return}const q=Bu(S.target),J=n||z,{connection:Y,isValid:Q}=Xo.isValid(S.nativeEvent,{handle:{nodeId:v,id:p,type:e},connectionMode:O,fromNodeId:k.nodeId,fromHandleId:k.id||null,fromType:k.type,isValidConnection:J,flowId:te,doc:q,lib:V,nodeLookup:B});Q&&Y&&$(Y);const se=structuredClone(U);delete se.inProgress,se.toPosition=se.toHandle?se.toHandle.position:null,A==null||A(S,se),w.setState({connectionClickStartHandle:null})};return g.jsx("div",{"data-handleid":p,"data-nodeid":v,"data-handlepos":t,"data-id":`${x}-${v}-${p}-${e}`,className:xe(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",b,u,{source:!y,target:y,connectable:r,connectablestart:o,connectableend:i,clickconnecting:E,connectingfrom:M,connectingto:j,valid:D,connectionindicator:r&&(!R||N)&&(R?i:o)}]),onMouseDown:L,onTouchStart:L,onClick:_?H:void 0,ref:m,...f,children:c})}const Oe=h.memo(ml(Nw));function kw({data:e,isConnectable:t,sourcePosition:n=ne.Bottom}){return g.jsxs(g.Fragment,{children:[e==null?void 0:e.label,g.jsx(Oe,{type:"source",position:n,isConnectable:t})]})}function Tw({data:e,isConnectable:t,targetPosition:n=ne.Top,sourcePosition:r=ne.Bottom}){return g.jsxs(g.Fragment,{children:[g.jsx(Oe,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,g.jsx(Oe,{type:"source",position:r,isConnectable:t})]})}function Rw(){return null}function Dw({data:e,isConnectable:t,targetPosition:n=ne.Top}){return g.jsxs(g.Fragment,{children:[g.jsx(Oe,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const mr={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Hs={input:kw,default:Tw,output:Dw,group:Rw};function Iw(e){var t,n,r,o;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((r=e.style)==null?void 0:r.width),height:e.height??((o=e.style)==null?void 0:o.height)}}const Aw=e=>{const{width:t,height:n,x:r,y:o}=Tn(e.nodeLookup,{filter:i=>!!i.selected});return{width:Le(t)?t:null,height:Le(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${o}px)`}};function Pw({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=pe(),{width:o,height:i,transformString:s,userSelectionActive:a}=de(Aw,ge),c=yl(),u=h.useRef(null);if(h.useEffect(()=>{var f;n||(f=u.current)==null||f.focus({preventScroll:!0})},[n]),gl({nodeRef:u}),a||!o||!i)return null;const d=e?f=>{const m=r.getState().nodes.filter(p=>p.selected);e(f,m)}:void 0,l=f=>{Object.prototype.hasOwnProperty.call(mr,f.key)&&(f.preventDefault(),c({direction:mr[f.key],factor:f.shiftKey?4:1}))};return g.jsx("div",{className:xe(["react-flow__nodesselection","react-flow__container",t]),style:{transform:s},children:g.jsx("div",{ref:u,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:n?void 0:-1,onKeyDown:n?void 0:l,style:{width:o,height:i}})})}const zs=typeof window<"u"?window:void 0,jw=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function vl({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:s,paneClickDistance:a,deleteKeyCode:c,selectionKeyCode:u,selectionOnDrag:d,selectionMode:l,onSelectionStart:f,onSelectionEnd:m,multiSelectionKeyCode:p,panActivationKeyCode:y,zoomActivationKeyCode:w,elementsSelectable:v,zoomOnScroll:_,zoomOnPinch:b,panOnScroll:x,panOnScrollSpeed:M,panOnScrollMode:j,zoomOnDoubleClick:E,panOnDrag:N,defaultViewport:R,translateExtent:D,minZoom:$,maxZoom:L,preventScrolling:H,onSelectionContextMenu:C,noWheelClassName:P,noPanClassName:S,disableKeyboardA11y:I,onViewportChange:A,isControlledViewport:k}){const{nodesSelectionActive:O,userSelectionActive:z}=de(jw),V=bn(u,{target:zs}),te=bn(y,{target:zs}),B=te||N,U=te||x,q=d&&B!==!0,J=V||z||q;return pw({deleteKeyCode:c,multiSelectionKeyCode:p}),g.jsx(xw,{onPaneContextMenu:i,elementsSelectable:v,zoomOnScroll:_,zoomOnPinch:b,panOnScroll:U,panOnScrollSpeed:M,panOnScrollMode:j,zoomOnDoubleClick:E,panOnDrag:!V&&B,defaultViewport:R,translateExtent:D,minZoom:$,maxZoom:L,zoomActivationKeyCode:w,preventScrolling:H,noWheelClassName:P,noPanClassName:S,onViewportChange:A,isControlledViewport:k,paneClickDistance:a,children:g.jsxs(Cw,{onSelectionStart:f,onSelectionEnd:m,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:s,panOnDrag:B,isSelecting:!!J,selectionMode:l,selectionKeyPressed:V,selectionOnDrag:q,children:[e,O&&g.jsx(Pw,{onSelectionContextMenu:C,noPanClassName:S,disableKeyboardA11y:I})]})})}vl.displayName="FlowRenderer";const $w=h.memo(vl),Lw=e=>t=>e?Pu(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function Ow(e){return de(h.useCallback(Lw(e),[e]),ge)}const Fw=e=>e.updateNodeInternals;function Hw(){const e=de(Fw),[t]=h.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(o=>{const i=o.target.getAttribute("data-id");r.set(i,{id:i,nodeElement:o.target,force:!0})}),e(r)}));return h.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function zw({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const o=pe(),i=h.useRef(null),s=h.useRef(null),a=h.useRef(e.sourcePosition),c=h.useRef(e.targetPosition),u=h.useRef(t),d=n&&!!e.internals.handleBounds;return h.useEffect(()=>{i.current&&!e.hidden&&(!d||s.current!==i.current)&&(s.current&&(r==null||r.unobserve(s.current)),r==null||r.observe(i.current),s.current=i.current)},[d,e.hidden]),h.useEffect(()=>()=>{s.current&&(r==null||r.unobserve(s.current),s.current=null)},[]),h.useEffect(()=>{if(i.current){const l=u.current!==t,f=a.current!==e.sourcePosition,m=c.current!==e.targetPosition;(l||f||m)&&(u.current=t,a.current=e.sourcePosition,c.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:i.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),i}function Bw({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:o,onContextMenu:i,onDoubleClick:s,nodesDraggable:a,elementsSelectable:c,nodesConnectable:u,nodesFocusable:d,resizeObserver:l,noDragClassName:f,noPanClassName:m,disableKeyboardA11y:p,rfId:y,nodeTypes:w,nodeExtent:v,nodeClickDistance:_,onError:b}){const{node:x,internals:M,isParent:j}=de(Y=>{const Q=Y.nodeLookup.get(e),se=Y.parentLookup.has(e);return{node:Q,internals:Q.internals,isParent:se}},ge);let E=x.type||"default",N=(w==null?void 0:w[E])||Hs[E];N===void 0&&(b==null||b("003",Qe.error003(E)),E="default",N=Hs.default);const R=!!(x.draggable||a&&typeof x.draggable>"u"),D=!!(x.selectable||c&&typeof x.selectable>"u"),$=!!(x.connectable||u&&typeof x.connectable>"u"),L=!!(x.focusable||d&&typeof x.focusable>"u"),H=pe(),C=Hu(x),P=zw({node:x,nodeType:E,hasDimensions:C,resizeObserver:l}),S=gl({nodeRef:P,disabled:x.hidden||!R,noDragClassName:f,handleSelector:x.dragHandle,nodeId:e,isSelectable:D,nodeClickDistance:_}),I=yl();if(x.hidden)return null;const A=Je(x),k=Iw(x),O=D||R||t||n||r||o,z=n?Y=>n(Y,{...M.userNode}):void 0,V=r?Y=>r(Y,{...M.userNode}):void 0,te=o?Y=>o(Y,{...M.userNode}):void 0,B=i?Y=>i(Y,{...M.userNode}):void 0,U=s?Y=>s(Y,{...M.userNode}):void 0,q=Y=>{const{selectNodesOnDrag:Q,nodeDragThreshold:se}=H.getState();D&&(!Q||!R||se>0)&&Yo({id:e,store:H,nodeRef:P}),t&&t(Y,{...M.userNode})},J=Y=>{if(!(Ho(Y.nativeEvent)||p))if(Ru.includes(Y.key)&&D){const Q=Y.key==="Escape";Yo({id:e,store:H,unselect:Q,nodeRef:P})}else R&&x.selected&&Object.prototype.hasOwnProperty.call(mr,Y.key)&&(Y.preventDefault(),H.setState({ariaLiveMessage:`Moved selected node ${Y.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~M.positionAbsolute.x}, y: ${~~M.positionAbsolute.y}`}),I({direction:mr[Y.key],factor:Y.shiftKey?4:1}))};return g.jsx("div",{className:xe(["react-flow__node",`react-flow__node-${E}`,{[m]:R},x.className,{selected:x.selected,selectable:D,parent:j,draggable:R,dragging:S}]),ref:P,style:{zIndex:M.z,transform:`translate(${M.positionAbsolute.x}px,${M.positionAbsolute.y}px)`,pointerEvents:O?"all":"none",visibility:C?"visible":"hidden",...x.style,...k},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:z,onMouseMove:V,onMouseLeave:te,onContextMenu:B,onClick:q,onDoubleClick:U,onKeyDown:L?J:void 0,tabIndex:L?0:void 0,role:L?"button":void 0,"aria-describedby":p?void 0:`${cl}-${y}`,"aria-label":x.ariaLabel,children:g.jsx(Ew,{value:e,children:g.jsx(N,{id:e,data:x.data,type:E,positionAbsoluteX:M.positionAbsolute.x,positionAbsoluteY:M.positionAbsolute.y,selected:x.selected??!1,selectable:D,draggable:R,deletable:x.deletable??!0,isConnectable:$,sourcePosition:x.sourcePosition,targetPosition:x.targetPosition,dragging:S,dragHandle:x.dragHandle,zIndex:M.z,parentId:x.parentId,...A})})})}const Vw=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function wl(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,onError:i}=de(Vw,ge),s=Ow(e.onlyRenderVisibleElements),a=Hw();return g.jsx("div",{className:"react-flow__nodes",style:Pr,children:s.map(c=>g.jsx(Bw,{id:c,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:a,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,nodeClickDistance:e.nodeClickDistance,onError:i},c))})}wl.displayName="NodeRenderer";const Xw=h.memo(wl);function Yw(e){return de(h.useCallback(n=>{if(!e)return n.edges.map(o=>o.id);const r=[];if(n.width&&n.height)for(const o of n.edges){const i=n.nodeLookup.get(o.source),s=n.nodeLookup.get(o.target);i&&s&&Fx({sourceNode:i,targetNode:s,width:n.width,height:n.height,transform:n.transform})&&r.push(o.id)}return r},[e]),ge)}const Ww=({color:e="none",strokeWidth:t=1})=>g.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Gw=({color:e="none",strokeWidth:t=1})=>g.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Bs={[dr.Arrow]:Ww,[dr.ArrowClosed]:Gw};function Uw(e){const t=pe();return h.useMemo(()=>{var o,i;return Object.prototype.hasOwnProperty.call(Bs,e)?Bs[e]:((i=(o=t.getState()).onError)==null||i.call(o,"009",Qe.error009(e)),null)},[e])}const Kw=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:i="strokeWidth",strokeWidth:s,orient:a="auto-start-reverse"})=>{const c=Uw(t);return c?g.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:a,refX:"0",refY:"0",children:g.jsx(c,{color:n,strokeWidth:s})}):null},bl=({defaultColor:e,rfId:t})=>{const n=de(i=>i.edges),r=de(i=>i.defaultEdgeOptions),o=h.useMemo(()=>Gx(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return o.length?g.jsx("svg",{className:"react-flow__marker",children:g.jsx("defs",{children:o.map(i=>g.jsx(Kw,{id:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient},i.id))})}):null};bl.displayName="MarkerDefinitions";var qw=h.memo(bl);function Cl({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:i={},labelBgPadding:s=[2,4],labelBgBorderRadius:a=2,children:c,className:u,...d}){const[l,f]=h.useState({x:1,y:0,width:0,height:0}),m=xe(["react-flow__edge-textwrapper",u]),p=h.useRef(null);return h.useEffect(()=>{if(p.current){const y=p.current.getBBox();f({x:y.x,y:y.y,width:y.width,height:y.height})}},[n]),typeof n>"u"||!n?null:g.jsxs("g",{transform:`translate(${e-l.width/2} ${t-l.height/2})`,className:m,visibility:l.width?"visible":"hidden",...d,children:[o&&g.jsx("rect",{width:l.width+2*s[0],x:-s[0],y:-s[1],height:l.height+2*s[1],className:"react-flow__edge-textbg",style:i,rx:a,ry:a}),g.jsx("text",{className:"react-flow__edge-text",y:l.height/2,dy:"0.3em",ref:p,style:r,children:n}),c]})}Cl.displayName="EdgeText";const Zw=h.memo(Cl);function jr({path:e,labelX:t,labelY:n,label:r,labelStyle:o,labelShowBg:i,labelBgStyle:s,labelBgPadding:a,labelBgBorderRadius:c,interactionWidth:u=20,...d}){return g.jsxs(g.Fragment,{children:[g.jsx("path",{...d,d:e,fill:"none",className:xe(["react-flow__edge-path",d.className])}),u&&g.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:u,className:"react-flow__edge-interaction"}),r&&Le(t)&&Le(n)?g.jsx(Zw,{x:t,y:n,label:r,labelStyle:o,labelShowBg:i,labelBgStyle:s,labelBgPadding:a,labelBgBorderRadius:c}):null]})}function Vs({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===ne.Left||e===ne.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function _l({sourceX:e,sourceY:t,sourcePosition:n=ne.Bottom,targetX:r,targetY:o,targetPosition:i=ne.Top}){const[s,a]=Vs({pos:n,x1:e,y1:t,x2:r,y2:o}),[c,u]=Vs({pos:i,x1:r,y1:o,x2:e,y2:t}),[d,l,f,m]=Xu({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:s,sourceControlY:a,targetControlX:c,targetControlY:u});return[`M${e},${t} C${s},${a} ${c},${u} ${r},${o}`,d,l,f,m]}function El(e){return h.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,sourcePosition:s=ne.Bottom,targetPosition:a=ne.Top,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:l,labelBgPadding:f,labelBgBorderRadius:m,style:p,markerEnd:y,markerStart:w,interactionWidth:v})=>{const[_,b,x]=_l({sourceX:n,sourceY:r,sourcePosition:s,targetX:o,targetY:i,targetPosition:a}),M=e.isInternal?void 0:t;return g.jsx(jr,{id:M,path:_,labelX:b,labelY:x,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:l,labelBgPadding:f,labelBgBorderRadius:m,style:p,markerEnd:y,markerStart:w,interactionWidth:v})})}const Qw=El({isInternal:!1}),Sl=El({isInternal:!0});Qw.displayName="SimpleBezierEdge";Sl.displayName="SimpleBezierEdgeInternal";function Ml(e){return h.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:l,style:f,sourcePosition:m=ne.Bottom,targetPosition:p=ne.Top,markerEnd:y,markerStart:w,pathOptions:v,interactionWidth:_})=>{const[b,x,M]=zo({sourceX:n,sourceY:r,sourcePosition:m,targetX:o,targetY:i,targetPosition:p,borderRadius:v==null?void 0:v.borderRadius,offset:v==null?void 0:v.offset}),j=e.isInternal?void 0:t;return g.jsx(jr,{id:j,path:b,labelX:x,labelY:M,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:l,style:f,markerEnd:y,markerStart:w,interactionWidth:_})})}const Nl=Ml({isInternal:!1}),kl=Ml({isInternal:!0});Nl.displayName="SmoothStepEdge";kl.displayName="SmoothStepEdgeInternal";function Tl(e){return h.memo(({id:t,...n})=>{var o;const r=e.isInternal?void 0:t;return g.jsx(Nl,{...n,id:r,pathOptions:h.useMemo(()=>{var i;return{borderRadius:0,offset:(i=n.pathOptions)==null?void 0:i.offset}},[(o=n.pathOptions)==null?void 0:o.offset])})})}const Jw=Tl({isInternal:!1}),Rl=Tl({isInternal:!0});Jw.displayName="StepEdge";Rl.displayName="StepEdgeInternal";function Dl(e){return h.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:l,style:f,markerEnd:m,markerStart:p,interactionWidth:y})=>{const[w,v,_]=Gu({sourceX:n,sourceY:r,targetX:o,targetY:i}),b=e.isInternal?void 0:t;return g.jsx(jr,{id:b,path:w,labelX:v,labelY:_,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:l,style:f,markerEnd:m,markerStart:p,interactionWidth:y})})}const e1=Dl({isInternal:!1}),Il=Dl({isInternal:!0});e1.displayName="StraightEdge";Il.displayName="StraightEdgeInternal";function Al(e){return h.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,sourcePosition:s=ne.Bottom,targetPosition:a=ne.Top,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:l,labelBgPadding:f,labelBgBorderRadius:m,style:p,markerEnd:y,markerStart:w,pathOptions:v,interactionWidth:_})=>{const[b,x,M]=Yu({sourceX:n,sourceY:r,sourcePosition:s,targetX:o,targetY:i,targetPosition:a,curvature:v==null?void 0:v.curvature}),j=e.isInternal?void 0:t;return g.jsx(jr,{id:j,path:b,labelX:x,labelY:M,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:l,labelBgPadding:f,labelBgBorderRadius:m,style:p,markerEnd:y,markerStart:w,interactionWidth:_})})}const t1=Al({isInternal:!1}),Pl=Al({isInternal:!0});t1.displayName="BezierEdge";Pl.displayName="BezierEdgeInternal";const Xs={default:Pl,straight:Il,step:Rl,smoothstep:kl,simplebezier:Sl},Ys={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},n1=(e,t,n)=>n===ne.Left?e-t:n===ne.Right?e+t:e,r1=(e,t,n)=>n===ne.Top?e-t:n===ne.Bottom?e+t:e,Ws="react-flow__edgeupdater";function Gs({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:i,onMouseOut:s,type:a}){return g.jsx("circle",{onMouseDown:o,onMouseEnter:i,onMouseOut:s,className:xe([Ws,`${Ws}-${a}`]),cx:n1(t,r,e),cy:r1(n,r,e),r,stroke:"transparent",fill:"transparent"})}function o1({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:o,targetX:i,targetY:s,sourcePosition:a,targetPosition:c,onReconnect:u,onReconnectStart:d,onReconnectEnd:l,setReconnecting:f,setUpdateHover:m}){const p=pe(),y=(x,M)=>{if(x.button!==0)return;const{autoPanOnConnect:j,domNode:E,isValidConnection:N,connectionMode:R,connectionRadius:D,lib:$,onConnectStart:L,onConnectEnd:H,cancelConnection:C,nodeLookup:P,rfId:S,panBy:I,updateConnection:A}=p.getState(),k=M.type==="target";f(!0),d==null||d(x,n,M.type);const O=(V,te)=>{f(!1),l==null||l(V,n,M.type,te)},z=V=>u==null?void 0:u(n,V);Xo.onPointerDown(x.nativeEvent,{autoPanOnConnect:j,connectionMode:R,connectionRadius:D,domNode:E,handleId:M.id,nodeId:M.nodeId,nodeLookup:P,isTarget:k,edgeUpdaterType:M.type,lib:$,flowId:S,cancelConnection:C,panBy:I,isValidConnection:N,onConnect:z,onConnectStart:L,onConnectEnd:H,onReconnectEnd:O,updateConnection:A,getTransform:()=>p.getState().transform,getFromHandle:()=>p.getState().connection.fromHandle})},w=x=>y(x,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),v=x=>y(x,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),_=()=>m(!0),b=()=>m(!1);return g.jsxs(g.Fragment,{children:[(e===!0||e==="source")&&g.jsx(Gs,{position:a,centerX:r,centerY:o,radius:t,onMouseDown:w,onMouseEnter:_,onMouseOut:b,type:"source"}),(e===!0||e==="target")&&g.jsx(Gs,{position:c,centerX:i,centerY:s,radius:t,onMouseDown:v,onMouseEnter:_,onMouseOut:b,type:"target"})]})}function i1({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:o,onDoubleClick:i,onContextMenu:s,onMouseEnter:a,onMouseMove:c,onMouseLeave:u,reconnectRadius:d,onReconnect:l,onReconnectStart:f,onReconnectEnd:m,rfId:p,edgeTypes:y,noPanClassName:w,onError:v,disableKeyboardA11y:_}){let b=de(re=>re.edgeLookup.get(e));const x=de(re=>re.defaultEdgeOptions);b=x?{...x,...b}:b;let M=b.type||"default",j=(y==null?void 0:y[M])||Xs[M];j===void 0&&(v==null||v("011",Qe.error011(M)),M="default",j=Xs.default);const E=!!(b.focusable||t&&typeof b.focusable>"u"),N=typeof l<"u"&&(b.reconnectable||n&&typeof b.reconnectable>"u"),R=!!(b.selectable||r&&typeof b.selectable>"u"),D=h.useRef(null),[$,L]=h.useState(!1),[H,C]=h.useState(!1),P=pe(),{zIndex:S,sourceX:I,sourceY:A,targetX:k,targetY:O,sourcePosition:z,targetPosition:V}=de(h.useCallback(re=>{const ae=re.nodeLookup.get(b.source),fe=re.nodeLookup.get(b.target);if(!ae||!fe)return{zIndex:b.zIndex,...Ys};const ye=Wx({id:e,sourceNode:ae,targetNode:fe,sourceHandle:b.sourceHandle||null,targetHandle:b.targetHandle||null,connectionMode:re.connectionMode,onError:v});return{zIndex:Ox({selected:b.selected,zIndex:b.zIndex,sourceNode:ae,targetNode:fe,elevateOnSelect:re.elevateEdgesOnSelect}),...ye||Ys}},[b.source,b.target,b.sourceHandle,b.targetHandle,b.selected,b.zIndex]),ge),te=h.useMemo(()=>b.markerStart?`url('#${Bo(b.markerStart,p)}')`:void 0,[b.markerStart,p]),B=h.useMemo(()=>b.markerEnd?`url('#${Bo(b.markerEnd,p)}')`:void 0,[b.markerEnd,p]);if(b.hidden||I===null||A===null||k===null||O===null)return null;const U=re=>{var ve;const{addSelectedEdges:ae,unselectNodesAndEdges:fe,multiSelectionActive:ye}=P.getState();R&&(P.setState({nodesSelectionActive:!1}),b.selected&&ye?(fe({nodes:[],edges:[b]}),(ve=D.current)==null||ve.blur()):ae([e])),o&&o(re,b)},q=i?re=>{i(re,{...b})}:void 0,J=s?re=>{s(re,{...b})}:void 0,Y=a?re=>{a(re,{...b})}:void 0,Q=c?re=>{c(re,{...b})}:void 0,se=u?re=>{u(re,{...b})}:void 0,ee=re=>{var ae;if(!_&&Ru.includes(re.key)&&R){const{unselectNodesAndEdges:fe,addSelectedEdges:ye}=P.getState();re.key==="Escape"?((ae=D.current)==null||ae.blur(),fe({edges:[b]})):ye([e])}};return g.jsx("svg",{style:{zIndex:S},children:g.jsxs("g",{className:xe(["react-flow__edge",`react-flow__edge-${M}`,b.className,w,{selected:b.selected,animated:b.animated,inactive:!R&&!o,updating:$,selectable:R}]),onClick:U,onDoubleClick:q,onContextMenu:J,onMouseEnter:Y,onMouseMove:Q,onMouseLeave:se,onKeyDown:E?ee:void 0,tabIndex:E?0:void 0,role:E?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":b.ariaLabel===null?void 0:b.ariaLabel||`Edge from ${b.source} to ${b.target}`,"aria-describedby":E?`${ul}-${p}`:void 0,ref:D,children:[!H&&g.jsx(j,{id:e,source:b.source,target:b.target,type:b.type,selected:b.selected,animated:b.animated,selectable:R,deletable:b.deletable??!0,label:b.label,labelStyle:b.labelStyle,labelShowBg:b.labelShowBg,labelBgStyle:b.labelBgStyle,labelBgPadding:b.labelBgPadding,labelBgBorderRadius:b.labelBgBorderRadius,sourceX:I,sourceY:A,targetX:k,targetY:O,sourcePosition:z,targetPosition:V,data:b.data,style:b.style,sourceHandleId:b.sourceHandle,targetHandleId:b.targetHandle,markerStart:te,markerEnd:B,pathOptions:"pathOptions"in b?b.pathOptions:void 0,interactionWidth:b.interactionWidth}),N&&g.jsx(o1,{edge:b,isReconnectable:N,reconnectRadius:d,onReconnect:l,onReconnectStart:f,onReconnectEnd:m,sourceX:I,sourceY:A,targetX:k,targetY:O,sourcePosition:z,targetPosition:V,setUpdateHover:L,setReconnecting:C})]})})}const s1=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function jl({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:o,onReconnect:i,onEdgeContextMenu:s,onEdgeMouseEnter:a,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,reconnectRadius:l,onEdgeDoubleClick:f,onReconnectStart:m,onReconnectEnd:p,disableKeyboardA11y:y}){const{edgesFocusable:w,edgesReconnectable:v,elementsSelectable:_,onError:b}=de(s1,ge),x=Yw(t);return g.jsxs("div",{className:"react-flow__edges",children:[g.jsx(qw,{defaultColor:e,rfId:n}),x.map(M=>g.jsx(i1,{id:M,edgesFocusable:w,edgesReconnectable:v,elementsSelectable:_,noPanClassName:o,onReconnect:i,onContextMenu:s,onMouseEnter:a,onMouseMove:c,onMouseLeave:u,onClick:d,reconnectRadius:l,onDoubleClick:f,onReconnectStart:m,onReconnectEnd:p,rfId:n,onError:b,edgeTypes:r,disableKeyboardA11y:y},M))]})}jl.displayName="EdgeRenderer";const a1=h.memo(jl),c1=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function u1({children:e}){const t=de(c1);return g.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function l1(e){const t=bi(),n=h.useRef(!1);h.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const d1=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function f1(e){const t=de(d1),n=pe();return h.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function h1(e){return e.connection.inProgress?{...e.connection,to:Rn(e.connection.to,e.transform)}:{...e.connection}}function m1(e){return h1}function _i(e){const t=m1();return de(t,ge)}const p1=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function g1({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:o,width:i,height:s,isValid:a,inProgress:c}=de(p1,ge);return!(i&&o&&c)?null:g.jsx("svg",{style:e,width:i,height:s,className:"react-flow__connectionline react-flow__container",children:g.jsx("g",{className:xe(["react-flow__connection",Iu(a)]),children:g.jsx($l,{style:t,type:n,CustomComponent:r,isValid:a})})})}const $l=({style:e,type:t=it.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:o,from:i,fromNode:s,fromHandle:a,fromPosition:c,to:u,toNode:d,toHandle:l,toPosition:f}=_i();if(!o)return;if(n)return g.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:s,fromHandle:a,fromX:i.x,fromY:i.y,toX:u.x,toY:u.y,fromPosition:c,toPosition:f,connectionStatus:Iu(r),toNode:d,toHandle:l});let m="";const p={sourceX:i.x,sourceY:i.y,sourcePosition:c,targetX:u.x,targetY:u.y,targetPosition:f};switch(t){case it.Bezier:[m]=Yu(p);break;case it.SimpleBezier:[m]=_l(p);break;case it.Step:[m]=zo({...p,borderRadius:0});break;case it.SmoothStep:[m]=zo(p);break;default:[m]=Gu(p)}return g.jsx("path",{d:m,fill:"none",className:"react-flow__connection-path",style:e})};$l.displayName="ConnectionLine";const y1={};function Us(e=y1){h.useRef(e),pe(),h.useEffect(()=>{},[e])}function x1(){pe(),h.useRef(!1),h.useEffect(()=>{},[])}function Ll({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:o,onNodeDoubleClick:i,onEdgeDoubleClick:s,onNodeMouseEnter:a,onNodeMouseMove:c,onNodeMouseLeave:u,onNodeContextMenu:d,onSelectionContextMenu:l,onSelectionStart:f,onSelectionEnd:m,connectionLineType:p,connectionLineStyle:y,connectionLineComponent:w,connectionLineContainerStyle:v,selectionKeyCode:_,selectionOnDrag:b,selectionMode:x,multiSelectionKeyCode:M,panActivationKeyCode:j,zoomActivationKeyCode:E,deleteKeyCode:N,onlyRenderVisibleElements:R,elementsSelectable:D,defaultViewport:$,translateExtent:L,minZoom:H,maxZoom:C,preventScrolling:P,defaultMarkerColor:S,zoomOnScroll:I,zoomOnPinch:A,panOnScroll:k,panOnScrollSpeed:O,panOnScrollMode:z,zoomOnDoubleClick:V,panOnDrag:te,onPaneClick:B,onPaneMouseEnter:U,onPaneMouseMove:q,onPaneMouseLeave:J,onPaneScroll:Y,onPaneContextMenu:Q,paneClickDistance:se,nodeClickDistance:ee,onEdgeContextMenu:re,onEdgeMouseEnter:ae,onEdgeMouseMove:fe,onEdgeMouseLeave:ye,reconnectRadius:ve,onReconnect:ct,onReconnectStart:ut,onReconnectEnd:De,noDragClassName:lt,noWheelClassName:Xe,noPanClassName:Ye,disableKeyboardA11y:dt,nodeExtent:zt,rfId:ft,viewport:We,onViewportChange:et}){return Us(e),Us(t),x1(),l1(n),f1(We),g.jsx($w,{onPaneClick:B,onPaneMouseEnter:U,onPaneMouseMove:q,onPaneMouseLeave:J,onPaneContextMenu:Q,onPaneScroll:Y,paneClickDistance:se,deleteKeyCode:N,selectionKeyCode:_,selectionOnDrag:b,selectionMode:x,onSelectionStart:f,onSelectionEnd:m,multiSelectionKeyCode:M,panActivationKeyCode:j,zoomActivationKeyCode:E,elementsSelectable:D,zoomOnScroll:I,zoomOnPinch:A,zoomOnDoubleClick:V,panOnScroll:k,panOnScrollSpeed:O,panOnScrollMode:z,panOnDrag:te,defaultViewport:$,translateExtent:L,minZoom:H,maxZoom:C,onSelectionContextMenu:l,preventScrolling:P,noDragClassName:lt,noWheelClassName:Xe,noPanClassName:Ye,disableKeyboardA11y:dt,onViewportChange:et,isControlledViewport:!!We,children:g.jsxs(u1,{children:[g.jsx(a1,{edgeTypes:t,onEdgeClick:o,onEdgeDoubleClick:s,onReconnect:ct,onReconnectStart:ut,onReconnectEnd:De,onlyRenderVisibleElements:R,onEdgeContextMenu:re,onEdgeMouseEnter:ae,onEdgeMouseMove:fe,onEdgeMouseLeave:ye,reconnectRadius:ve,defaultMarkerColor:S,noPanClassName:Ye,disableKeyboardA11y:dt,rfId:ft}),g.jsx(g1,{style:y,type:p,component:w,containerStyle:v}),g.jsx("div",{className:"react-flow__edgelabel-renderer"}),g.jsx(Xw,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:i,onNodeMouseEnter:a,onNodeMouseMove:c,onNodeMouseLeave:u,onNodeContextMenu:d,nodeClickDistance:ee,onlyRenderVisibleElements:R,noPanClassName:Ye,noDragClassName:lt,disableKeyboardA11y:dt,nodeExtent:zt,rfId:ft}),g.jsx("div",{className:"react-flow__viewport-portal"})]})})}Ll.displayName="GraphView";const v1=h.memo(Ll),Ks=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:s,nodeOrigin:a,nodeExtent:c}={})=>{const u=new Map,d=new Map,l=new Map,f=new Map,m=r??t??[],p=n??e??[],y=a??[0,0],w=c??yn;Ku(l,f,m),Vo(p,u,d,{nodeOrigin:y,nodeExtent:w,elevateNodesOnSelect:!1});let v=[0,0,1];if(s&&o&&i){const _=Tn(u,{filter:j=>!!((j.width||j.initialWidth)&&(j.height||j.initialHeight))}),{x:b,y:x,zoom:M}=pi(_,o,i,.5,2,.1);v=[b,x,M]}return{rfId:"1",width:0,height:0,transform:v,nodes:p,nodeLookup:u,parentLookup:d,edges:m,edgeLookup:f,connectionLookup:l,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:yn,nodeExtent:w,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Lt.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:y,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...Du},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:$x,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},w1=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:s,nodeOrigin:a,nodeExtent:c})=>Hv((u,d)=>({...Ks({nodes:e,edges:t,width:o,height:i,fitView:s,nodeOrigin:a,nodeExtent:c,defaultNodes:n,defaultEdges:r}),setNodes:l=>{const{nodeLookup:f,parentLookup:m,nodeOrigin:p,elevateNodesOnSelect:y}=d();Vo(l,f,m,{nodeOrigin:p,nodeExtent:c,elevateNodesOnSelect:y,checkEquality:!0}),u({nodes:l})},setEdges:l=>{const{connectionLookup:f,edgeLookup:m}=d();Ku(f,m,l),u({edges:l})},setDefaultNodesAndEdges:(l,f)=>{if(l){const{setNodes:m}=d();m(l),u({hasDefaultNodes:!0})}if(f){const{setEdges:m}=d();m(f),u({hasDefaultEdges:!0})}},updateNodeInternals:(l,f={triggerFitView:!0})=>{const{triggerNodeChanges:m,nodeLookup:p,parentLookup:y,fitViewOnInit:w,fitViewDone:v,fitViewOnInitOptions:_,domNode:b,nodeOrigin:x,nodeExtent:M,debug:j,fitViewSync:E}=d(),{changes:N,updatedInternals:R}=Qx(l,p,y,b,x,M);if(R){if(Kx(p,y,{nodeOrigin:x,nodeExtent:M}),f.triggerFitView){let D=v;!v&&w&&(D=E({..._,nodes:_==null?void 0:_.nodes})),u({fitViewDone:D})}else u({});(N==null?void 0:N.length)>0&&(j&&console.log("React Flow: trigger node changes",N),m==null||m(N))}},updateNodePositions:(l,f=!1)=>{const m=[],p=[];for(const[y,w]of l){const v=!!(w!=null&&w.expandParent&&(w!=null&&w.parentId)&&(w!=null&&w.position)),_={id:y,type:"position",position:v?{x:Math.max(0,w.position.x),y:Math.max(0,w.position.y)}:w.position,dragging:f};v&&m.push({id:y,parentId:w.parentId,rect:{...w.internals.positionAbsolute,width:w.measured.width,height:w.measured.height}}),p.push(_)}if(m.length>0){const{nodeLookup:y,parentLookup:w,nodeOrigin:v}=d(),_=vi(m,y,w,v);p.push(..._)}d().triggerNodeChanges(p)},triggerNodeChanges:l=>{const{onNodesChange:f,setNodes:m,nodes:p,hasDefaultNodes:y,debug:w}=d();if(l!=null&&l.length){if(y){const v=fl(l,p);m(v)}w&&console.log("React Flow: trigger node changes",l),f==null||f(l)}},triggerEdgeChanges:l=>{const{onEdgesChange:f,setEdges:m,edges:p,hasDefaultEdges:y,debug:w}=d();if(l!=null&&l.length){if(y){const v=hl(l,p);m(v)}w&&console.log("React Flow: trigger edge changes",l),f==null||f(l)}},addSelectedNodes:l=>{const{multiSelectionActive:f,edgeLookup:m,nodeLookup:p,triggerNodeChanges:y,triggerEdgeChanges:w}=d();if(f){const v=l.map(_=>mt(_,!0));y(v);return}y(Nt(p,new Set([...l]),!0)),w(Nt(m))},addSelectedEdges:l=>{const{multiSelectionActive:f,edgeLookup:m,nodeLookup:p,triggerNodeChanges:y,triggerEdgeChanges:w}=d();if(f){const v=l.map(_=>mt(_,!0));w(v);return}w(Nt(m,new Set([...l]))),y(Nt(p,new Set,!0))},unselectNodesAndEdges:({nodes:l,edges:f}={})=>{const{edges:m,nodes:p,nodeLookup:y,triggerNodeChanges:w,triggerEdgeChanges:v}=d(),_=l||p,b=f||m,x=_.map(j=>{const E=y.get(j.id);return E&&(E.selected=!1),mt(j.id,!1)}),M=b.map(j=>mt(j.id,!1));w(x),v(M)},setMinZoom:l=>{const{panZoom:f,maxZoom:m}=d();f==null||f.setScaleExtent([l,m]),u({minZoom:l})},setMaxZoom:l=>{const{panZoom:f,minZoom:m}=d();f==null||f.setScaleExtent([m,l]),u({maxZoom:l})},setTranslateExtent:l=>{var f;(f=d().panZoom)==null||f.setTranslateExtent(l),u({translateExtent:l})},setPaneClickDistance:l=>{var f;(f=d().panZoom)==null||f.setClickDistance(l)},resetSelectedElements:()=>{const{edges:l,nodes:f,triggerNodeChanges:m,triggerEdgeChanges:p}=d(),y=f.reduce((v,_)=>_.selected?[...v,mt(_.id,!1)]:v,[]),w=l.reduce((v,_)=>_.selected?[...v,mt(_.id,!1)]:v,[]);m(y),p(w)},setNodeExtent:l=>{const{nodes:f,nodeLookup:m,parentLookup:p,nodeOrigin:y,elevateNodesOnSelect:w,nodeExtent:v}=d();l[0][0]===v[0][0]&&l[0][1]===v[0][1]&&l[1][0]===v[1][0]&&l[1][1]===v[1][1]||(Vo(f,m,p,{nodeOrigin:y,nodeExtent:l,elevateNodesOnSelect:w,checkEquality:!1}),u({nodeExtent:l}))},panBy:l=>{const{transform:f,width:m,height:p,panZoom:y,translateExtent:w}=d();return Jx({delta:l,panZoom:y,transform:f,translateExtent:w,width:m,height:p})},fitView:l=>{const{panZoom:f,width:m,height:p,minZoom:y,maxZoom:w,nodeLookup:v}=d();if(!f)return Promise.resolve(!1);const _=Lo(v,l);return Oo({nodes:_,width:m,height:p,panZoom:f,minZoom:y,maxZoom:w},l)},fitViewSync:l=>{const{panZoom:f,width:m,height:p,minZoom:y,maxZoom:w,nodeLookup:v}=d();if(!f)return!1;const _=Lo(v,l);return Oo({nodes:_,width:m,height:p,panZoom:f,minZoom:y,maxZoom:w},l),_.size>0},cancelConnection:()=>{u({connection:{...Du}})},updateConnection:l=>{u({connection:l})},reset:()=>u({...Ks()})}),Object.is);function b1({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:o,initialHeight:i,fitView:s,nodeOrigin:a,nodeExtent:c,children:u}){const[d]=h.useState(()=>w1({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:s,nodeOrigin:a,nodeExtent:c}));return g.jsx(zv,{value:d,children:g.jsx(lw,{children:u})})}function C1({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:o,width:i,height:s,fitView:a,nodeOrigin:c,nodeExtent:u}){return h.useContext(Ar)?g.jsx(g.Fragment,{children:e}):g.jsx(b1,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:o,initialWidth:i,initialHeight:s,fitView:a,nodeOrigin:c,nodeExtent:u,children:e})}const _1={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function E1({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:i,edgeTypes:s,onNodeClick:a,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:l,onMoveEnd:f,onConnect:m,onConnectStart:p,onConnectEnd:y,onClickConnectStart:w,onClickConnectEnd:v,onNodeMouseEnter:_,onNodeMouseMove:b,onNodeMouseLeave:x,onNodeContextMenu:M,onNodeDoubleClick:j,onNodeDragStart:E,onNodeDrag:N,onNodeDragStop:R,onNodesDelete:D,onEdgesDelete:$,onDelete:L,onSelectionChange:H,onSelectionDragStart:C,onSelectionDrag:P,onSelectionDragStop:S,onSelectionContextMenu:I,onSelectionStart:A,onSelectionEnd:k,onBeforeDelete:O,connectionMode:z,connectionLineType:V=it.Bezier,connectionLineStyle:te,connectionLineComponent:B,connectionLineContainerStyle:U,deleteKeyCode:q="Backspace",selectionKeyCode:J="Shift",selectionOnDrag:Y=!1,selectionMode:Q=xn.Full,panActivationKeyCode:se="Space",multiSelectionKeyCode:ee=hr()?"Meta":"Control",zoomActivationKeyCode:re=hr()?"Meta":"Control",snapToGrid:ae,snapGrid:fe,onlyRenderVisibleElements:ye=!1,selectNodesOnDrag:ve,nodesDraggable:ct,nodesConnectable:ut,nodesFocusable:De,nodeOrigin:lt=ll,edgesFocusable:Xe,edgesReconnectable:Ye,elementsSelectable:dt=!0,defaultViewport:zt=ew,minZoom:ft=.5,maxZoom:We=2,translateExtent:et=yn,preventScrolling:$r=!0,nodeExtent:ht,defaultMarkerColor:Bt="#b1b1b7",zoomOnScroll:Lr=!0,zoomOnPinch:Or=!0,panOnScroll:Vt=!1,panOnScrollSpeed:Xt=.5,panOnScrollMode:Fr=xt.Free,zoomOnDoubleClick:Yt=!0,panOnDrag:Wt=!0,onPaneClick:Hr,onPaneMouseEnter:zr,onPaneMouseMove:Gt,onPaneMouseLeave:Br,onPaneScroll:T,onPaneContextMenu:F,paneClickDistance:G=0,nodeClickDistance:W=0,children:K,onReconnect:ie,onReconnectStart:Z,onReconnectEnd:ue,onEdgeContextMenu:ce,onEdgeDoubleClick:we,onEdgeMouseEnter:he,onEdgeMouseMove:Ce,onEdgeMouseLeave:Pe,reconnectRadius:Ct=10,onNodesChange:Vr,onEdgesChange:yd,noDragClassName:xd="nodrag",noWheelClassName:vd="nowheel",noPanClassName:Si="nopan",fitView:Mi,fitViewOptions:wd,connectOnClick:bd,attributionPosition:Cd,proOptions:_d,defaultEdgeOptions:Ed,elevateNodesOnSelect:Sd,elevateEdgesOnSelect:Md,disableKeyboardA11y:Ni=!1,autoPanOnConnect:Nd,autoPanOnNodeDrag:kd,autoPanSpeed:Td,connectionRadius:Rd,isValidConnection:Dd,onError:Id,style:Ad,id:ki,nodeDragThreshold:Pd,viewport:jd,onViewportChange:$d,width:Ld,height:Od,colorMode:Fd="light",debug:Hd,...zd},Bd){const Xr=ki||"1",Vd=ow(Fd);return g.jsx("div",{"data-testid":"rf__wrapper",...zd,style:{...Ad,..._1},ref:Bd,className:xe(["react-flow",o,Vd]),id:ki,children:g.jsxs(C1,{nodes:e,edges:t,width:Ld,height:Od,fitView:Mi,nodeOrigin:lt,nodeExtent:ht,children:[g.jsx(v1,{onInit:u,onNodeClick:a,onEdgeClick:c,onNodeMouseEnter:_,onNodeMouseMove:b,onNodeMouseLeave:x,onNodeContextMenu:M,onNodeDoubleClick:j,nodeTypes:i,edgeTypes:s,connectionLineType:V,connectionLineStyle:te,connectionLineComponent:B,connectionLineContainerStyle:U,selectionKeyCode:J,selectionOnDrag:Y,selectionMode:Q,deleteKeyCode:q,multiSelectionKeyCode:ee,panActivationKeyCode:se,zoomActivationKeyCode:re,onlyRenderVisibleElements:ye,defaultViewport:zt,translateExtent:et,minZoom:ft,maxZoom:We,preventScrolling:$r,zoomOnScroll:Lr,zoomOnPinch:Or,zoomOnDoubleClick:Yt,panOnScroll:Vt,panOnScrollSpeed:Xt,panOnScrollMode:Fr,panOnDrag:Wt,onPaneClick:Hr,onPaneMouseEnter:zr,onPaneMouseMove:Gt,onPaneMouseLeave:Br,onPaneScroll:T,onPaneContextMenu:F,paneClickDistance:G,nodeClickDistance:W,onSelectionContextMenu:I,onSelectionStart:A,onSelectionEnd:k,onReconnect:ie,onReconnectStart:Z,onReconnectEnd:ue,onEdgeContextMenu:ce,onEdgeDoubleClick:we,onEdgeMouseEnter:he,onEdgeMouseMove:Ce,onEdgeMouseLeave:Pe,reconnectRadius:Ct,defaultMarkerColor:Bt,noDragClassName:xd,noWheelClassName:vd,noPanClassName:Si,rfId:Xr,disableKeyboardA11y:Ni,nodeExtent:ht,viewport:jd,onViewportChange:$d}),g.jsx(rw,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:m,onConnectStart:p,onConnectEnd:y,onClickConnectStart:w,onClickConnectEnd:v,nodesDraggable:ct,nodesConnectable:ut,nodesFocusable:De,edgesFocusable:Xe,edgesReconnectable:Ye,elementsSelectable:dt,elevateNodesOnSelect:Sd,elevateEdgesOnSelect:Md,minZoom:ft,maxZoom:We,nodeExtent:ht,onNodesChange:Vr,onEdgesChange:yd,snapToGrid:ae,snapGrid:fe,connectionMode:z,translateExtent:et,connectOnClick:bd,defaultEdgeOptions:Ed,fitView:Mi,fitViewOptions:wd,onNodesDelete:D,onEdgesDelete:$,onDelete:L,onNodeDragStart:E,onNodeDrag:N,onNodeDragStop:R,onSelectionDrag:P,onSelectionDragStart:C,onSelectionDragStop:S,onMove:d,onMoveStart:l,onMoveEnd:f,noPanClassName:Si,nodeOrigin:lt,rfId:Xr,autoPanOnConnect:Nd,autoPanOnNodeDrag:kd,autoPanSpeed:Td,onError:Id,connectionRadius:Rd,isValidConnection:Dd,selectNodesOnDrag:ve,nodeDragThreshold:Pd,onBeforeDelete:O,paneClickDistance:G,debug:Hd}),g.jsx(Jv,{onSelectionChange:H}),K,g.jsx(Uv,{proOptions:_d,position:Cd}),g.jsx(Wv,{rfId:Xr,disableKeyboardA11y:Ni})]})})}var hC=ml(E1);function Ol(){const e=pe();return h.useCallback(t=>{const{domNode:n,updateNodeInternals:r}=e.getState(),o=Array.isArray(t)?t:[t],i=new Map;o.forEach(s=>{const a=n==null?void 0:n.querySelector(`.react-flow__node[data-id="${s}"]`);a&&i.set(s,{id:s,nodeElement:a,force:!0})}),requestAnimationFrame(()=>r(i,{triggerFitView:!1}))},[])}const S1=e=>({x:e.transform[0],y:e.transform[1],zoom:e.transform[2]});function mC(){return de(S1,ge)}function pC(e){const[t,n]=h.useState(e),r=h.useCallback(o=>n(i=>fl(o,i)),[]);return[t,n,r]}function gC(e){const[t,n]=h.useState(e),r=h.useCallback(o=>n(i=>hl(o,i)),[]);return[t,n,r]}function yC({onStart:e,onChange:t,onEnd:n}){const r=pe();h.useEffect(()=>{r.setState({onViewportChangeStart:e})},[e]),h.useEffect(()=>{r.setState({onViewportChange:t})},[t]),h.useEffect(()=>{r.setState({onViewportChangeEnd:n})},[n])}function M1({dimensions:e,lineWidth:t,variant:n,className:r}){return g.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:xe(["react-flow__background-pattern",n,r])})}function N1({radius:e,className:t}){return g.jsx("circle",{cx:e,cy:e,r:e,className:xe(["react-flow__background-pattern","dots",t])})}var st;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(st||(st={}));const k1={[st.Dots]:1,[st.Lines]:1,[st.Cross]:6},T1=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Fl({id:e,variant:t=st.Dots,gap:n=20,size:r,lineWidth:o=1,offset:i=0,color:s,bgColor:a,style:c,className:u,patternClassName:d}){const l=h.useRef(null),{transform:f,patternId:m}=de(T1,ge),p=r||k1[t],y=t===st.Dots,w=t===st.Cross,v=Array.isArray(n)?n:[n,n],_=[v[0]*f[2]||1,v[1]*f[2]||1],b=p*f[2],x=Array.isArray(i)?i:[i,i],M=w?[b,b]:_,j=[x[0]*f[2]||1+M[0]/2,x[1]*f[2]||1+M[1]/2],E=`${m}${e||""}`;return g.jsxs("svg",{className:xe(["react-flow__background",u]),style:{...c,...Pr,"--xy-background-color-props":a,"--xy-background-pattern-color-props":s},ref:l,"data-testid":"rf__background",children:[g.jsx("pattern",{id:E,x:f[0]%_[0],y:f[1]%_[1],width:_[0],height:_[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${j[0]},-${j[1]})`,children:y?g.jsx(N1,{radius:b/2,className:d}):g.jsx(M1,{dimensions:M,lineWidth:o,variant:t,className:d})}),g.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${E})`})]})}Fl.displayName="Background";const xC=h.memo(Fl);function R1(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:g.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function D1(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:g.jsx("path",{d:"M0 0h32v4.2H0z"})})}function I1(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:g.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function A1(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:g.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function P1(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:g.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Vn({children:e,className:t,...n}){return g.jsx("button",{type:"button",className:xe(["react-flow__controls-button",t]),...n,children:e})}const j1=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function Hl({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:i,onZoomOut:s,onFitView:a,onInteractiveChange:c,className:u,children:d,position:l="bottom-left",orientation:f="vertical","aria-label":m="React Flow controls"}){const p=pe(),{isInteractive:y,minZoomReached:w,maxZoomReached:v}=de(j1,ge),{zoomIn:_,zoomOut:b,fitView:x}=bi(),M=()=>{_(),i==null||i()},j=()=>{b(),s==null||s()},E=()=>{x(o),a==null||a()},N=()=>{p.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),c==null||c(!y)},R=f==="horizontal"?"horizontal":"vertical";return g.jsxs(wi,{className:xe(["react-flow__controls",R,u]),position:l,style:e,"data-testid":"rf__controls","aria-label":m,children:[t&&g.jsxs(g.Fragment,{children:[g.jsx(Vn,{onClick:M,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:v,children:g.jsx(R1,{})}),g.jsx(Vn,{onClick:j,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:w,children:g.jsx(D1,{})})]}),n&&g.jsx(Vn,{className:"react-flow__controls-fitview",onClick:E,title:"fit view","aria-label":"fit view",children:g.jsx(I1,{})}),r&&g.jsx(Vn,{className:"react-flow__controls-interactive",onClick:N,title:"toggle interactivity","aria-label":"toggle interactivity",children:y?g.jsx(P1,{}):g.jsx(A1,{})}),d]})}Hl.displayName="Controls";const vC=h.memo(Hl);function $1({id:e,x:t,y:n,width:r,height:o,style:i,color:s,strokeColor:a,strokeWidth:c,className:u,borderRadius:d,shapeRendering:l,selected:f,onClick:m}){const{background:p,backgroundColor:y}=i||{},w=s||p||y;return g.jsx("rect",{className:xe(["react-flow__minimap-node",{selected:f},u]),x:t,y:n,rx:d,ry:d,width:r,height:o,style:{fill:w,stroke:a,strokeWidth:c},shapeRendering:l,onClick:m?v=>m(v,e):void 0})}const L1=h.memo($1),O1=e=>e.nodes.map(t=>t.id),lo=e=>e instanceof Function?e:()=>e;function F1({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o,nodeComponent:i=L1,onClick:s}){const a=de(O1,ge),c=lo(t),u=lo(e),d=lo(n),l=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return g.jsx(g.Fragment,{children:a.map(f=>g.jsx(z1,{id:f,nodeColorFunc:c,nodeStrokeColorFunc:u,nodeClassNameFunc:d,nodeBorderRadius:r,nodeStrokeWidth:o,NodeComponent:i,onClick:s,shapeRendering:l},f))})}function H1({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:o,nodeStrokeWidth:i,shapeRendering:s,NodeComponent:a,onClick:c}){const{node:u,x:d,y:l,width:f,height:m}=de(p=>{const y=p.nodeLookup.get(e),{x:w,y:v}=y.internals.positionAbsolute,{width:_,height:b}=Je(y);return{node:y,x:w,y:v,width:_,height:b}},ge);return!u||u.hidden||!Hu(u)?null:g.jsx(a,{x:d,y:l,width:f,height:m,style:u.style,selected:!!u.selected,className:r(u),color:t(u),borderRadius:o,strokeColor:n(u),strokeWidth:i,shapeRendering:s,onClick:c,id:u.id})}const z1=h.memo(H1);var B1=h.memo(F1);const V1=200,X1=150,Y1=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?Ou(Tn(e.nodeLookup),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}},W1="react-flow__minimap-desc";function zl({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:o="",nodeBorderRadius:i=5,nodeStrokeWidth:s,nodeComponent:a,bgColor:c,maskColor:u,maskStrokeColor:d,maskStrokeWidth:l,position:f="bottom-right",onClick:m,onNodeClick:p,pannable:y=!1,zoomable:w=!1,ariaLabel:v="React Flow mini map",inversePan:_,zoomStep:b=10,offsetScale:x=5}){const M=pe(),j=h.useRef(null),{boundingRect:E,viewBB:N,rfId:R,panZoom:D,translateExtent:$,flowWidth:L,flowHeight:H}=de(Y1,ge),C=(e==null?void 0:e.width)??V1,P=(e==null?void 0:e.height)??X1,S=E.width/C,I=E.height/P,A=Math.max(S,I),k=A*C,O=A*P,z=x*A,V=E.x-(k-E.width)/2-z,te=E.y-(O-E.height)/2-z,B=k+z*2,U=O+z*2,q=`${W1}-${R}`,J=h.useRef(0),Y=h.useRef();J.current=A,h.useEffect(()=>{if(j.current&&D)return Y.current=av({domNode:j.current,panZoom:D,getTransform:()=>M.getState().transform,getViewScale:()=>J.current}),()=>{var ee;(ee=Y.current)==null||ee.destroy()}},[D]),h.useEffect(()=>{var ee;(ee=Y.current)==null||ee.update({translateExtent:$,width:L,height:H,inversePan:_,pannable:y,zoomStep:b,zoomable:w})},[y,w,_,b,$,L,H]);const Q=m?ee=>{var fe;const[re,ae]=((fe=Y.current)==null?void 0:fe.pointer(ee))||[0,0];m(ee,{x:re,y:ae})}:void 0,se=p?h.useCallback((ee,re)=>{const ae=M.getState().nodeLookup.get(re);p(ee,ae)},[]):void 0;return g.jsx(wi,{position:f,style:{...e,"--xy-minimap-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-width-props":typeof l=="number"?l*A:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof s=="string"?s:void 0},className:xe(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:g.jsxs("svg",{width:C,height:P,viewBox:`${V} ${te} ${B} ${U}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":q,ref:j,onClick:Q,children:[v&&g.jsx("title",{id:q,children:v}),g.jsx(B1,{onClick:se,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:o,nodeStrokeWidth:s,nodeComponent:a}),g.jsx("path",{className:"react-flow__minimap-mask",d:`M${V-z},${te-z}h${B+z*2}v${U+z*2}h${-B-z*2}z
        M${N.x},${N.y}h${N.width}v${N.height}h${-N.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}zl.displayName="MiniMap";const wC=h.memo(zl);function G1({nodeId:e,position:t,variant:n=It.Handle,className:r,style:o={},children:i,color:s,minWidth:a=10,minHeight:c=10,maxWidth:u=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:l=!1,shouldResize:f,onResizeStart:m,onResize:p,onResizeEnd:y}){const w=xl(),v=typeof e=="string"?e:w,_=pe(),b=h.useRef(null),x=n===It.Line?"right":"bottom-right",M=t??x,j=h.useRef(null);h.useEffect(()=>{if(!(!b.current||!v))return j.current||(j.current=Ev({domNode:b.current,nodeId:v,getStoreItems:()=>{const{nodeLookup:D,transform:$,snapGrid:L,snapToGrid:H,nodeOrigin:C,domNode:P}=_.getState();return{nodeLookup:D,transform:$,snapGrid:L,snapToGrid:H,nodeOrigin:C,paneDomNode:P}},onChange:(D,$)=>{const{triggerNodeChanges:L,nodeLookup:H,parentLookup:C,nodeOrigin:P}=_.getState(),S=[],I={x:D.x,y:D.y},A=H.get(v);if(A&&A.expandParent&&A.parentId){const k=A.origin??P,O=D.width??A.measured.width,z=D.height??A.measured.height,V={id:A.id,parentId:A.parentId,rect:{width:O,height:z,...zu({x:D.x??A.position.x,y:D.y??A.position.y},{width:O,height:z},A.parentId,H,k)}},te=vi([V],H,C,P);S.push(...te),I.x=D.x?Math.max(k[0]*O,D.x):void 0,I.y=D.y?Math.max(k[1]*z,D.y):void 0}if(I.x!==void 0&&I.y!==void 0){const k={id:v,type:"position",position:{...I}};S.push(k)}if(D.width!==void 0&&D.height!==void 0){const k={id:v,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:D.width,height:D.height}};S.push(k)}for(const k of $){const O={...k,type:"position"};S.push(O)}L(S)},onEnd:()=>{const D={id:v,type:"dimensions",resizing:!1};_.getState().triggerNodeChanges([D])}})),j.current.update({controlPosition:M,boundaries:{minWidth:a,minHeight:c,maxWidth:u,maxHeight:d},keepAspectRatio:l,onResizeStart:m,onResize:p,onResizeEnd:y,shouldResize:f}),()=>{var D;(D=j.current)==null||D.destroy()}},[M,a,c,u,d,l,m,p,y,f]);const E=M.split("-"),N=n===It.Line?"borderColor":"backgroundColor",R=s?{...o,[N]:s}:o;return g.jsx("div",{className:xe(["react-flow__resize-control","nodrag",...E,n,r]),ref:b,style:R,children:i})}const qs=h.memo(G1);function U1({nodeId:e,isVisible:t=!0,handleClassName:n,handleStyle:r,lineClassName:o,lineStyle:i,color:s,minWidth:a=10,minHeight:c=10,maxWidth:u=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:l=!1,shouldResize:f,onResizeStart:m,onResize:p,onResizeEnd:y}){return t?g.jsxs(g.Fragment,{children:[yv.map(w=>g.jsx(qs,{className:o,style:i,nodeId:e,position:w,variant:It.Line,color:s,minWidth:a,minHeight:c,maxWidth:u,maxHeight:d,onResizeStart:m,keepAspectRatio:l,shouldResize:f,onResize:p,onResizeEnd:y},w)),gv.map(w=>g.jsx(qs,{className:n,style:r,nodeId:e,position:w,color:s,minWidth:a,minHeight:c,maxWidth:u,maxHeight:d,onResizeStart:m,keepAspectRatio:l,shouldResize:f,onResize:p,onResizeEnd:y},w))]}):null}const K1=oe.object({id:oe.string(),name:oe.string(),unique:oe.boolean(),fieldIds:oe.array(oe.string()),createdAt:oe.number()}),q1=({aggregatedIndexes:e,fields:t})=>e.map(n=>({id:Ue(),name:n.name,unique:!!n.unique,fieldIds:n.columns.sort((r,o)=>r.position-o.position).map(r=>{var o;return(o=t.find(i=>i.name===r.name))==null?void 0:o.id}).filter(r=>r!==void 0),createdAt:Date.now()})),Z1=[{name:"uint8",id:"uint8"},{name:"uint16",id:"uint16"},{name:"uint32",id:"uint32"},{name:"uint64",id:"uint64"},{name:"uint128",id:"uint128"},{name:"uint256",id:"uint256"},{name:"int8",id:"int8"},{name:"int16",id:"int16"},{name:"int32",id:"int32"},{name:"int64",id:"int64"},{name:"int128",id:"int128"},{name:"int256",id:"int256"},{name:"float32",id:"float32"},{name:"float64",id:"float64"},{name:"tinyint",id:"tinyint"},{name:"int1",id:"int1"},{name:"byte",id:"byte"},{name:"tinyint signed",id:"tinyint_signed"},{name:"int1 signed",id:"int1_signed"},{name:"smallint",id:"smallint"},{name:"smallint signed",id:"smallint_signed"},{name:"int",id:"int"},{name:"integer",id:"integer"},{name:"mediumint",id:"mediumint"},{name:"mediumint signed",id:"mediumint_signed"},{name:"int signed",id:"int_signed"},{name:"integer signed",id:"integer_signed"},{name:"bigint",id:"bigint"},{name:"signed",id:"signed"},{name:"bigint signed",id:"bigint_signed"},{name:"time",id:"time"},{name:"float",id:"float"},{name:"double",id:"double"},{name:"real",id:"real"},{name:"single",id:"single"},{name:"double precision",id:"double_precision"},{name:"longtext",id:"longtext"},{name:"mediumtext",id:"mediumtext"},{name:"tinytext",id:"tinytext"},{name:"text",id:"text"},{name:"longblob",id:"longblob"},{name:"mediumblob",id:"mediumblob"},{name:"tinyblob",id:"tinyblob"},{name:"blob",id:"blob"},{name:"varchar",id:"varchar",hasCharMaxLength:!0},{name:"char",id:"char",hasCharMaxLength:!0},{name:"char large object",id:"char_large_object"},{name:"char varying",id:"char_varying",hasCharMaxLength:!0},{name:"character large object",id:"character_large_object"},{name:"character varying",id:"character_varying",hasCharMaxLength:!0},{name:"nchar large object",id:"nchar_large_object"},{name:"nchar varying",id:"nchar_varying",hasCharMaxLength:!0},{name:"national character large object",id:"national_character_large_object"},{name:"national character varying",id:"national_character_varying",hasCharMaxLength:!0},{name:"national char varying",id:"national_char_varying",hasCharMaxLength:!0},{name:"national character",id:"national_character",hasCharMaxLength:!0},{name:"national char",id:"national_char",hasCharMaxLength:!0},{name:"binary large object",id:"binary_large_object"},{name:"binary varying",id:"binary_varying",hasCharMaxLength:!0},{name:"fixedstring",id:"fixedstring",hasCharMaxLength:!0},{name:"string",id:"string"},{name:"date",id:"date"},{name:"date32",id:"date32"},{name:"datetime",id:"datetime"},{name:"datetime64",id:"datetime64"},{name:"object",id:"object"},{name:"json",id:"json"},{name:"uuid",id:"uuid"},{name:"boolean",id:"boolean"},{name:"enum",id:"enum"},{name:"lowcardinality",id:"lowcardinality"},{name:"array",id:"array"},{name:"tuple",id:"tuple"},{name:"map",id:"map"},{name:"simpleaggregatefunction",id:"simpleaggregatefunction"},{name:"aggregatefunction",id:"aggregatefunction"},{name:"nested",id:"nested"},{name:"ipv4",id:"ipv4"},{name:"ipv6",id:"ipv6"},{name:"point",id:"point"},{name:"ring",id:"ring"},{name:"polygon",id:"polygon"},{name:"multipolygon",id:"multipolygon"},{name:"expression",id:"expression"},{name:"set",id:"set"},{name:"nothing",id:"nothing"},{name:"interval",id:"interval"}],Q1=[{name:"bigint",id:"bigint"},{name:"binary",id:"binary",hasCharMaxLength:!0},{name:"blob",id:"blob"},{name:"boolean",id:"boolean"},{name:"char",id:"char",hasCharMaxLength:!0},{name:"date",id:"date"},{name:"datetime",id:"datetime"},{name:"decimal",id:"decimal"},{name:"double",id:"double"},{name:"enum",id:"enum"},{name:"float",id:"float"},{name:"int",id:"int"},{name:"json",id:"json"},{name:"numeric",id:"numeric"},{name:"real",id:"real"},{name:"set",id:"set"},{name:"smallint",id:"smallint"},{name:"text",id:"text"},{name:"time",id:"time"},{name:"timestamp",id:"timestamp"},{name:"uuid",id:"uuid"},{name:"varbinary",id:"varbinary",hasCharMaxLength:!0},{name:"varchar",id:"varchar",hasCharMaxLength:!0}],J1=[{name:"tinyint",id:"tinyint"},{name:"smallint",id:"smallint"},{name:"mediumint",id:"mediumint"},{name:"int",id:"int"},{name:"bigint",id:"bigint"},{name:"decimal",id:"decimal"},{name:"numeric",id:"numeric"},{name:"float",id:"float"},{name:"double",id:"double"},{name:"bit",id:"bit"},{name:"bool",id:"bool"},{name:"boolean",id:"boolean"},{name:"date",id:"date"},{name:"datetime",id:"datetime"},{name:"timestamp",id:"timestamp"},{name:"time",id:"time"},{name:"year",id:"year"},{name:"char",id:"char",hasCharMaxLength:!0},{name:"varchar",id:"varchar",hasCharMaxLength:!0},{name:"binary",id:"binary",hasCharMaxLength:!0},{name:"varbinary",id:"varbinary",hasCharMaxLength:!0},{name:"tinyblob",id:"tinyblob"},{name:"blob",id:"blob"},{name:"mediumblob",id:"mediumblob"},{name:"longblob",id:"longblob"},{name:"tinytext",id:"tinytext"},{name:"text",id:"text"},{name:"mediumtext",id:"mediumtext"},{name:"longtext",id:"longtext"},{name:"enum",id:"enum"},{name:"set",id:"set"},{name:"geometry",id:"geometry"},{name:"point",id:"point"},{name:"linestring",id:"linestring"},{name:"polygon",id:"polygon"},{name:"multipoint",id:"multipoint"},{name:"multilinestring",id:"multilinestring"},{name:"multipolygon",id:"multipolygon"},{name:"geometrycollection",id:"geometrycollection"},{name:"json",id:"json"},{name:"uuid",id:"uuid"}],eb=[{name:"tinyint",id:"tinyint"},{name:"smallint",id:"smallint"},{name:"mediumint",id:"mediumint"},{name:"int",id:"int"},{name:"bigint",id:"bigint"},{name:"decimal",id:"decimal"},{name:"numeric",id:"numeric"},{name:"float",id:"float"},{name:"double",id:"double"},{name:"bit",id:"bit"},{name:"bool",id:"bool"},{name:"boolean",id:"boolean"},{name:"date",id:"date"},{name:"datetime",id:"datetime"},{name:"timestamp",id:"timestamp"},{name:"time",id:"time"},{name:"year",id:"year"},{name:"char",id:"char",hasCharMaxLength:!0},{name:"varchar",id:"varchar",hasCharMaxLength:!0},{name:"binary",id:"binary",hasCharMaxLength:!0},{name:"varbinary",id:"varbinary",hasCharMaxLength:!0},{name:"tinyblob",id:"tinyblob"},{name:"blob",id:"blob"},{name:"mediumblob",id:"mediumblob"},{name:"longblob",id:"longblob"},{name:"tinytext",id:"tinytext"},{name:"text",id:"text"},{name:"mediumtext",id:"mediumtext"},{name:"longtext",id:"longtext"},{name:"enum",id:"enum"},{name:"set",id:"set"},{name:"geometry",id:"geometry"},{name:"point",id:"point"},{name:"linestring",id:"linestring"},{name:"polygon",id:"polygon"},{name:"multipoint",id:"multipoint"},{name:"multilinestring",id:"multilinestring"},{name:"multipolygon",id:"multipolygon"},{name:"geometrycollection",id:"geometrycollection"},{name:"json",id:"json"}],Zs=[{name:"smallint",id:"smallint"},{name:"integer",id:"integer"},{name:"bigint",id:"bigint"},{name:"decimal",id:"decimal"},{name:"numeric",id:"numeric"},{name:"real",id:"real"},{name:"double precision",id:"double_precision"},{name:"smallserial",id:"smallserial"},{name:"serial",id:"serial"},{name:"bigserial",id:"bigserial"},{name:"money",id:"money"},{name:"char",id:"char",hasCharMaxLength:!0},{name:"varchar",id:"varchar",hasCharMaxLength:!0},{name:"character varying",id:"character_varying",hasCharMaxLength:!0},{name:"text",id:"text"},{name:"bytea",id:"bytea"},{name:"date",id:"date"},{name:"timestamp",id:"timestamp"},{name:"timestamp with time zone",id:"timestamp_with_time_zone"},{name:"timestamp without time zone",id:"timestamp_without_time_zone"},{name:"time",id:"time"},{name:"time with time zone",id:"time_with_time_zone"},{name:"time without time zone",id:"time_without_time_zone"},{name:"interval",id:"interval"},{name:"boolean",id:"boolean"},{name:"enum",id:"enum"},{name:"point",id:"point"},{name:"line",id:"line"},{name:"lseg",id:"lseg"},{name:"box",id:"box"},{name:"path",id:"path"},{name:"polygon",id:"polygon"},{name:"circle",id:"circle"},{name:"cidr",id:"cidr"},{name:"inet",id:"inet"},{name:"macaddr",id:"macaddr"},{name:"macaddr8",id:"macaddr8"},{name:"bit",id:"bit"},{name:"bit varying",id:"bit_varying"},{name:"tsvector",id:"tsvector"},{name:"tsquery",id:"tsquery"},{name:"uuid",id:"uuid"},{name:"xml",id:"xml"},{name:"json",id:"json"},{name:"jsonb",id:"jsonb"},{name:"array",id:"array"},{name:"int4range",id:"int4range"},{name:"int8range",id:"int8range"},{name:"numrange",id:"numrange"},{name:"tsrange",id:"tsrange"},{name:"tstzrange",id:"tstzrange"},{name:"daterange",id:"daterange"},{name:"oid",id:"oid"},{name:"regproc",id:"regproc"},{name:"regprocedure",id:"regprocedure"},{name:"regoper",id:"regoper"},{name:"regoperator",id:"regoperator"},{name:"regclass",id:"regclass"},{name:"regtype",id:"regtype"},{name:"regrole",id:"regrole"},{name:"regnamespace",id:"regnamespace"},{name:"regconfig",id:"regconfig"},{name:"regdictionary",id:"regdictionary"},{name:"user-defined",id:"user-defined"}],tb=[{name:"bigint",id:"bigint"},{name:"bit",id:"bit"},{name:"decimal",id:"decimal"},{name:"int",id:"int"},{name:"money",id:"money"},{name:"numeric",id:"numeric"},{name:"smallint",id:"smallint"},{name:"smallmoney",id:"smallmoney"},{name:"tinyint",id:"tinyint"},{name:"float",id:"float"},{name:"real",id:"real"},{name:"date",id:"date"},{name:"datetime2",id:"datetime2"},{name:"datetime",id:"datetime"},{name:"datetimeoffset",id:"datetimeoffset"},{name:"smalldatetime",id:"smalldatetime"},{name:"time",id:"time"},{name:"char",id:"char",hasCharMaxLength:!0},{name:"varchar",id:"varchar",hasCharMaxLength:!0},{name:"text",id:"text"},{name:"nchar",id:"nchar",hasCharMaxLength:!0},{name:"nvarchar",id:"nvarchar",hasCharMaxLength:!0},{name:"ntext",id:"ntext"},{name:"binary",id:"binary",hasCharMaxLength:!0},{name:"varbinary",id:"varbinary",hasCharMaxLength:!0},{name:"image",id:"image"},{name:"cursor",id:"cursor"},{name:"hierarchyid",id:"hierarchyid"},{name:"sql_variant",id:"sql_variant"},{name:"timestamp",id:"timestamp"},{name:"uniqueidentifier",id:"uniqueidentifier"},{name:"xml",id:"xml"},{name:"geometry",id:"geometry"},{name:"geography",id:"geography"},{name:"json",id:"json"}],nb=[{name:"integer",id:"integer"},{name:"real",id:"real"},{name:"numeric",id:"numeric"},{name:"text",id:"text"},{name:"blob",id:"blob"},{name:"json",id:"json"},{name:"date",id:"date"},{name:"datetime",id:"datetime"},{name:"int",id:"int"},{name:"float",id:"float"},{name:"boolean",id:"boolean"},{name:"varchar",id:"varchar",hasCharMaxLength:!0},{name:"decimal",id:"decimal"}],rb=oe.object({id:oe.string(),name:oe.string()}),Bl={[me.GENERIC]:Q1,[me.POSTGRESQL]:Zs,[me.MYSQL]:eb,[me.SQL_SERVER]:tb,[me.MARIADB]:J1,[me.SQLITE]:nb,[me.CLICKHOUSE]:Z1,[me.COCKROACHDB]:Zs},ob={[me.POSTGRESQL]:{serial:["integer"],smallserial:["smallint"],bigserial:["bigint"]},[me.MYSQL]:{int:["integer"],tinyint:["boolean"]},[me.SQL_SERVER]:{},[me.MARIADB]:{},[me.SQLITE]:{},[me.CLICKHOUSE]:{},[me.COCKROACHDB]:{},[me.GENERIC]:{}};function bC(e,t,n){var o,i;if(e.id===t.id)return!0;const r=ob[n]||{};return((o=r[e.id])==null?void 0:o.includes(t.id))||((i=r[t.id])==null?void 0:i.includes(e.id))}const ib=Object.values(Bl).flat(),CC=e=>({id:e.id,name:e.name}),_C=(e,t)=>(t?Bl[t]:ib).find(r=>r.id===e),sb=oe.object({id:oe.string(),name:oe.string(),type:rb,primaryKey:oe.boolean(),unique:oe.boolean(),nullable:oe.boolean(),createdAt:oe.number(),characterMaximumLength:oe.string().optional(),precision:oe.number().optional(),scale:oe.number().optional(),default:oe.string().optional(),collation:oe.string().optional(),comments:oe.string().optional()}),ab=({columns:e,tableSchema:t,tableInfo:n,primaryKeys:r,aggregatedIndexes:o})=>{const i=e.filter(c=>kt(c.schema)===t&&c.table===n.table).reduce((c,u)=>(c.has(u.name)||c.set(u.name,u),c),new Map),s=Array.from(i.values()).sort((c,u)=>c.ordinal_position-u.ordinal_position),a=r.filter(c=>c.table===n.table&&kt(c.schema)===t).map(c=>c.column.trim());return s.map(c=>{var u,d;return{id:Ue(),name:c.name,type:{id:c.type.split(" ").join("_").toLowerCase(),name:c.type.toLowerCase()},primaryKey:a.includes(c.name),unique:Object.values(o).some(l=>l.unique&&l.columns.length===1&&l.columns[0].name===c.name),nullable:!!c.nullable,...c.character_maximum_length&&c.character_maximum_length!=="null"?{characterMaximumLength:c.character_maximum_length}:{},...(u=c.precision)!=null&&u.precision?{precision:c.precision.precision}:{},...(d=c.precision)!=null&&d.scale?{scale:c.precision.scale}:{},...c.default?{default:c.default}:{},...c.collation?{collation:c.collation}:{},createdAt:Date.now(),comments:c.comment?c.comment:void 0}})},EC=oe.object({schema:oe.string(),table:oe.string(),name:oe.string(),column:oe.string(),index_type:oe.string(),cardinality:oe.number().nullable().optional(),size:oe.number().nullable().optional(),unique:oe.union([oe.boolean(),oe.number()]),direction:oe.string(),column_position:oe.number()}),cb=({tableInfo:e,tableSchema:t,indexes:n})=>{const r=n.filter(o=>{const i=kt(o.schema);return o.table===e.table&&i===t});return Object.values(r.reduce((o,i)=>{const s=`${i.schema}_${i.name}`;return o[s]?o[s].columns.push({name:i.column,position:i.column_position}):o[s]={...i,columns:[{name:i.column,position:i.column_position}]},o},{}))},SC=oe.object({id:oe.string(),name:oe.string(),schema:oe.string().optional(),x:oe.number(),y:oe.number(),fields:oe.array(sb),indexes:oe.array(K1),color:oe.string(),isView:oe.boolean(),isMaterializedView:oe.boolean().optional(),createdAt:oe.number(),width:oe.number().optional(),comments:oe.string().optional(),hidden:oe.boolean().optional(),order:oe.number().optional()}),MC=(e,t)=>!t||!e.schema||t.includes(ia(e.schema)),ub=(e,t)=>{if(!t)return"";let n;return e===me.SQL_SERVER?n=lf(t):n=df(t),n},NC=({databaseMetadata:e,databaseType:t})=>{const{tables:n,pk_info:r,columns:o,indexes:i,views:s}=e;return n.map(a=>{const c=kt(a.schema),u=cb({tableInfo:a,tableSchema:c,indexes:i}),d=ab({aggregatedIndexes:u,columns:o,primaryKeys:r,tableInfo:a,tableSchema:c}),l=q1({aggregatedIndexes:u,fields:d}),f=s.some(p=>kt(p.schema)===c&&p.view_name===a.table),m=s.some(p=>kt(p.schema)===c&&p.view_name===a.table&&ub(t,p.view_definition).toLowerCase().includes("materialized"));return{id:Ue(),name:a.table,schema:c,x:Math.random()*1e3,y:Math.random()*800,fields:d,indexes:l,color:m?hf:f?mf:oa(),isView:f,isMaterializedView:m,createdAt:Date.now(),comments:a.comment?a.comment:void 0}})},kC=({relationships:e,tables:t,mode:n="all"})=>{const r=yo(t),o=yo(e),i=s=>{const m=new Map;o.forEach(x=>{m.has(x.sourceTableId)||m.set(x.sourceTableId,new Set),m.has(x.targetTableId)||m.set(x.targetTableId,new Set),m.get(x.sourceTableId).add(x.targetTableId),m.get(x.targetTableId).add(x.sourceTableId)});const p=[...s].sort((x,M)=>{var j,E;return(((j=m.get(M.id))==null?void 0:j.size)||0)-(((E=m.get(x.id))==null?void 0:E.size)||0)}),y=new Set,w=new Map,v=(x,M,j)=>{for(const[E,N]of w)if(E!==j&&Math.abs(x-N.x)<300&&Math.abs(M-N.y)<400)return!0;return!1},_=(x,M,j)=>{const E=Math.max(200,300)/2;let N=0,R=0,D=0;const $=1e3;for(;D<$;){const L=x+R*Math.cos(N),H=M+R*Math.sin(N);if(!v(L,H,j))return{x:L,y:H};N+=Math.PI/4,N>=2*Math.PI&&(N=0,R+=E),D++}return{x:x+R*Math.cos(N),y:M+R*Math.sin(N)}},b=(x,M,j)=>{if(y.has(x.id))return;const{x:E,y:N}=_(M,j,x.id);x.x=E,x.y=N,w.set(x.id,{x:x.x,y:x.y}),y.add(x.id);const R=m.get(x.id)||new Set;let D=0;const $=2*Math.PI/R.size;R.forEach(L=>{if(!y.has(L)){const H=s.find(C=>C.id===L);if(H){const C=E+Math.cos(D)*400,P=N+Math.sin(D)*(300+100*2);b(H,C,P),D+=$}}})};p.forEach((x,M)=>{if(!y.has(x.id)){const j=Math.floor(M/6),N=100+M%6*(200+100*2),R=100+j*(300+100*2);b(x,N,R)}}),s.forEach(x=>{const M=w.get(x.id);M&&(x.x=M.x,x.y=M.y)})};if(n==="perSchema"){const s=r.reduce((a,c)=>{const u=c.schema||"default";return a[u]||(a[u]=[]),a[u].push(c),a},{});Object.values(s).forEach(i)}else i(r);return r},Vl=()=>({graph:new Map,lastUpdated:Date.now()}),Qs=(e,t)=>(e.graph.has(t)||e.graph.set(t,[]),{...e,lastUpdated:Date.now()}),lb=(e,t,n)=>{var r,o,i,s;return e.graph.has(t)||Qs(e,t),e.graph.has(n)||Qs(e,n),(r=e.graph.get(t))!=null&&r.includes(n)||(o=e.graph.get(t))==null||o.push(n),(i=e.graph.get(n))!=null&&i.includes(t)||(s=e.graph.get(n))==null||s.push(t),{...e,lastUpdated:Date.now()}},TC=(e,t)=>(e.graph.delete(t),e.graph.forEach(n=>{const r=n.indexOf(t);r!==-1&&n.splice(r,1)}),{...e,lastUpdated:Date.now()}),db=(e,t,n)=>{var r,o,i,s;if(e.graph.has(t)){const a=((r=e.graph.get(t))==null?void 0:r.indexOf(n))??-1;a!==-1&&((o=e.graph.get(t))==null||o.splice(a,1))}if(e.graph.has(n)){const a=((i=e.graph.get(n))==null?void 0:i.indexOf(t))??-1;a!==-1&&((s=e.graph.get(n))==null||s.splice(a,1))}return{...e,lastUpdated:Date.now()}},fb=h.createContext({reorderTables:X,fitView:X,setOverlapGraph:X,overlapGraph:Vl()}),RC=()=>h.useContext(fb),Js="left_rel_",ea="right_rel_",fo="target_rel_",Xl=_e.memo(({field:e,focused:t,tableNodeId:n,highlighted:r,visible:o,isConnectable:i})=>{const{removeField:s,relationships:a,readonly:c,updateField:u}=xr(),[d,l]=h.useState(!1),[f,m]=h.useState(e.name),p=_e.useRef(null),y=Ol(),w=_i(),v=h.useMemo(()=>{var I,A;return w.inProgress&&w.fromNode.id!==n&&(((I=w.fromHandle.id)==null?void 0:I.startsWith(ea))||((A=w.fromHandle.id)==null?void 0:A.startsWith(Js)))},[w,n]),_=h.useMemo(()=>a.filter(I=>I.targetTableId===n&&I.targetFieldId===e.id).length,[a,n,e.id]),b=h.useRef(_);h.useEffect(()=>{b.current!==_&&(y(n),b.current=_)},[n,y,_]);const x=h.useCallback(()=>{d&&(f.trim()&&u(n,e.id,{name:f.trim()}),l(!1))},[f,e.id,u,d,n]),M=h.useCallback(()=>{l(!1),m(e.name)},[e.name]);Xa(p,x),tr("Enter",x),tr("Escape",M);const{checkIfFieldRemoved:j,checkIfNewField:E,getFieldNewName:N,getFieldNewType:R,checkIfFieldHasChange:D}=or(),$=h.useMemo(()=>j({fieldId:e.id}),[j,e.id]),L=h.useMemo(()=>E({fieldId:e.id}),[E,e.id]),H=h.useMemo(()=>N({fieldId:e.id}),[N,e.id]),C=h.useMemo(()=>R({fieldId:e.id}),[R,e.id]),P=h.useMemo(()=>D({fieldId:e.id,tableId:n}),[D,e.id,n]),S=I=>{I.stopPropagation(),l(!0)};return g.jsxs("div",{className:Ee("group relative flex h-8 items-center justify-between gap-1 border-t px-3 text-sm last:rounded-b-[6px] hover:bg-slate-100 dark:hover:bg-slate-800","transition-all duration-200 ease-in-out",{"bg-pink-100 dark:bg-pink-900":r,"max-h-8 opacity-100":o,"z-0 max-h-0 overflow-hidden opacity-0":!o,"bg-sky-200 dark:bg-sky-800 hover:bg-sky-100 dark:hover:bg-sky-900 border-sky-300 dark:border-sky-700":P&&!$&&!L,"bg-red-200 dark:bg-red-800 hover:bg-red-100 dark:hover:bg-red-900 border-red-300 dark:border-red-700":$,"bg-green-200 dark:bg-green-800 hover:bg-green-100 dark:hover:bg-green-900 border-green-300 dark:border-green-700":L}),children:[i?g.jsxs(g.Fragment,{children:[g.jsx(Oe,{id:`${ea}${e.id}`,className:`!h-4 !w-4 !border-2 !bg-pink-600 ${!t||c?"!invisible":""}`,position:ne.Right,type:"source"}),g.jsx(Oe,{id:`${Js}${e.id}`,className:`!h-4 !w-4 !border-2 !bg-pink-600 ${!t||c?"!invisible":""}`,position:ne.Left,type:"source"})]}):null,(!w.inProgress||v)&&i&&g.jsxs(g.Fragment,{children:[Array.from({length:_},(I,A)=>A).map(I=>g.jsx(Oe,{id:`${fo}${I}_${e.id}`,className:"!invisible",position:ne.Left,type:"target"},`${fo}${I}_${e.id}`)),g.jsx(Oe,{id:`${fo}${_}_${e.id}`,className:v?"!absolute !left-0 !top-0 !h-full !w-full !transform-none !rounded-none !border-none !opacity-0":"!invisible",position:ne.Left,type:"target"})]}),g.jsxs("div",{className:Ee("flex items-center gap-1 truncate text-left",{"font-semibold":e.primaryKey||e.unique,"w-full":d}),children:[$?g.jsx(fa,{className:"size-3.5 text-red-800 dark:text-red-200"}):L?g.jsx(ha,{className:"size-3.5 text-green-800 dark:text-green-200"}):P?g.jsx(da,{className:"size-3.5 shrink-0 text-sky-800 dark:text-sky-200"}):null,d&&!c?g.jsxs(g.Fragment,{children:[g.jsx(Uo,{ref:p,onBlur:x,placeholder:e.name,autoFocus:!0,type:"text",value:f,onClick:I=>I.stopPropagation(),onChange:I=>m(I.target.value),className:"h-5 w-full border-[0.5px] border-blue-400 bg-slate-100 focus-visible:ring-0 dark:bg-slate-900"}),g.jsx(on,{variant:"ghost",className:"size-6 p-0 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-200",onClick:x,children:g.jsx(la,{className:"size-4"})})]}):g.jsx("span",{className:Ee("truncate",{"text-red-800 font-normal dark:text-red-200":$,"text-green-800 font-normal dark:text-green-200":L,"text-sky-800 font-normal dark:text-sky-200":P&&!$&&!L}),onDoubleClick:S,children:H?g.jsxs(g.Fragment,{children:[e.name," ",g.jsx("span",{className:"font-medium",children:""})," ",H]}):e.name}),e.comments&&!d?g.jsxs(Zt,{children:[g.jsx(Qt,{asChild:!0,children:g.jsx("div",{className:"shrink-0 cursor-pointer text-muted-foreground",children:g.jsx(Pf,{size:14})})}),g.jsx(Jt,{children:e.comments})]}):null]}),d?null:g.jsxs("div",{className:"flex max-w-[35%] justify-end gap-1.5 truncate hover:shrink-0",children:[e.primaryKey?g.jsx("div",{className:Ee("text-muted-foreground",c?"":"group-hover:hidden",$?"text-red-800 dark:text-red-200":"",L?"text-green-800 dark:text-green-200":"",P&&!$&&!L?"text-sky-800 dark:text-sky-200":""),children:g.jsx(Af,{size:14})}):null,g.jsxs("div",{className:Ee("content-center truncate text-right text-xs text-muted-foreground",c?"":"group-hover:hidden",$?"text-red-800 dark:text-red-200":"",L?"text-green-800 dark:text-green-200":"",P&&!$&&!L?"text-sky-800 dark:text-sky-200":""),children:[C?g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"line-through",children:e.type.name.split(" ")[0]})," ",C.name.split(" ")[0]]}):e.type.name.split(" ")[0],e.nullable?"?":""]}),c?null:g.jsx("div",{className:"hidden flex-row group-hover:flex",children:g.jsx(on,{variant:"ghost",className:"size-6 p-0 hover:bg-primary-foreground",onClick:I=>{I.stopPropagation(),s(n,e.id)},children:g.jsx(ma,{className:"size-3.5 text-red-700"})})})]})]})});Xl.displayName="TableNodeField";var Ei="ContextMenu",[hb,DC]=Cn(Ei,[Nc]),Me=Nc(),[mb,Yl]=hb(Ei),Wl=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:r,dir:o,modal:i=!0}=e,[s,a]=h.useState(!1),c=Me(t),u=ze(r),d=h.useCallback(l=>{a(l),u(l)},[u]);return g.jsx(mb,{scope:t,open:s,onOpenChange:d,modal:i,children:g.jsx(np,{...c,dir:o,open:s,onOpenChange:d,modal:i,children:n})})};Wl.displayName=Ei;var Gl="ContextMenuTrigger",Ul=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:r=!1,...o}=e,i=Yl(Gl,n),s=Me(n),a=h.useRef({x:0,y:0}),c=h.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...a.current})}),u=h.useRef(0),d=h.useCallback(()=>window.clearTimeout(u.current),[]),l=f=>{a.current={x:f.clientX,y:f.clientY},i.onOpenChange(!0)};return h.useEffect(()=>d,[d]),h.useEffect(()=>void(r&&d()),[r,d]),g.jsxs(g.Fragment,{children:[g.jsx(rp,{...s,virtualRef:c}),g.jsx(Se.span,{"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,...o,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:r?e.onContextMenu:le(e.onContextMenu,f=>{d(),l(f),f.preventDefault()}),onPointerDown:r?e.onPointerDown:le(e.onPointerDown,Xn(f=>{d(),u.current=window.setTimeout(()=>l(f),700)})),onPointerMove:r?e.onPointerMove:le(e.onPointerMove,Xn(d)),onPointerCancel:r?e.onPointerCancel:le(e.onPointerCancel,Xn(d)),onPointerUp:r?e.onPointerUp:le(e.onPointerUp,Xn(d))})]})});Ul.displayName=Gl;var pb="ContextMenuPortal",Kl=e=>{const{__scopeContextMenu:t,...n}=e,r=Me(t);return g.jsx(op,{...r,...n})};Kl.displayName=pb;var ql="ContextMenuContent",Zl=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Yl(ql,n),i=Me(n),s=h.useRef(!1);return g.jsx(ip,{...i,...r,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:a=>{var c;(c=e.onCloseAutoFocus)==null||c.call(e,a),!a.defaultPrevented&&s.current&&a.preventDefault(),s.current=!1},onInteractOutside:a=>{var c;(c=e.onInteractOutside)==null||c.call(e,a),!a.defaultPrevented&&!o.modal&&(s.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Zl.displayName=ql;var gb="ContextMenuGroup",yb=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(sp,{...o,...r,ref:t})});yb.displayName=gb;var xb="ContextMenuLabel",Ql=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(ap,{...o,...r,ref:t})});Ql.displayName=xb;var vb="ContextMenuItem",Jl=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(cp,{...o,...r,ref:t})});Jl.displayName=vb;var wb="ContextMenuCheckboxItem",ed=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(up,{...o,...r,ref:t})});ed.displayName=wb;var bb="ContextMenuRadioGroup",Cb=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(lp,{...o,...r,ref:t})});Cb.displayName=bb;var _b="ContextMenuRadioItem",td=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(dp,{...o,...r,ref:t})});td.displayName=_b;var Eb="ContextMenuItemIndicator",nd=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(fp,{...o,...r,ref:t})});nd.displayName=Eb;var Sb="ContextMenuSeparator",rd=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(hp,{...o,...r,ref:t})});rd.displayName=Sb;var Mb="ContextMenuArrow",Nb=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(mp,{...o,...r,ref:t})});Nb.displayName=Mb;var kb="ContextMenuSubTrigger",od=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(pp,{...o,...r,ref:t})});od.displayName=kb;var Tb="ContextMenuSubContent",id=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(gp,{...o,...r,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});id.displayName=Tb;function Xn(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var Rb=Wl,Db=Ul,Ib=Kl,sd=Zl,ad=Ql,cd=Jl,ud=ed,ld=td,dd=nd,fd=rd,hd=od,md=id;const Ab=Rb,Pb=Db,jb=h.forwardRef(({className:e,inset:t,children:n,...r},o)=>g.jsxs(hd,{ref:o,className:Ee("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",t&&"pl-8",e),...r,children:[n,g.jsx(Cp,{className:"ml-auto size-4"})]}));jb.displayName=hd.displayName;const $b=h.forwardRef(({className:e,...t},n)=>g.jsx(md,{ref:n,className:Ee("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));$b.displayName=md.displayName;const pd=h.forwardRef(({className:e,...t},n)=>g.jsx(Ib,{children:g.jsx(sd,{ref:n,className:Ee("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})}));pd.displayName=sd.displayName;const rn=h.forwardRef(({className:e,inset:t,...n},r)=>g.jsx(cd,{ref:r,className:Ee("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));rn.displayName=cd.displayName;const Lb=h.forwardRef(({className:e,children:t,checked:n,...r},o)=>g.jsxs(ud,{ref:o,className:Ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[g.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:g.jsx(dd,{children:g.jsx(vp,{className:"size-4"})})}),t]}));Lb.displayName=ud.displayName;const Ob=h.forwardRef(({className:e,children:t,...n},r)=>g.jsxs(ld,{ref:r,className:Ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[g.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:g.jsx(dd,{children:g.jsx(Mp,{className:"size-4 fill-current"})})}),t]}));Ob.displayName=ld.displayName;const Fb=h.forwardRef(({className:e,inset:t,...n},r)=>g.jsx(ad,{ref:r,className:Ee("px-2 py-1.5 text-sm font-semibold text-foreground",t&&"pl-8",e),...n}));Fb.displayName=ad.displayName;const Hb=h.forwardRef(({className:e,...t},n)=>g.jsx(fd,{ref:n,className:Ee("-mx-1 my-1 h-px bg-border",e),...t}));Hb.displayName=fd.displayName;const zb=({children:e,table:t})=>{const{removeTable:n,readonly:r,createTable:o}=xr(),{openTableFromSidebar:i}=Jc(),{t:s}=ua(),{isMd:a}=Mf("md"),{openCreateRelationshipDialog:c}=zp(),u=h.useCallback(()=>{const m=ff(t);m.name=`${m.name}_copy`,m.x+=30,m.y+=50,o(m)},[o,t]),d=h.useCallback(()=>{i(t.id)},[i,t.id]),l=h.useCallback(()=>{n(t.id)},[n,t.id]),f=h.useCallback(()=>{c({sourceTableId:t.id})},[c,t.id]);return!a||r?g.jsx(g.Fragment,{children:e}):g.jsxs(Ab,{children:[g.jsx(Pb,{children:e}),g.jsxs(pd,{children:[g.jsxs(rn,{onClick:d,className:"flex justify-between gap-3",children:[g.jsx("span",{children:s("table_node_context_menu.edit_table")}),g.jsx(jf,{className:"size-3.5"})]}),g.jsxs(rn,{onClick:u,className:"flex justify-between gap-3",children:[g.jsx("span",{children:s("table_node_context_menu.duplicate_table")}),g.jsx(If,{className:"size-3.5"})]}),g.jsxs(rn,{onClick:f,className:"flex justify-between gap-3",children:[g.jsx("span",{children:s("table_node_context_menu.add_relationship")}),g.jsx(Lf,{className:"size-3.5"})]}),g.jsxs(rn,{onClick:l,className:"flex justify-between gap-3",children:[g.jsx("span",{children:s("table_node_context_menu.delete_table")}),g.jsx(ma,{className:"size-3.5 text-red-700"})]})]})]})},ta="top_dep_",Bb="bottom_dep_",ho="target_dep_",gd=_e.memo(({table:e,focused:t})=>{const{dependencies:n}=xr(),r=Ol(),o=_i(),i=h.useMemo(()=>{var c,u;return o.inProgress&&o.fromNode.id!==e.id&&(((c=o.fromHandle.id)==null?void 0:c.startsWith(ta))||((u=o.fromHandle.id)==null?void 0:u.startsWith(Bb)))},[o,e.id]),s=h.useMemo(()=>n.filter(c=>c.tableId===e.id).length,[n,e.id]),a=h.useRef(s);return h.useEffect(()=>{a.current!==s&&(r(e.id),a.current=s)},[e.id,r,s]),g.jsxs(g.Fragment,{children:[e.isView||e.isMaterializedView?g.jsx(Oe,{id:`${ta}${e.id}`,className:`!h-4 !w-4 !border-2 !bg-pink-600 ${t?"":"!invisible"}`,position:ne.Top,type:"source"}):null,Array.from({length:s},(c,u)=>u).map(c=>g.jsx(Oe,{id:`${ho}${c}_${e.id}`,className:"!invisible",position:ne.Top,type:"target"},`${ho}${c}_${e.id}`)),i?g.jsx(Oe,{id:`${ho}${s}_${e.id}`,className:i?"!absolute !left-0 !top-0 !h-full !w-full !transform-none !rounded-none !border-none !opacity-0":"!invisible",position:ne.Top,type:"target"}):null]})});gd.displayName="TableNodeDependencyIndicator";const Vb=({status:e})=>e==="none"?null:g.jsx("div",{className:"absolute left-1/2 top-0 z-10 -translate-x-1/2 -translate-y-1/2",children:g.jsx("span",{className:Ee("inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium text-white",{"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":e==="new","bg-sky-100 text-sky-800 dark:bg-sky-800 dark:text-sky-100":e==="changed","bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100":e==="removed"}),children:e==="new"?"New":e==="changed"?"Modified":"Deleted"})}),Yn=450,na=337,cn=224,Wn=10,Xb=_e.memo(({selected:e,dragging:t,id:n,data:{table:r,isOverlapping:o,highlightOverlappingTables:i}})=>{const{updateTable:s,relationships:a,readonly:c}=xr(),u=de(B=>B.edges),{openTableFromSidebar:d,selectSidebarSection:l}=Jc(),[f,m]=h.useState(!1),{t:p}=ua(),[y,w]=h.useState(!1),[v,_]=h.useState(r.name),b=_e.useRef(null),{getTableNewName:x,checkIfTableHasChange:M,checkIfNewTable:j,checkIfTableRemoved:E}=or(),N=h.useMemo(()=>r.fields,[r.fields]),R=h.useMemo(()=>x({tableId:r.id}),[x,r.id]),D=h.useMemo(()=>M({tableId:r.id}),[M,r.id]),$=h.useMemo(()=>j({tableId:r.id}),[j,r.id]),L=h.useMemo(()=>E({tableId:r.id}),[E,r.id]),H=u.filter(B=>{var U;return(B.source===n||B.target===n)&&(B.selected||((U=B.data)==null?void 0:U.highlighted))&&B.type==="relationship-edge"}),C=!!e&&!t,P=()=>{l("tables"),d(r.id)},S=h.useCallback(()=>{s(r.id,{width:(r.width??cn)<na?na:Yn})},[r.id,r.width,s]),I=h.useCallback(()=>{s(r.id,{width:cn})},[r.id,s]),A=()=>{m(!f)},k=h.useCallback(B=>a.some(U=>U.sourceFieldId===B.id||U.targetFieldId===B.id)||B.primaryKey,[a]),O=h.useMemo(()=>{if(f)return N;const B=N.filter(Q=>k(Q)),U=N.filter(Q=>!k(Q)),q=B.slice(0,Wn),J=Wn-q.length,Y=U.slice(0,J);return[...q,...Y].sort((Q,se)=>N.indexOf(Q)-N.indexOf(se))},[f,N,k]),z=h.useCallback(()=>{y&&(v.trim()&&s(r.id,{name:v.trim()}),w(!1))},[v,r.id,s,y]),V=h.useCallback(()=>{w(!1),_(r.name)},[r.name]);Xa(b,z),tr("Enter",z),tr("Escape",V);const te=B=>{B.stopPropagation(),w(!0)};return g.jsx(zb,{table:r,children:g.jsxs("div",{className:Ee("flex w-full flex-col border-2 bg-slate-50 dark:bg-slate-950 rounded-lg shadow-sm transition-transform duration-300",e?"border-pink-600":"border-slate-500 dark:border-slate-700",o?"ring-2 ring-offset-slate-50 dark:ring-offset-slate-900 ring-blue-500 ring-offset-2":"",!i&&o?"animate-scale":"",i&&o?"animate-scale-2":"",D&&!$&&!L?"outline outline-[3px] outline-sky-500 dark:outline-sky-900 outline-offset-[5px]":"",$?"outline outline-[3px] outline-green-500 dark:outline-green-900 outline-offset-[5px]":"",L?"outline outline-[3px] outline-red-500 dark:outline-red-900 outline-offset-[5px]":""),onClick:B=>{B.detail===2&&P()},children:[g.jsx(U1,{isVisible:C,lineClassName:"!border-none !w-2",minWidth:cn,maxWidth:Yn,shouldResize:B=>B.dy===0,handleClassName:"!hidden"}),g.jsx(gd,{table:r,focused:C}),g.jsx(Vb,{status:$?"new":L?"removed":D?"changed":"none"}),g.jsx("div",{className:"h-2 rounded-t-[6px]",style:{backgroundColor:r.color}}),g.jsxs("div",{className:"group flex h-9 items-center justify-between bg-slate-200 px-2 dark:bg-slate-900",children:[g.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-2",children:[$?g.jsxs(Zt,{children:[g.jsx(Qt,{asChild:!0,children:g.jsx(ha,{className:"size-3.5 shrink-0 text-green-600",strokeWidth:2.5})}),g.jsx(Jt,{children:"New Table"})]}):L?g.jsxs(Zt,{children:[g.jsx(Qt,{asChild:!0,children:g.jsx(fa,{className:"size-3.5 shrink-0 text-red-600",strokeWidth:2.5})}),g.jsx(Jt,{children:"Table Removed"})]}):D?g.jsxs(Zt,{children:[g.jsx(Qt,{asChild:!0,children:g.jsx(da,{className:"size-3.5 shrink-0 text-sky-600",strokeWidth:2.5})}),g.jsx(Jt,{children:"Table Changed"})]}):g.jsx($f,{className:"size-3.5 shrink-0 text-gray-600 dark:text-primary"}),R?g.jsxs(Ut,{className:"flex h-5 items-center justify-center truncate rounded-sm bg-sky-200 px-2 py-0.5 text-sm font-normal text-sky-900 dark:bg-sky-800 dark:text-sky-200",children:[g.jsx("span",{className:"truncate",children:r.name}),g.jsx("span",{className:"mx-1 font-semibold",children:""}),g.jsx("span",{className:"truncate",children:R})]}):$?g.jsx(Ut,{className:"flex h-5 flex-col justify-center truncate rounded-sm bg-green-200 px-2 py-0.5 text-sm font-normal text-green-900 dark:bg-green-800 dark:text-green-200",children:r.name}):L?g.jsx(Ut,{className:"flex h-5 flex-col justify-center truncate rounded-sm bg-red-200 px-2 py-0.5 text-sm font-normal text-red-900 dark:bg-red-800 dark:text-red-200",children:r.name}):D?g.jsx(Ut,{className:"flex h-5 flex-col justify-center truncate rounded-sm bg-sky-200 px-2 py-0.5 text-sm font-normal text-sky-900 dark:bg-sky-800 dark:text-sky-200",children:r.name}):y&&!c?g.jsxs(g.Fragment,{children:[g.jsx(Uo,{ref:b,onBlur:z,placeholder:r.name,autoFocus:!0,type:"text",value:v,onClick:B=>B.stopPropagation(),onChange:B=>_(B.target.value),className:"h-6 w-full border-[0.5px] border-blue-400 bg-slate-100 focus-visible:ring-0 dark:bg-slate-900"}),g.jsx(on,{variant:"ghost",className:"size-6 p-0 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-200",onClick:z,children:g.jsx(la,{className:"size-4"})})]}):g.jsxs(Zt,{children:[g.jsx(Qt,{asChild:!0,children:g.jsx(Ut,{className:"text-editable truncate px-2 py-0.5 text-sm font-bold",onDoubleClick:te,children:r.name})}),g.jsx(Jt,{children:p("tool_tips.double_click_to_edit")})]})]}),g.jsxs("div",{className:"hidden shrink-0 flex-row group-hover:flex",children:[c||y?null:g.jsx(on,{variant:"ghost",className:"size-6 p-0 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-200",onClick:P,children:g.jsx(Df,{className:"size-4"})}),y?null:g.jsx(on,{variant:"ghost",className:"size-6 p-0 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-200",onClick:r.width!==Yn?S:I,children:r.width!==Yn?g.jsx(Tf,{className:"size-4"}):g.jsx(Rf,{className:"size-4"})})]})]}),g.jsx("div",{className:"transition-[max-height] duration-200 ease-in-out",style:{maxHeight:f?`${N.length*2}rem`:`${Wn*2}rem`},children:N.map(B=>g.jsx(Xl,{focused:C,tableNodeId:n,field:B,highlighted:H.some(U=>{var q,J;return((q=U.data)==null?void 0:q.relationship.sourceFieldId)===B.id||((J=U.data)==null?void 0:J.relationship.targetFieldId)===B.id}),visible:O.includes(B),isConnectable:!r.isView},B.id))}),N.length>Wn&&g.jsx("div",{className:"z-10 flex h-8 cursor-pointer items-center justify-center rounded-b-md border-t text-xs text-muted-foreground transition-colors duration-200 hover:bg-slate-100 dark:hover:bg-slate-800",onClick:A,children:f?g.jsxs(g.Fragment,{children:[g.jsx(kf,{className:"mr-1 size-3.5"}),p("show_less")]}):g.jsxs(g.Fragment,{children:[g.jsx(Nf,{className:"mr-1 size-3.5"}),p("show_more")]})})]})})});Xb.displayName="TableNode";const IC=({cardinality:e,selected:t,side:n})=>`cardinality_${t?"selected":"not_selected"}_${e}_${n}`,mo=({node:e,table:t})=>{var a,c;const n=(e==null?void 0:e.id)??(t==null?void 0:t.id)??"",r=(e==null?void 0:e.position.x)??(t==null?void 0:t.x)??0,o=(e==null?void 0:e.position.y)??(t==null?void 0:t.y)??0,i=((a=e==null?void 0:e.measured)==null?void 0:a.width)??(e==null?void 0:e.data.table.width)??(t==null?void 0:t.width)??cn,s=e?((c=e==null?void 0:e.measured)==null?void 0:c.height)??Wo((e==null?void 0:e.data.table.fields.length)??0):Wo((t==null?void 0:t.fields.length)??0);return{id:n,left:r,right:r+i,top:o,bottom:o+s}},ra=({node:e,table:t},{nodes:n,tables:r},o)=>{const i=(e==null?void 0:e.id)??(t==null?void 0:t.id)??"",s=mo(e?{node:e}:{table:t});for(const a of n??r??[]){if(i===a.id)continue;const u=mo(!!n?{node:a}:{table:a});s.left<u.right&&s.right>u.left&&s.top<u.bottom&&s.bottom>u.top?o=lb(o,i,a.id):o=db(o,i,a.id)}return o},AC=({tables:e,nodes:t})=>{let n=Vl();if(e)for(const r of e)n=ra({table:r},{tables:e},n);else for(const r of t)n=ra({node:r},{nodes:t},n);return n},Wo=e=>Math.min(e,11)*32+48,PC=e=>{const t=e.fields.length,n=Wo(t);return{width:e.width||cn,height:n}};export{ec as $,ta as A,Bb as B,Cp as C,sC as D,bC as E,ra as F,TC as G,Wo as H,Uo as I,AC as J,MC as K,Js as L,cn as M,bn as N,hC as O,ne as P,vC as Q,b1 as R,Qb as S,Xb as T,Zb as U,cC as V,Lf as W,jf as X,wC as Y,xC as Z,st as _,fC as a,NC as a$,Wa as a0,uc as a1,Ya as a2,Sh as a3,lc as a4,Uh as a5,uh as a6,Sc as a7,qa as a8,Zo as a9,op as aA,ip as aB,sp as aC,ap as aD,hp as aE,cp as aF,up as aG,lp as aH,dp as aI,fp as aJ,mp as aK,pp as aL,gp as aM,Mp as aN,Fp as aO,aC as aP,tC as aQ,fc as aR,Fh as aS,Hh as aT,eC as aU,Jb as aV,Vp as aW,qp as aX,Zp as aY,Bp as aZ,ub as a_,Mh as aa,Nh as ab,nC as ac,vp as ad,oC as ae,rC as af,Xa as ag,tr as ah,If as ai,ma as aj,Df as ak,la as al,_C as am,Bl as an,CC as ao,Af as ap,Pf as aq,mC as ar,xo as as,gt as at,xf as au,wf as av,bf as aw,Nc as ax,np as ay,rp as az,iC as b,kC as b0,SC as b1,EC as b2,Nf as b3,kf as b4,Q1 as b5,ib as b6,Hp as b7,Xp as b8,Vl as b9,fb as ba,eg as bb,tg as bc,ua as c,bi as d,or as e,xr as f,ea as g,zo as h,IC as i,PC as j,yC as k,uC as l,zp as m,Mf as n,Ab as o,Pb as p,pd as q,rn as r,dC as s,lC as t,Jc as u,RC as v,pC as w,gC as x,fo as y,ho as z};
