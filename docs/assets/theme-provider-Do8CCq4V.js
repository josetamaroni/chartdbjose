import{g as se,r as c,h as k,q as Ee,s as Le,R as S,j as ie}from"./index-aluNvIa_.js";var A={};A.match=Te;A.parse=ce;var _e=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,Oe=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,Me=/^(?:(min|max)-)?(.+)/,xe=/(em|rem|px|cm|mm|in|pt|pc)?$/,Re=/(dpi|dpcm|dppx)?$/;function Te(e,t){return ce(e).some(function(n){var r=n.inverse,a=n.type==="all"||t.type===n.type;if(a&&r||!(a||r))return!1;var s=n.expressions.every(function(u){var d=u.feature,m=u.modifier,o=u.value,f=t[d];if(!f)return!1;switch(d){case"orientation":case"scan":return f.toLowerCase()===o.toLowerCase();case"width":case"height":case"device-width":case"device-height":o=$(o),f=$(f);break;case"resolution":o=U(o),f=U(f);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":o=F(o),f=F(f);break;case"grid":case"color":case"color-index":case"monochrome":o=parseInt(o,10)||1,f=parseInt(f,10)||0;break}switch(m){case"min":return f>=o;case"max":return f<=o;default:return f===o}});return s&&!r||!s&&r})}function ce(e){return e.split(",").map(function(t){t=t.trim();var n=t.match(_e),r=n[1],a=n[2],s=n[3]||"",u={};return u.inverse=!!r&&r.toLowerCase()==="not",u.type=a?a.toLowerCase():"all",s=s.match(/\([^\)]+\)/g)||[],u.expressions=s.map(function(d){var m=d.match(Oe),o=m[1].toLowerCase().match(Me);return{modifier:o[1],feature:o[2],value:m[2]}}),u})}function F(e){var t=Number(e),n;return t||(n=e.match(/^(\d+)\s*\/\s*(\d+)$/),t=n[1]/n[2]),t}function U(e){var t=parseFloat(e),n=String(e).match(Re)[1];switch(n){case"dpcm":return t/2.54;case"dppx":return t*96;default:return t}}function $(e){var t=parseFloat(e),n=String(e).match(xe)[1];switch(n){case"em":return t*16;case"rem":return t*16;case"cm":return t*96/2.54;case"mm":return t*96/2.54/10;case"in":return t*96;case"pt":return t*72;case"pc":return t*72/12;default:return t}}var Ie=A.match,q=typeof window<"u"?window.matchMedia:null;function Pe(e,t,n){var r=this,a;q&&!n&&(a=q.call(window,e)),a?(this.matches=a.matches,this.media=a.media,a.addListener(d)):(this.matches=Ie(e,t),this.media=e),this.addListener=s,this.removeListener=u,this.dispose=m;function s(o){a&&a.addListener(o)}function u(o){a&&a.removeListener(o)}function d(o){r.matches=o.matches,r.media=o.media}function m(){a&&a.removeListener(d)}}function De(e,t,n){return new Pe(e,t,n)}var Ne=De;const Ae=se(Ne);var Ke=/[A-Z]/g,He=/^ms-/,I={};function We(e){return"-"+e.toLowerCase()}function ue(e){if(I.hasOwnProperty(e))return I[e];var t=e.replace(Ke,We);return I[e]=He.test(t)?"-"+t:t}function je(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),r=Object.keys(t),a=n.length;if(r.length!==a)return!1;for(let s=0;s<a;s++){const u=n[s];if(e[u]!==t[u]||!Object.prototype.hasOwnProperty.call(t,u))return!1}return!0}var le={exports:{}},Fe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Ue=Fe,$e=Ue;function fe(){}function de(){}de.resetWarningCache=fe;var qe=function(){function e(r,a,s,u,d,m){if(m!==$e){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:de,resetWarningCache:fe};return n.PropTypes=n,n};le.exports=qe();var Ge=le.exports;const l=se(Ge),g=l.oneOfType([l.string,l.number]),me={all:l.bool,grid:l.bool,aural:l.bool,braille:l.bool,handheld:l.bool,print:l.bool,projection:l.bool,screen:l.bool,tty:l.bool,tv:l.bool,embossed:l.bool},Ve={orientation:l.oneOf(["portrait","landscape"]),scan:l.oneOf(["progressive","interlace"]),aspectRatio:l.string,deviceAspectRatio:l.string,height:g,deviceHeight:g,width:g,deviceWidth:g,color:l.bool,colorIndex:l.bool,monochrome:l.bool,resolution:g,type:Object.keys(me)},{...Qe}=Ve,Be={minAspectRatio:l.string,maxAspectRatio:l.string,minDeviceAspectRatio:l.string,maxDeviceAspectRatio:l.string,minHeight:g,maxHeight:g,minDeviceHeight:g,maxDeviceHeight:g,minWidth:g,maxWidth:g,minDeviceWidth:g,maxDeviceWidth:g,minColor:l.number,maxColor:l.number,minColorIndex:l.number,maxColorIndex:l.number,minMonochrome:l.number,maxMonochrome:l.number,minResolution:g,maxResolution:g,...Qe},Ze={...me,...Be};var ze={all:Ze};const Je=e=>`not ${e}`,Ye=(e,t)=>{const n=ue(e);return typeof t=="number"&&(t=`${t}px`),t===!0?n:t===!1?Je(n):`(${n}: ${t})`},Xe=e=>e.join(" and "),et=e=>{const t=[];return Object.keys(ze.all).forEach(n=>{const r=e[n];r!=null&&t.push(Ye(n,r))}),Xe(t)},tt=c.createContext(void 0),nt=e=>e.query||et(e),G=e=>e?Object.keys(e).reduce((n,r)=>(n[ue(r)]=e[r],n),{}):void 0,he=()=>{const e=c.useRef(!1);return c.useEffect(()=>{e.current=!0},[]),e.current},rt=e=>{const t=c.useContext(tt),n=()=>G(e)||G(t),[r,a]=c.useState(n);return c.useEffect(()=>{const s=n();je(r,s)||a(s)},[e,t]),r},at=e=>{const t=()=>nt(e),[n,r]=c.useState(t);return c.useEffect(()=>{const a=t();n!==a&&r(a)},[e]),n},ot=(e,t)=>{const n=()=>Ae(e,t||{},!!t),[r,a]=c.useState(n),s=he();return c.useEffect(()=>{if(s){const u=n();return a(u),()=>{u&&u.dispose()}}},[e,t]),r},st=e=>{const[t,n]=c.useState(e.matches);return c.useEffect(()=>{const r=a=>{n(a.matches)};return e.addListener(r),n(e.matches),()=>{e.removeListener(r)}},[e]),t},it=(e,t,n)=>{const r=rt(t),a=at(e);if(!a)throw new Error("Invalid or missing MediaQuery!");const s=ot(a,r),u=st(s);return he(),c.useEffect(()=>{},[u]),c.useEffect(()=>()=>{s&&s.dispose()},[]),u},ct=c.createContext({theme:"system",setTheme:k,effectiveTheme:"light"}),V=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Q=Ee,Tt=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return Q(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:s}=t,u=Object.keys(a).map(o=>{const f=n==null?void 0:n[o],v=s==null?void 0:s[o];if(f===null)return null;const y=V(f)||V(v);return a[o][y]}),d=n&&Object.entries(n).reduce((o,f)=>{let[v,y]=f;return y===void 0||(o[v]=y),o},{}),m=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((o,f)=>{let{class:v,className:y,...i}=f;return Object.entries(i).every(L=>{let[C,b]=L;return Array.isArray(b)?b.includes({...s,...d}[C]):{...s,...d}[C]===b})?[...o,v,y]:o},[]);return Q(e,u,m,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ye=(...e)=>e.filter((t,n,r)=>!!t&&r.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=c.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:s,iconNode:u,...d},m)=>c.createElement("svg",{ref:m,...lt,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:ye("lucide",a),...d},[...u.map(([o,f])=>c.createElement(o,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=(e,t)=>{const n=c.forwardRef(({className:r,...a},s)=>c.createElement(ft,{ref:s,iconNode:t,className:ye(`lucide-${ut(e)}`,r),...a}));return n.displayName=`${e}`,n};var pe=(e=>(e.REDO="redo",e.UNDO="undo",e.OPEN_DIAGRAM="open_diagram",e.SAVE_DIAGRAM="save_diagram",e.TOGGLE_SIDE_PANEL="toggle_side_panel",e.SHOW_ALL="show_all",e.TOGGLE_THEME="toggle_theme",e))(pe||{});const B={redo:{action:"redo",keyCombinationLabelMac:"⇧⌘Z",keyCombinationLabelWin:"Ctrl+Shift+Z",keyCombinationMac:"meta+shift+z",keyCombinationWin:"ctrl+shift+z"},undo:{action:"undo",keyCombinationLabelMac:"⌘Z",keyCombinationLabelWin:"Ctrl+Z",keyCombinationMac:"meta+z",keyCombinationWin:"ctrl+z"},open_diagram:{action:"open_diagram",keyCombinationLabelMac:"⌘O",keyCombinationLabelWin:"Ctrl+O",keyCombinationMac:"meta+o",keyCombinationWin:"ctrl+o"},save_diagram:{action:"save_diagram",keyCombinationLabelMac:"⌘S",keyCombinationLabelWin:"Ctrl+S",keyCombinationMac:"meta+s",keyCombinationWin:"ctrl+s"},toggle_side_panel:{action:"toggle_side_panel",keyCombinationLabelMac:"⌘B",keyCombinationLabelWin:"Ctrl+B",keyCombinationMac:"meta+b",keyCombinationWin:"ctrl+b"},show_all:{action:"show_all",keyCombinationLabelMac:"⌘0",keyCombinationLabelWin:"Ctrl+0",keyCombinationMac:"meta+0",keyCombinationWin:"ctrl+0"},toggle_theme:{action:"toggle_theme",keyCombinationLabelMac:"⌘M",keyCombinationLabelWin:"Ctrl+M",keyCombinationMac:"meta+m",keyCombinationWin:"ctrl+m"}},Z=Le(),dt=Object.keys(B).reduce((e,t)=>{const n=B[t],r=Z==="mac"?n.keyCombinationLabelMac:n.keyCombinationLabelWin,a=Z==="mac"?n.keyCombinationMac:n.keyCombinationWin;return{...e,[t]:{action:n.action,keyCombinationLabel:r,keyCombination:a}}},{}),ge=c.createContext({theme:"system",setTheme:k,scrollAction:"pan",setScrollAction:k,schemasFilter:{},setSchemasFilter:k,showCardinality:!0,setShowCardinality:k,hideMultiSchemaNotification:!1,setHideMultiSchemaNotification:k,githubRepoOpened:!1,setGithubRepoOpened:k,starUsDialogLastOpen:0,setStarUsDialogLastOpen:k,showDependenciesOnCanvas:!1,setShowDependenciesOnCanvas:k,showMiniMapOnCanvas:!1,setShowMiniMapOnCanvas:k}),mt=()=>c.useContext(ge),z="theme",J="scroll_action",Y="schemas_filter",X="show_cardinality",ee="hide_multi_schema_notification",te="github_repo_opened",ne="star_us_dialog_last_open",re="show_dependencies_on_canvas",ae="show_minimap_on_canvas",Pt=({children:e})=>{const[t,n]=S.useState(localStorage.getItem(z)||"system"),[r,a]=S.useState(localStorage.getItem(J)||"pan"),[s,u]=S.useState(JSON.parse(localStorage.getItem(Y)||"{}")),[d,m]=S.useState((localStorage.getItem(X)||"true")==="true"),[o,f]=S.useState((localStorage.getItem(ee)||"false")==="true"),[v,y]=S.useState((localStorage.getItem(te)||"false")==="true"),[i,L]=S.useState(parseInt(localStorage.getItem(ne)||"0")),[C,b]=S.useState((localStorage.getItem(re)||"false")==="true"),[p,M]=S.useState((localStorage.getItem(ae)||"true")==="true");return c.useEffect(()=>{localStorage.setItem(ne,i.toString())},[i]),c.useEffect(()=>{localStorage.setItem(te,v.toString())},[v]),c.useEffect(()=>{localStorage.setItem(ee,o.toString())},[o]),c.useEffect(()=>{localStorage.setItem(z,t)},[t]),c.useEffect(()=>{localStorage.setItem(J,r)},[r]),c.useEffect(()=>{localStorage.setItem(Y,JSON.stringify(s))},[s]),c.useEffect(()=>{localStorage.setItem(X,d.toString())},[d]),c.useEffect(()=>{localStorage.setItem(re,C.toString())},[C]),c.useEffect(()=>{localStorage.setItem(ae,p.toString())},[p]),ie.jsx(ge.Provider,{value:{theme:t,setTheme:n,scrollAction:r,setScrollAction:a,schemasFilter:s,setSchemasFilter:u,showCardinality:d,setShowCardinality:m,hideMultiSchemaNotification:o,setHideMultiSchemaNotification:f,setGithubRepoOpened:y,githubRepoOpened:v,starUsDialogLastOpen:i,setStarUsDialogLastOpen:L,showDependenciesOnCanvas:C,setShowDependenciesOnCanvas:b,showMiniMapOnCanvas:p,setShowMiniMapOnCanvas:M},children:e})};function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N.apply(null,arguments)}var ve=["shift","alt","meta","mod","ctrl"],ht={esc:"escape",return:"enter",".":"period",",":"comma","-":"slash"," ":"space","`":"backquote","#":"backslash","+":"bracketright",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function w(e){return(e&&ht[e]||e||"").trim().toLowerCase().replace(/key|digit|numpad|arrow/,"")}function yt(e){return ve.includes(e)}function P(e,t){return t===void 0&&(t=","),e.split(t)}function D(e,t,n){t===void 0&&(t="+");var r=e.toLocaleLowerCase().split(t).map(function(u){return w(u)}),a={alt:r.includes("alt"),ctrl:r.includes("ctrl")||r.includes("control"),shift:r.includes("shift"),meta:r.includes("meta"),mod:r.includes("mod")},s=r.filter(function(u){return!ve.includes(u)});return N({},a,{keys:s,description:n,hotkey:e})}(function(){typeof document<"u"&&(document.addEventListener("keydown",function(e){e.key!==void 0&&be([w(e.key),w(e.code)])}),document.addEventListener("keyup",function(e){e.key!==void 0&&Ce([w(e.key),w(e.code)])})),typeof window<"u"&&window.addEventListener("blur",function(){E.clear()})})();var E=new Set;function K(e){return Array.isArray(e)}function pt(e,t){t===void 0&&(t=",");var n=K(e)?e:e.split(t);return n.every(function(r){return E.has(r.trim().toLowerCase())})}function be(e){var t=Array.isArray(e)?e:[e];E.has("meta")&&E.forEach(function(n){return!yt(n)&&E.delete(n.toLowerCase())}),t.forEach(function(n){return E.add(n.toLowerCase())})}function Ce(e){var t=Array.isArray(e)?e:[e];e==="meta"?E.clear():t.forEach(function(n){return E.delete(n.toLowerCase())})}function gt(e,t,n){(typeof n=="function"&&n(e,t)||n===!0)&&e.preventDefault()}function vt(e,t,n){return typeof n=="function"?n(e,t):n===!0||n===void 0}function bt(e){return ke(e,["input","textarea","select"])}function ke(e,t){t===void 0&&(t=!1);var n=e.target,r=e.composed,a=null;return Ct(n)&&r?a=e.composedPath()[0]&&e.composedPath()[0].tagName:a=n&&n.tagName,K(t)?!!(a&&t&&t.some(function(s){var u;return s.toLowerCase()===((u=a)==null?void 0:u.toLowerCase())})):!!(a&&t&&t)}function Ct(e){return!!e.tagName&&!e.tagName.startsWith("-")&&e.tagName.includes("-")}function kt(e,t){return e.length===0&&t?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):t?e.some(function(n){return t.includes(n)})||e.includes("*"):!0}var St=function(t,n,r){r===void 0&&(r=!1);var a=n.alt,s=n.meta,u=n.mod,d=n.shift,m=n.ctrl,o=n.keys,f=t.key,v=t.code,y=t.ctrlKey,i=t.metaKey,L=t.shiftKey,C=t.altKey,b=w(v),p=f.toLowerCase();if(!(o!=null&&o.includes(b))&&!(o!=null&&o.includes(p))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(b))return!1;if(!r){if(a===!C&&p!=="alt"||d===!L&&p!=="shift")return!1;if(u){if(!i&&!y)return!1}else if(s===!i&&p!=="meta"&&p!=="os"||m===!y&&p!=="ctrl"&&p!=="control")return!1}return o&&o.length===1&&(o.includes(p)||o.includes(b))?!0:o?pt(o):!o},wt=c.createContext(void 0),Et=function(){return c.useContext(wt)};function Se(e,t){return e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(e).length===Object.keys(t).length&&Object.keys(e).reduce(function(n,r){return n&&Se(e[r],t[r])},!0):e===t}var Lt=c.createContext({hotkeys:[],enabledScopes:[],toggleScope:function(){},enableScope:function(){},disableScope:function(){}}),_t=function(){return c.useContext(Lt)};function Ot(e){var t=c.useRef(void 0);return Se(t.current,e)||(t.current=e),t.current}var oe=function(t){t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation()},Mt=typeof window<"u"?c.useLayoutEffect:c.useEffect;function xt(e,t,n,r){var a=c.useState(null),s=a[0],u=a[1],d=c.useRef(!1),m=n instanceof Array?r instanceof Array?void 0:r:n,o=K(e)?e.join(m==null?void 0:m.splitKey):e,f=n instanceof Array?n:r instanceof Array?r:void 0,v=c.useCallback(t,f??[]),y=c.useRef(v);f?y.current=v:y.current=t;var i=Ot(m),L=_t(),C=L.enabledScopes,b=Et();return Mt(function(){if(!((i==null?void 0:i.enabled)===!1||!kt(C,i==null?void 0:i.scopes))){var p=function(h,R){var W;if(R===void 0&&(R=!1),!(bt(h)&&!ke(h,i==null?void 0:i.enableOnFormTags))){if(s!==null){var T=s.getRootNode();if((T instanceof Document||T instanceof ShadowRoot)&&T.activeElement!==s&&!s.contains(T.activeElement)){oe(h);return}}(W=h.target)!=null&&W.isContentEditable&&!(i!=null&&i.enableOnContentEditable)||P(o,i==null?void 0:i.splitKey).forEach(function(we){var j,O=D(we,i==null?void 0:i.combinationKey);if(St(h,O,i==null?void 0:i.ignoreModifiers)||(j=O.keys)!=null&&j.includes("*")){if(i!=null&&i.ignoreEventWhen!=null&&i.ignoreEventWhen(h)||R&&d.current)return;if(gt(h,O,i==null?void 0:i.preventDefault),!vt(h,O,i==null?void 0:i.enabled)){oe(h);return}y.current(h,O),R||(d.current=!0)}})}},M=function(h){h.key!==void 0&&(be(w(h.code)),((i==null?void 0:i.keydown)===void 0&&(i==null?void 0:i.keyup)!==!0||i!=null&&i.keydown)&&p(h))},H=function(h){h.key!==void 0&&(Ce(w(h.code)),d.current=!1,i!=null&&i.keyup&&p(h,!0))},x=s||(m==null?void 0:m.document)||document;return x.addEventListener("keyup",H),x.addEventListener("keydown",M),b&&P(o,i==null?void 0:i.splitKey).forEach(function(_){return b.addHotkey(D(_,i==null?void 0:i.combinationKey,i==null?void 0:i.description))}),function(){x.removeEventListener("keyup",H),x.removeEventListener("keydown",M),b&&P(o,i==null?void 0:i.splitKey).forEach(function(_){return b.removeHotkey(D(_,i==null?void 0:i.combinationKey,i==null?void 0:i.description))})}}},[s,o,i,C]),u}const Dt=({children:e})=>{const{theme:t,setTheme:n}=mt(),a=it({query:"(prefers-color-scheme: dark)"})?"dark":"light",[s,u]=c.useState(a);c.useEffect(()=>{u(t==="system"?a:t)},[t,a]),c.useEffect(()=>{s==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[s]);const d=c.useCallback(()=>{n(t==="system"?s==="dark"?"light":"dark":t==="dark"?"light":"dark")},[t,s,n]);return xt(dt[pe.TOGGLE_THEME].keyCombination,d,{preventDefault:!0},[d]),ie.jsx(ct.Provider,{value:{theme:t,setTheme:n,effectiveTheme:s},children:e})};export{pe as K,Pt as L,Dt as T,Tt as a,ct as b,It as c,xt as d,it as e,dt as k,mt as u};
