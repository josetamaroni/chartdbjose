import{r as c,j as s,m as $o,v as it,w as Ht,x as Nt,y as pe,z as Te,A as W,n as Ue,B as Ho,R as N,b as J,P as _s,C as Wo,T as de,e as ue,f as fe,D as Ko,t as Uo,s as qo}from"./index-DZ3xW4NN.js";import{$ as Is,a0 as Ds,a1 as Xo,a2 as Es,a3 as Go,a4 as Yo,a5 as Zo,a6 as Jo,a7 as Qo,a8 as ea,a9 as ta,aa as na,ab as sa,ac as ra,ad as ks,ae as oa,af as Ts,f as he,m as In,c as me,d as St,u as Ie,n as Wt,ag as Ms,ah as fn,ai as aa,aj as Je,I as $e,X as As,ak as Dn,al as Ps,am as ia,an,ao as la,ap as ca,aq as da,s as ua,ar as fa,K as pa,W as ha}from"./canvas-utils-OFpTM7vw.js";import{V as ma,e as ps,f as En,g as kn,h as Tn,i as Mn,j as rt,k as ot,l as Ke,F as pn,n as Ls,o as xa,p as An,q as Pn,r as Ln,s as Os,S as On,u as ga,v as va,w as ba,x as ya,y as zn,X as wa,z as zs,A as Bs,B as Ca}from"./code-editor-BQ4P6S-w.js";import{P as q,B as U,L as qe}from"./label-De9Vsa-z.js";import{c as we,d as hs}from"./theme-provider-CWwQSPiW.js";import{S as wt}from"./canvas-Cv4NL_NG.js";import{c as ja,u as Fs}from"./colors-Cq7j6Nko.js";import{D as st}from"./database-type-C2NNW5SW.js";import{d as Na,a as Sa,s as Ra}from"./storage-provider-Bil7fiDy.js";/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=we("ChevronsLeftRightEllipsis",[["path",{d:"m18 8 4 4-4 4",key:"1ak13k"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 12h.01",key:"1l6xoz"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=we("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=we("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=we("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=we("FileKey2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v6",key:"rc0qvx"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"4",cy:"16",r:"2",key:"1ehqvc"}],["path",{d:"m10 10-4.5 4.5",key:"7fwrp6"}],["path",{d:"m9 11 1 1",key:"wa6s5q"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=we("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=we("Group",[["path",{d:"M3 7V5c0-1.1.9-2 2-2h2",key:"adw53z"}],["path",{d:"M17 3h2c1.1 0 2 .9 2 2v2",key:"an4l38"}],["path",{d:"M21 17v2c0 1.1-.9 2-2 2h-2",key:"144t0e"}],["path",{d:"M7 21H5c-1.1 0-2-.9-2-2v-2",key:"rtnfgi"}],["rect",{width:"7",height:"5",x:"7",y:"7",rx:"1",key:"1eyiv7"}],["rect",{width:"7",height:"5",x:"10",y:"12",rx:"1",key:"1qlmkx"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=we("ListCollapse",[["path",{d:"m3 10 2.5-2.5L3 5",key:"i6eama"}],["path",{d:"m3 19 2.5-2.5L3 14",key:"w2gmor"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=we("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=we("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=we("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);var Ws=c.forwardRef((e,t)=>{const{children:n,...r}=e,o=c.Children.toArray(n),a=o.find(Ma);if(a){const i=a.props.children,l=o.map(d=>d===a?c.Children.count(i)>1?c.Children.only(null):c.isValidElement(i)?i.props.children:null:d);return s.jsx(mn,{...r,ref:t,children:c.isValidElement(i)?c.cloneElement(i,void 0,l):null})}return s.jsx(mn,{...r,ref:t,children:n})});Ws.displayName="Slot";var mn=c.forwardRef((e,t)=>{const{children:n,...r}=e;if(c.isValidElement(n)){const o=Pa(n);return c.cloneElement(n,{...Aa(r,n.props),ref:t?$o(t,o):o})}return c.Children.count(n)>1?c.Children.only(null):null});mn.displayName="SlotClone";var Ta=({children:e})=>s.jsx(s.Fragment,{children:e});function Ma(e){return c.isValidElement(e)&&e.type===Ta}function Aa(e,t){const n={...t};for(const r in t){const o=e[r],a=t[r];/^on[A-Z]/.test(r)?o&&a?n[r]=(...l)=>{a(...l),o(...l)}:o&&(n[r]=o):r==="style"?n[r]={...o,...a}:r==="className"&&(n[r]=[o,a].filter(Boolean).join(" "))}return{...e,...n}}function Pa(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Ks(e){const t=c.useRef({value:e,previous:e});return c.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var La=[" ","Enter","ArrowUp","ArrowDown"],Oa=[" ","Enter"],Rt="Select",[Kt,Ut,za]=Es(Rt),[ct,$c]=Ht(Rt,[za,Is]),qt=Is(),[Ba,He]=ct(Rt),[Fa,Va]=ct(Rt),Us=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:o,onOpenChange:a,value:i,defaultValue:l,onValueChange:d,dir:u,name:f,autoComplete:p,disabled:x,required:m,form:w}=e,h=qt(t),[v,y]=c.useState(null),[g,b]=c.useState(null),[C,j]=c.useState(!1),I=Ds(u),[R=!1,_]=it({prop:r,defaultProp:o,onChange:a}),[T,A]=it({prop:i,defaultProp:l,onChange:d}),k=c.useRef(null),F=v?w||!!v.closest("form"):!0,[z,E]=c.useState(new Set),V=Array.from(z).map($=>$.props.value).join(";");return s.jsx(Xo,{...h,children:s.jsxs(Ba,{required:m,scope:t,trigger:v,onTriggerChange:y,valueNode:g,onValueNodeChange:b,valueNodeHasChildren:C,onValueNodeHasChildrenChange:j,contentId:Nt(),value:T,onValueChange:A,open:R,onOpenChange:_,dir:I,triggerPointerDownPosRef:k,disabled:x,children:[s.jsx(Kt.Provider,{scope:t,children:s.jsx(Fa,{scope:e.__scopeSelect,onNativeOptionAdd:c.useCallback($=>{E(B=>new Set(B).add($))},[]),onNativeOptionRemove:c.useCallback($=>{E(B=>{const ne=new Set(B);return ne.delete($),ne})},[]),children:n})}),F?s.jsxs(vr,{"aria-hidden":!0,required:m,tabIndex:-1,name:f,autoComplete:p,value:T,onChange:$=>A($.target.value),disabled:x,form:w,children:[T===void 0?s.jsx("option",{value:""}):null,Array.from(z)]},V):null]})})};Us.displayName=Rt;var qs="SelectTrigger",Xs=c.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...o}=e,a=qt(n),i=He(qs,n),l=i.disabled||r,d=pe(t,i.onTriggerChange),u=Ut(n),f=c.useRef("touch"),[p,x,m]=br(h=>{const v=u().filter(b=>!b.disabled),y=v.find(b=>b.value===i.value),g=yr(v,h,y);g!==void 0&&i.onValueChange(g.value)}),w=h=>{l||(i.onOpenChange(!0),m()),h&&(i.triggerPointerDownPosRef.current={x:Math.round(h.pageX),y:Math.round(h.pageY)})};return s.jsx(Go,{asChild:!0,...a,children:s.jsx(q.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":gr(i.value)?"":void 0,...o,ref:d,onClick:W(o.onClick,h=>{h.currentTarget.focus(),f.current!=="mouse"&&w(h)}),onPointerDown:W(o.onPointerDown,h=>{f.current=h.pointerType;const v=h.target;v.hasPointerCapture(h.pointerId)&&v.releasePointerCapture(h.pointerId),h.button===0&&h.ctrlKey===!1&&h.pointerType==="mouse"&&(w(h),h.preventDefault())}),onKeyDown:W(o.onKeyDown,h=>{const v=p.current!=="";!(h.ctrlKey||h.altKey||h.metaKey)&&h.key.length===1&&x(h.key),!(v&&h.key===" ")&&La.includes(h.key)&&(w(),h.preventDefault())})})})});Xs.displayName=qs;var Gs="SelectValue",Ys=c.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,children:a,placeholder:i="",...l}=e,d=He(Gs,n),{onValueNodeHasChildrenChange:u}=d,f=a!==void 0,p=pe(t,d.onValueNodeChange);return Te(()=>{u(f)},[u,f]),s.jsx(q.span,{...l,ref:p,style:{pointerEvents:"none"},children:gr(d.value)?s.jsx(s.Fragment,{children:i}):a})});Ys.displayName=Gs;var $a="SelectIcon",Zs=c.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...o}=e;return s.jsx(q.span,{"aria-hidden":!0,...o,ref:t,children:r||"â–¼"})});Zs.displayName=$a;var Ha="SelectPortal",Js=e=>s.jsx(Yo,{asChild:!0,...e});Js.displayName=Ha;var Ze="SelectContent",Qs=c.forwardRef((e,t)=>{const n=He(Ze,e.__scopeSelect),[r,o]=c.useState();if(Te(()=>{o(new DocumentFragment)},[]),!n.open){const a=r;return a?Ue.createPortal(s.jsx(er,{scope:e.__scopeSelect,children:s.jsx(Kt.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),a):null}return s.jsx(tr,{...e,ref:t})});Qs.displayName=Ze;var ve=10,[er,We]=ct(Ze),Wa="SelectContentImpl",tr=c.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:a,onPointerDownOutside:i,side:l,sideOffset:d,align:u,alignOffset:f,arrowPadding:p,collisionBoundary:x,collisionPadding:m,sticky:w,hideWhenDetached:h,avoidCollisions:v,...y}=e,g=He(Ze,n),[b,C]=c.useState(null),[j,I]=c.useState(null),R=pe(t,D=>C(D)),[_,T]=c.useState(null),[A,k]=c.useState(null),F=Ut(n),[z,E]=c.useState(!1),V=c.useRef(!1);c.useEffect(()=>{if(b)return Zo(b)},[b]),Jo();const $=c.useCallback(D=>{const[P,...H]=F().map(M=>M.ref.current),[S]=H.slice(-1),L=document.activeElement;for(const M of D)if(M===L||(M==null||M.scrollIntoView({block:"nearest"}),M===P&&j&&(j.scrollTop=0),M===S&&j&&(j.scrollTop=j.scrollHeight),M==null||M.focus(),document.activeElement!==L))return},[F,j]),B=c.useCallback(()=>$([_,b]),[$,_,b]);c.useEffect(()=>{z&&B()},[z,B]);const{onOpenChange:ne,triggerPointerDownPosRef:X}=g;c.useEffect(()=>{if(b){let D={x:0,y:0};const P=S=>{var L,M;D={x:Math.abs(Math.round(S.pageX)-(((L=X.current)==null?void 0:L.x)??0)),y:Math.abs(Math.round(S.pageY)-(((M=X.current)==null?void 0:M.y)??0))}},H=S=>{D.x<=10&&D.y<=10?S.preventDefault():b.contains(S.target)||ne(!1),document.removeEventListener("pointermove",P),X.current=null};return X.current!==null&&(document.addEventListener("pointermove",P),document.addEventListener("pointerup",H,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",P),document.removeEventListener("pointerup",H,{capture:!0})}}},[b,ne,X]),c.useEffect(()=>{const D=()=>ne(!1);return window.addEventListener("blur",D),window.addEventListener("resize",D),()=>{window.removeEventListener("blur",D),window.removeEventListener("resize",D)}},[ne]);const[De,Ee]=br(D=>{const P=F().filter(L=>!L.disabled),H=P.find(L=>L.ref.current===document.activeElement),S=yr(P,D,H);S&&setTimeout(()=>S.ref.current.focus())}),G=c.useCallback((D,P,H)=>{const S=!V.current&&!H;(g.value!==void 0&&g.value===P||S)&&(T(D),S&&(V.current=!0))},[g.value]),ae=c.useCallback(()=>b==null?void 0:b.focus(),[b]),se=c.useCallback((D,P,H)=>{const S=!V.current&&!H;(g.value!==void 0&&g.value===P||S)&&k(D)},[g.value]),Ce=r==="popper"?xn:nr,Y=Ce===xn?{side:l,sideOffset:d,align:u,alignOffset:f,arrowPadding:p,collisionBoundary:x,collisionPadding:m,sticky:w,hideWhenDetached:h,avoidCollisions:v}:{};return s.jsx(er,{scope:n,content:b,viewport:j,onViewportChange:I,itemRefCallback:G,selectedItem:_,onItemLeave:ae,itemTextRefCallback:se,focusSelectedItem:B,selectedItemText:A,position:r,isPositioned:z,searchRef:De,children:s.jsx(Qo,{as:Ws,allowPinchZoom:!0,children:s.jsx(ea,{asChild:!0,trapped:g.open,onMountAutoFocus:D=>{D.preventDefault()},onUnmountAutoFocus:W(o,D=>{var P;(P=g.trigger)==null||P.focus({preventScroll:!0}),D.preventDefault()}),children:s.jsx(ta,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:D=>D.preventDefault(),onDismiss:()=>g.onOpenChange(!1),children:s.jsx(Ce,{role:"listbox",id:g.contentId,"data-state":g.open?"open":"closed",dir:g.dir,onContextMenu:D=>D.preventDefault(),...y,...Y,onPlaced:()=>E(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:W(y.onKeyDown,D=>{const P=D.ctrlKey||D.altKey||D.metaKey;if(D.key==="Tab"&&D.preventDefault(),!P&&D.key.length===1&&Ee(D.key),["ArrowUp","ArrowDown","Home","End"].includes(D.key)){let S=F().filter(L=>!L.disabled).map(L=>L.ref.current);if(["ArrowUp","End"].includes(D.key)&&(S=S.slice().reverse()),["ArrowUp","ArrowDown"].includes(D.key)){const L=D.target,M=S.indexOf(L);S=S.slice(M+1)}setTimeout(()=>$(S)),D.preventDefault()}})})})})})})});tr.displayName=Wa;var Ka="SelectItemAlignedPosition",nr=c.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...o}=e,a=He(Ze,n),i=We(Ze,n),[l,d]=c.useState(null),[u,f]=c.useState(null),p=pe(t,R=>f(R)),x=Ut(n),m=c.useRef(!1),w=c.useRef(!0),{viewport:h,selectedItem:v,selectedItemText:y,focusSelectedItem:g}=i,b=c.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&u&&h&&v&&y){const R=a.trigger.getBoundingClientRect(),_=u.getBoundingClientRect(),T=a.valueNode.getBoundingClientRect(),A=y.getBoundingClientRect();if(a.dir!=="rtl"){const L=A.left-_.left,M=T.left-L,re=R.left-M,Q=R.width+re,je=Math.max(Q,_.width),Ne=window.innerWidth-ve,Qe=ps(M,[ve,Math.max(ve,Ne-je)]);l.style.minWidth=Q+"px",l.style.left=Qe+"px"}else{const L=_.right-A.right,M=window.innerWidth-T.right-L,re=window.innerWidth-R.right-M,Q=R.width+re,je=Math.max(Q,_.width),Ne=window.innerWidth-ve,Qe=ps(M,[ve,Math.max(ve,Ne-je)]);l.style.minWidth=Q+"px",l.style.right=Qe+"px"}const k=x(),F=window.innerHeight-ve*2,z=h.scrollHeight,E=window.getComputedStyle(u),V=parseInt(E.borderTopWidth,10),$=parseInt(E.paddingTop,10),B=parseInt(E.borderBottomWidth,10),ne=parseInt(E.paddingBottom,10),X=V+$+z+ne+B,De=Math.min(v.offsetHeight*5,X),Ee=window.getComputedStyle(h),G=parseInt(Ee.paddingTop,10),ae=parseInt(Ee.paddingBottom,10),se=R.top+R.height/2-ve,Ce=F-se,Y=v.offsetHeight/2,D=v.offsetTop+Y,P=V+$+D,H=X-P;if(P<=se){const L=k.length>0&&v===k[k.length-1].ref.current;l.style.bottom="0px";const M=u.clientHeight-h.offsetTop-h.offsetHeight,re=Math.max(Ce,Y+(L?ae:0)+M+B),Q=P+re;l.style.height=Q+"px"}else{const L=k.length>0&&v===k[0].ref.current;l.style.top="0px";const re=Math.max(se,V+h.offsetTop+(L?G:0)+Y)+H;l.style.height=re+"px",h.scrollTop=P-se+h.offsetTop}l.style.margin=`${ve}px 0`,l.style.minHeight=De+"px",l.style.maxHeight=F+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[x,a.trigger,a.valueNode,l,u,h,v,y,a.dir,r]);Te(()=>b(),[b]);const[C,j]=c.useState();Te(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const I=c.useCallback(R=>{R&&w.current===!0&&(b(),g==null||g(),w.current=!1)},[b,g]);return s.jsx(qa,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:I,children:s.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:s.jsx(q.div,{...o,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});nr.displayName=Ka;var Ua="SelectPopperPosition",xn=c.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:o=ve,...a}=e,i=qt(n);return s.jsx(na,{...i,...a,ref:t,align:r,collisionPadding:o,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});xn.displayName=Ua;var[qa,Fn]=ct(Ze,{}),gn="SelectViewport",sr=c.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...o}=e,a=We(gn,n),i=Fn(gn,n),l=pe(t,a.onViewportChange),d=c.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),s.jsx(Kt.Slot,{scope:n,children:s.jsx(q.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:W(o.onScroll,u=>{const f=u.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:x}=i;if(x!=null&&x.current&&p){const m=Math.abs(d.current-f.scrollTop);if(m>0){const w=window.innerHeight-ve*2,h=parseFloat(p.style.minHeight),v=parseFloat(p.style.height),y=Math.max(h,v);if(y<w){const g=y+m,b=Math.min(w,g),C=g-b;p.style.height=b+"px",p.style.bottom==="0px"&&(f.scrollTop=C>0?C:0,p.style.justifyContent="flex-end")}}}d.current=f.scrollTop})})})]})});sr.displayName=gn;var rr="SelectGroup",[Xa,Ga]=ct(rr),or=c.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=Nt();return s.jsx(Xa,{scope:n,id:o,children:s.jsx(q.div,{role:"group","aria-labelledby":o,...r,ref:t})})});or.displayName=rr;var ar="SelectLabel",ir=c.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=Ga(ar,n);return s.jsx(q.div,{id:o.id,...r,ref:t})});ir.displayName=ar;var Ot="SelectItem",[Ya,lr]=ct(Ot),cr=c.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:o=!1,textValue:a,...i}=e,l=He(Ot,n),d=We(Ot,n),u=l.value===r,[f,p]=c.useState(a??""),[x,m]=c.useState(!1),w=pe(t,g=>{var b;return(b=d.itemRefCallback)==null?void 0:b.call(d,g,r,o)}),h=Nt(),v=c.useRef("touch"),y=()=>{o||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(Ya,{scope:n,value:r,disabled:o,textId:h,isSelected:u,onItemTextChange:c.useCallback(g=>{p(b=>b||((g==null?void 0:g.textContent)??"").trim())},[]),children:s.jsx(Kt.ItemSlot,{scope:n,value:r,disabled:o,textValue:f,children:s.jsx(q.div,{role:"option","aria-labelledby":h,"data-highlighted":x?"":void 0,"aria-selected":u&&x,"data-state":u?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...i,ref:w,onFocus:W(i.onFocus,()=>m(!0)),onBlur:W(i.onBlur,()=>m(!1)),onClick:W(i.onClick,()=>{v.current!=="mouse"&&y()}),onPointerUp:W(i.onPointerUp,()=>{v.current==="mouse"&&y()}),onPointerDown:W(i.onPointerDown,g=>{v.current=g.pointerType}),onPointerMove:W(i.onPointerMove,g=>{var b;v.current=g.pointerType,o?(b=d.onItemLeave)==null||b.call(d):v.current==="mouse"&&g.currentTarget.focus({preventScroll:!0})}),onPointerLeave:W(i.onPointerLeave,g=>{var b;g.currentTarget===document.activeElement&&((b=d.onItemLeave)==null||b.call(d))}),onKeyDown:W(i.onKeyDown,g=>{var C;((C=d.searchRef)==null?void 0:C.current)!==""&&g.key===" "||(Oa.includes(g.key)&&y(),g.key===" "&&g.preventDefault())})})})})});cr.displayName=Ot;var gt="SelectItemText",dr=c.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,...a}=e,i=He(gt,n),l=We(gt,n),d=lr(gt,n),u=Va(gt,n),[f,p]=c.useState(null),x=pe(t,y=>p(y),d.onItemTextChange,y=>{var g;return(g=l.itemTextRefCallback)==null?void 0:g.call(l,y,d.value,d.disabled)}),m=f==null?void 0:f.textContent,w=c.useMemo(()=>s.jsx("option",{value:d.value,disabled:d.disabled,children:m},d.value),[d.disabled,d.value,m]),{onNativeOptionAdd:h,onNativeOptionRemove:v}=u;return Te(()=>(h(w),()=>v(w)),[h,v,w]),s.jsxs(s.Fragment,{children:[s.jsx(q.span,{id:d.textId,...a,ref:x}),d.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Ue.createPortal(a.children,i.valueNode):null]})});dr.displayName=gt;var ur="SelectItemIndicator",fr=c.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return lr(ur,n).isSelected?s.jsx(q.span,{"aria-hidden":!0,...r,ref:t}):null});fr.displayName=ur;var vn="SelectScrollUpButton",pr=c.forwardRef((e,t)=>{const n=We(vn,e.__scopeSelect),r=Fn(vn,e.__scopeSelect),[o,a]=c.useState(!1),i=pe(t,r.onScrollButtonChange);return Te(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=d.scrollTop>0;a(u)};const d=n.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),o?s.jsx(mr,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=n;l&&d&&(l.scrollTop=l.scrollTop-d.offsetHeight)}}):null});pr.displayName=vn;var bn="SelectScrollDownButton",hr=c.forwardRef((e,t)=>{const n=We(bn,e.__scopeSelect),r=Fn(bn,e.__scopeSelect),[o,a]=c.useState(!1),i=pe(t,r.onScrollButtonChange);return Te(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=d.scrollHeight-d.clientHeight,f=Math.ceil(d.scrollTop)<u;a(f)};const d=n.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),o?s.jsx(mr,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=n;l&&d&&(l.scrollTop=l.scrollTop+d.offsetHeight)}}):null});hr.displayName=bn;var mr=c.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...o}=e,a=We("SelectScrollButton",n),i=c.useRef(null),l=Ut(n),d=c.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return c.useEffect(()=>()=>d(),[d]),Te(()=>{var f;const u=l().find(p=>p.ref.current===document.activeElement);(f=u==null?void 0:u.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),s.jsx(q.div,{"aria-hidden":!0,...o,ref:t,style:{flexShrink:0,...o.style},onPointerDown:W(o.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:W(o.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:W(o.onPointerLeave,()=>{d()})})}),Za="SelectSeparator",xr=c.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return s.jsx(q.div,{"aria-hidden":!0,...r,ref:t})});xr.displayName=Za;var yn="SelectArrow",Ja=c.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=qt(n),a=He(yn,n),i=We(yn,n);return a.open&&i.position==="popper"?s.jsx(sa,{...o,...r,ref:t}):null});Ja.displayName=yn;function gr(e){return e===""||e===void 0}var vr=c.forwardRef((e,t)=>{const{value:n,...r}=e,o=c.useRef(null),a=pe(t,o),i=Ks(n);return c.useEffect(()=>{const l=o.current,d=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(d,"value").set;if(i!==n&&f){const p=new Event("change",{bubbles:!0});f.call(l,n),l.dispatchEvent(p)}},[i,n]),s.jsx(ma,{asChild:!0,children:s.jsx("select",{...r,ref:a,defaultValue:n})})});vr.displayName="BubbleSelect";function br(e){const t=Ho(e),n=c.useRef(""),r=c.useRef(0),o=c.useCallback(i=>{const l=n.current+i;t(l),function d(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>d(""),1e3))}(l)},[t]),a=c.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return c.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,o,a]}function yr(e,t,n){const o=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let i=Qa(e,Math.max(a,0));o.length===1&&(i=i.filter(u=>u!==n));const d=i.find(u=>u.textValue.toLowerCase().startsWith(o.toLowerCase()));return d!==n?d:void 0}function Qa(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var ei=Us,wr=Xs,ti=Ys,ni=Zs,si=Js,Cr=Qs,ri=sr,oi=or,jr=ir,Nr=cr,ai=dr,ii=fr,Sr=pr,Rr=hr,_r=xr;const Ir=ei,Dr=oi,Er=ti,Vn=N.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(wr,{ref:r,className:J("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,s.jsx(ni,{asChild:!0,children:s.jsx(ra,{className:"size-4 opacity-50"})})]}));Vn.displayName=wr.displayName;const kr=N.forwardRef(({className:e,...t},n)=>s.jsx(Sr,{ref:n,className:J("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(oa,{})}));kr.displayName=Sr.displayName;const Tr=N.forwardRef(({className:e,...t},n)=>s.jsx(Rr,{ref:n,className:J("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Ts,{})}));Tr.displayName=Rr.displayName;const $n=N.forwardRef(({className:e,children:t,position:n="popper",...r},o)=>s.jsx(si,{children:s.jsxs(Cr,{ref:o,className:J("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[s.jsx(kr,{}),s.jsx(ri,{className:J("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(Tr,{})]})}));$n.displayName=Cr.displayName;const li=N.forwardRef(({className:e,...t},n)=>s.jsx(jr,{ref:n,className:J("px-2 py-1.5 text-sm font-semibold",e),...t}));li.displayName=jr.displayName;const Fe=N.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(Nr,{ref:r,className:J("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:s.jsx(ii,{children:s.jsx(ks,{className:"size-4"})})}),s.jsx(ai,{children:t})]}));Fe.displayName=Nr.displayName;const ci=N.forwardRef(({className:e,...t},n)=>s.jsx(_r,{ref:n,className:J("-mx-1 my-1 h-px bg-muted",e),...t}));ci.displayName=_r.displayName;var Hn="Collapsible",[di,Mr]=Ht(Hn),[ui,Wn]=di(Hn),Ar=c.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:o,disabled:a,onOpenChange:i,...l}=e,[d=!1,u]=it({prop:r,defaultProp:o,onChange:i});return s.jsx(ui,{scope:n,disabled:a,contentId:Nt(),open:d,onOpenToggle:c.useCallback(()=>u(f=>!f),[u]),children:s.jsx(q.div,{"data-state":Un(d),"data-disabled":a?"":void 0,...l,ref:t})})});Ar.displayName=Hn;var Pr="CollapsibleTrigger",Lr=c.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,o=Wn(Pr,n);return s.jsx(q.button,{type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":Un(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled,...r,ref:t,onClick:W(e.onClick,o.onOpenToggle)})});Lr.displayName=Pr;var Kn="CollapsibleContent",Or=c.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=Wn(Kn,e.__scopeCollapsible);return s.jsx(_s,{present:n||o.open,children:({present:a})=>s.jsx(fi,{...r,ref:t,present:a})})});Or.displayName=Kn;var fi=c.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:o,...a}=e,i=Wn(Kn,n),[l,d]=c.useState(r),u=c.useRef(null),f=pe(t,u),p=c.useRef(0),x=p.current,m=c.useRef(0),w=m.current,h=i.open||l,v=c.useRef(h),y=c.useRef(void 0);return c.useEffect(()=>{const g=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(g)},[]),Te(()=>{const g=u.current;if(g){y.current=y.current||{transitionDuration:g.style.transitionDuration,animationName:g.style.animationName},g.style.transitionDuration="0s",g.style.animationName="none";const b=g.getBoundingClientRect();p.current=b.height,m.current=b.width,v.current||(g.style.transitionDuration=y.current.transitionDuration,g.style.animationName=y.current.animationName),d(r)}},[i.open,r]),s.jsx(q.div,{"data-state":Un(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!h,...a,ref:f,style:{"--radix-collapsible-content-height":x?`${x}px`:void 0,"--radix-collapsible-content-width":w?`${w}px`:void 0,...e.style},children:h&&o})});function Un(e){return e?"open":"closed"}var pi=Ar,hi=Lr,mi=Or,Me="Accordion",xi=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[qn,gi,vi]=Es(Me),[Xt,Hc]=Ht(Me,[vi,Mr]),Xn=Mr(),zr=N.forwardRef((e,t)=>{const{type:n,...r}=e,o=r,a=r;return s.jsx(qn.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?s.jsx(Ci,{...a,ref:t}):s.jsx(wi,{...o,ref:t})})});zr.displayName=Me;var[Br,bi]=Xt(Me),[Fr,yi]=Xt(Me,{collapsible:!1}),wi=N.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},collapsible:a=!1,...i}=e,[l,d]=it({prop:n,defaultProp:r,onChange:o});return s.jsx(Br,{scope:e.__scopeAccordion,value:l?[l]:[],onItemOpen:d,onItemClose:N.useCallback(()=>a&&d(""),[a,d]),children:s.jsx(Fr,{scope:e.__scopeAccordion,collapsible:a,children:s.jsx(Vr,{...i,ref:t})})})}),Ci=N.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...a}=e,[i=[],l]=it({prop:n,defaultProp:r,onChange:o}),d=N.useCallback(f=>l((p=[])=>[...p,f]),[l]),u=N.useCallback(f=>l((p=[])=>p.filter(x=>x!==f)),[l]);return s.jsx(Br,{scope:e.__scopeAccordion,value:i,onItemOpen:d,onItemClose:u,children:s.jsx(Fr,{scope:e.__scopeAccordion,collapsible:!0,children:s.jsx(Vr,{...a,ref:t})})})}),[ji,Gt]=Xt(Me),Vr=N.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:r,dir:o,orientation:a="vertical",...i}=e,l=N.useRef(null),d=pe(l,t),u=gi(n),p=Ds(o)==="ltr",x=W(e.onKeyDown,m=>{var _;if(!xi.includes(m.key))return;const w=m.target,h=u().filter(T=>{var A;return!((A=T.ref.current)!=null&&A.disabled)}),v=h.findIndex(T=>T.ref.current===w),y=h.length;if(v===-1)return;m.preventDefault();let g=v;const b=0,C=y-1,j=()=>{g=v+1,g>C&&(g=b)},I=()=>{g=v-1,g<b&&(g=C)};switch(m.key){case"Home":g=b;break;case"End":g=C;break;case"ArrowRight":a==="horizontal"&&(p?j():I());break;case"ArrowDown":a==="vertical"&&j();break;case"ArrowLeft":a==="horizontal"&&(p?I():j());break;case"ArrowUp":a==="vertical"&&I();break}const R=g%y;(_=h[R].ref.current)==null||_.focus()});return s.jsx(ji,{scope:n,disabled:r,direction:o,orientation:a,children:s.jsx(qn.Slot,{scope:n,children:s.jsx(q.div,{...i,"data-orientation":a,ref:d,onKeyDown:r?void 0:x})})})}),zt="AccordionItem",[Ni,Gn]=Xt(zt),$r=N.forwardRef((e,t)=>{const{__scopeAccordion:n,value:r,...o}=e,a=Gt(zt,n),i=bi(zt,n),l=Xn(n),d=Nt(),u=r&&i.value.includes(r)||!1,f=a.disabled||e.disabled;return s.jsx(Ni,{scope:n,open:u,disabled:f,triggerId:d,children:s.jsx(pi,{"data-orientation":a.orientation,"data-state":Xr(u),...l,...o,ref:t,disabled:f,open:u,onOpenChange:p=>{p?i.onItemOpen(r):i.onItemClose(r)}})})});$r.displayName=zt;var Hr="AccordionHeader",Wr=N.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=Gt(Me,n),a=Gn(Hr,n);return s.jsx(q.h3,{"data-orientation":o.orientation,"data-state":Xr(a.open),"data-disabled":a.disabled?"":void 0,...r,ref:t})});Wr.displayName=Hr;var wn="AccordionTrigger",Kr=N.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=Gt(Me,n),a=Gn(wn,n),i=yi(wn,n),l=Xn(n);return s.jsx(qn.ItemSlot,{scope:n,children:s.jsx(hi,{"aria-disabled":a.open&&!i.collapsible||void 0,"data-orientation":o.orientation,id:a.triggerId,...l,...r,ref:t})})});Kr.displayName=wn;var Ur="AccordionContent",qr=N.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=Gt(Me,n),a=Gn(Ur,n),i=Xn(n);return s.jsx(mi,{role:"region","aria-labelledby":a.triggerId,"data-orientation":o.orientation,...i,...r,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});qr.displayName=Ur;function Xr(e){return e?"open":"closed"}var Si=zr,Ri=$r,_i=Wr,Gr=Kr,Yr=qr;const Yt=Si,Xe=N.forwardRef(({className:e,...t},n)=>s.jsx(Ri,{ref:n,className:J("border-b",e),...t}));Xe.displayName="AccordionItem";const Ge=N.forwardRef(({className:e,children:t,iconPosition:n="left",...r},o)=>{const a=()=>s.jsx(Ts,{className:"size-4 shrink-0 text-muted-foreground transition-transform duration-200"});return s.jsx(_i,{className:"flex",children:s.jsx(Gr,{ref:o,className:J("flex flex-1 items-center py-4 gap-x-2 text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180 justify-between",e),...r,children:r.asChild?s.jsxs("div",{className:"flex",children:[n==="left"?a():null,t,n==="right"?a():null]}):s.jsxs(s.Fragment,{children:[n==="left"?a():null,t,n==="right"?a():null]})})})});Ge.displayName=Gr.displayName;const Ye=N.forwardRef(({className:e,children:t,...n},r)=>s.jsx(Yr,{ref:r,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:s.jsx("div",{className:J("pb-4 pt-0",e),children:t})}));Ye.displayName=Yr.displayName;const be=N.forwardRef((e,t)=>s.jsx(U,{ref:t,variant:"ghost",className:"size-8 p-2 text-slate-500 hover:cursor-pointer hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",asChild:!0,...e}));be.displayName="ListItemHeaderButton";function Ii(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo(()=>r=>{t.forEach(o=>o(r))},t)}const Zt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function dt(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Yn(e){return"nodeType"in e}function oe(e){var t,n;return e?dt(e)?e:Yn(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Zn(e){const{Document:t}=oe(e);return e instanceof t}function _t(e){return dt(e)?!1:e instanceof oe(e).HTMLElement}function Zr(e){return e instanceof oe(e).SVGElement}function ut(e){return e?dt(e)?e.document:Yn(e)?Zn(e)?e:_t(e)||Zr(e)?e.ownerDocument:document:document:document}const _e=Zt?c.useLayoutEffect:c.useEffect;function Jn(e){const t=c.useRef(e);return _e(()=>{t.current=e}),c.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}function Di(){const e=c.useRef(null),t=c.useCallback((r,o)=>{e.current=setInterval(r,o)},[]),n=c.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Ct(e,t){t===void 0&&(t=[e]);const n=c.useRef(e);return _e(()=>{n.current!==e&&(n.current=e)},t),n}function It(e,t){const n=c.useRef();return c.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Bt(e){const t=Jn(e),n=c.useRef(null),r=c.useCallback(o=>{o!==n.current&&(t==null||t(o,n.current)),n.current=o},[]);return[n,r]}function Cn(e){const t=c.useRef();return c.useEffect(()=>{t.current=e},[e]),t.current}let ln={};function Dt(e,t){return c.useMemo(()=>{if(t)return t;const n=ln[e]==null?0:ln[e]+1;return ln[e]=n,e+"-"+n},[e,t])}function Jr(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((a,i)=>{const l=Object.entries(i);for(const[d,u]of l){const f=a[d];f!=null&&(a[d]=f+e*u)}return a},{...t})}}const at=Jr(1),Ft=Jr(-1);function Ei(e){return"clientX"in e&&"clientY"in e}function Qn(e){if(!e)return!1;const{KeyboardEvent:t}=oe(e.target);return t&&e instanceof t}function ki(e){if(!e)return!1;const{TouchEvent:t}=oe(e.target);return t&&e instanceof t}function jn(e){if(ki(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Ei(e)?{x:e.clientX,y:e.clientY}:null}const lt=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[lt.Translate.toString(e),lt.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),ms="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Ti(e){return e.matches(ms)?e:e.querySelector(ms)}const Mi={display:"none"};function Ai(e){let{id:t,value:n}=e;return N.createElement("div",{id:t,style:Mi},n)}function Pi(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return N.createElement("div",{id:t,style:o,role:"status","aria-live":r,"aria-atomic":!0},n)}function Li(){const[e,t]=c.useState("");return{announce:c.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const Qr=c.createContext(null);function Oi(e){const t=c.useContext(Qr);c.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function zi(){const[e]=c.useState(()=>new Set),t=c.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[c.useCallback(r=>{let{type:o,event:a}=r;e.forEach(i=>{var l;return(l=i[o])==null?void 0:l.call(i,a)})},[e]),t]}const Bi={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Fi={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Vi(e){let{announcements:t=Fi,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=Bi}=e;const{announce:a,announcement:i}=Li(),l=Dt("DndLiveRegion"),[d,u]=c.useState(!1);if(c.useEffect(()=>{u(!0)},[]),Oi(c.useMemo(()=>({onDragStart(p){let{active:x}=p;a(t.onDragStart({active:x}))},onDragMove(p){let{active:x,over:m}=p;t.onDragMove&&a(t.onDragMove({active:x,over:m}))},onDragOver(p){let{active:x,over:m}=p;a(t.onDragOver({active:x,over:m}))},onDragEnd(p){let{active:x,over:m}=p;a(t.onDragEnd({active:x,over:m}))},onDragCancel(p){let{active:x,over:m}=p;a(t.onDragCancel({active:x,over:m}))}}),[a,t])),!d)return null;const f=N.createElement(N.Fragment,null,N.createElement(Ai,{id:r,value:o.draggable}),N.createElement(Pi,{id:l,announcement:i}));return n?Ue.createPortal(f,n):f}var K;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(K||(K={}));function Vt(){}function eo(e,t){return c.useMemo(()=>({sensor:e,options:{}}),[e,t])}function to(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const ye=Object.freeze({x:0,y:0});function $i(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Hi(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Wi(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Ki(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function xs(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const no=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=xs(t,t.left,t.top),a=[];for(const i of r){const{id:l}=i,d=n.get(l);if(d){const u=$i(xs(d),o);a.push({id:l,data:{droppableContainer:i,value:u}})}}return a.sort(Hi)};function Ui(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),i=o-r,l=a-n;if(r<o&&n<a){const d=t.width*t.height,u=e.width*e.height,f=i*l,p=f/(d+u-f);return Number(p.toFixed(4))}return 0}const qi=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const a of r){const{id:i}=a,l=n.get(i);if(l){const d=Ui(l,t);d>0&&o.push({id:i,data:{droppableContainer:a,value:d}})}}return o.sort(Wi)};function Xi(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function so(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ye}function Gi(e){return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return o.reduce((i,l)=>({...i,top:i.top+e*l.y,bottom:i.bottom+e*l.y,left:i.left+e*l.x,right:i.right+e*l.x}),{...n})}}const Yi=Gi(1);function Zi(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Ji(e,t,n){const r=Zi(t);if(!r)return e;const{scaleX:o,scaleY:a,x:i,y:l}=r,d=e.left-i-(1-o)*parseFloat(n),u=e.top-l-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),f=o?e.width/o:e.width,p=a?e.height/a:e.height;return{width:f,height:p,top:u,right:d+f,bottom:u+p,left:d}}const Qi={ignoreTransform:!1};function ft(e,t){t===void 0&&(t=Qi);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:f}=oe(e).getComputedStyle(e);u&&(n=Ji(n,u,f))}const{top:r,left:o,width:a,height:i,bottom:l,right:d}=n;return{top:r,left:o,width:a,height:i,bottom:l,right:d}}function gs(e){return ft(e,{ignoreTransform:!0})}function el(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function tl(e,t){return t===void 0&&(t=oe(e).getComputedStyle(e)),t.position==="fixed"}function nl(e,t){t===void 0&&(t=oe(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const a=t[o];return typeof a=="string"?n.test(a):!1})}function es(e,t){const n=[];function r(o){if(t!=null&&n.length>=t||!o)return n;if(Zn(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!_t(o)||Zr(o)||n.includes(o))return n;const a=oe(e).getComputedStyle(o);return o!==e&&nl(o,a)&&n.push(o),tl(o,a)?n:r(o.parentNode)}return e?r(e):n}function ro(e){const[t]=es(e,1);return t??null}function cn(e){return!Zt||!e?null:dt(e)?e:Yn(e)?Zn(e)||e===ut(e).scrollingElement?window:_t(e)?e:null:null}function oo(e){return dt(e)?e.scrollX:e.scrollLeft}function ao(e){return dt(e)?e.scrollY:e.scrollTop}function Nn(e){return{x:oo(e),y:ao(e)}}var Z;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Z||(Z={}));function io(e){return!Zt||!e?!1:e===document.scrollingElement}function lo(e){const t={x:0,y:0},n=io(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},o=e.scrollTop<=t.y,a=e.scrollLeft<=t.x,i=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:o,isLeft:a,isBottom:i,isRight:l,maxScroll:r,minScroll:t}}const sl={x:.2,y:.2};function rl(e,t,n,r,o){let{top:a,left:i,right:l,bottom:d}=n;r===void 0&&(r=10),o===void 0&&(o=sl);const{isTop:u,isBottom:f,isLeft:p,isRight:x}=lo(e),m={x:0,y:0},w={x:0,y:0},h={height:t.height*o.y,width:t.width*o.x};return!u&&a<=t.top+h.height?(m.y=Z.Backward,w.y=r*Math.abs((t.top+h.height-a)/h.height)):!f&&d>=t.bottom-h.height&&(m.y=Z.Forward,w.y=r*Math.abs((t.bottom-h.height-d)/h.height)),!x&&l>=t.right-h.width?(m.x=Z.Forward,w.x=r*Math.abs((t.right-h.width-l)/h.width)):!p&&i<=t.left+h.width&&(m.x=Z.Backward,w.x=r*Math.abs((t.left+h.width-i)/h.width)),{direction:m,speed:w}}function ol(e){if(e===document.scrollingElement){const{innerWidth:a,innerHeight:i}=window;return{top:0,left:0,right:a,bottom:i,width:a,height:i}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function co(e){return e.reduce((t,n)=>at(t,Nn(n)),ye)}function al(e){return e.reduce((t,n)=>t+oo(n),0)}function il(e){return e.reduce((t,n)=>t+ao(n),0)}function ll(e,t){if(t===void 0&&(t=ft),!e)return;const{top:n,left:r,bottom:o,right:a}=t(e);ro(e)&&(o<=0||a<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const cl=[["x",["left","right"],al],["y",["top","bottom"],il]];class ts{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=es(n),o=co(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[a,i,l]of cl)for(const d of i)Object.defineProperty(this,d,{get:()=>{const u=l(r),f=o[a]-u;return this.rect[d]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class vt{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var o;(o=this.target)==null||o.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function dl(e){const{EventTarget:t}=oe(e);return e instanceof t?e:ut(e)}function dn(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var ge;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(ge||(ge={}));function vs(e){e.preventDefault()}function ul(e){e.stopPropagation()}var O;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(O||(O={}));const uo={start:[O.Space,O.Enter],cancel:[O.Esc],end:[O.Space,O.Enter,O.Tab]},fl=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case O.Right:return{...n,x:n.x+25};case O.Left:return{...n,x:n.x-25};case O.Down:return{...n,y:n.y+25};case O.Up:return{...n,y:n.y-25}}};class fo{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new vt(ut(n)),this.windowListeners=new vt(oe(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ge.Resize,this.handleCancel),this.windowListeners.add(ge.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ge.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&ll(r),n(ye)}handleKeyDown(t){if(Qn(t)){const{active:n,context:r,options:o}=this.props,{keyboardCodes:a=uo,coordinateGetter:i=fl,scrollBehavior:l="smooth"}=o,{code:d}=t;if(a.end.includes(d)){this.handleEnd(t);return}if(a.cancel.includes(d)){this.handleCancel(t);return}const{collisionRect:u}=r.current,f=u?{x:u.left,y:u.top}:ye;this.referenceCoordinates||(this.referenceCoordinates=f);const p=i(t,{active:n,context:r.current,currentCoordinates:f});if(p){const x=Ft(p,f),m={x:0,y:0},{scrollableAncestors:w}=r.current;for(const h of w){const v=t.code,{isTop:y,isRight:g,isLeft:b,isBottom:C,maxScroll:j,minScroll:I}=lo(h),R=ol(h),_={x:Math.min(v===O.Right?R.right-R.width/2:R.right,Math.max(v===O.Right?R.left:R.left+R.width/2,p.x)),y:Math.min(v===O.Down?R.bottom-R.height/2:R.bottom,Math.max(v===O.Down?R.top:R.top+R.height/2,p.y))},T=v===O.Right&&!g||v===O.Left&&!b,A=v===O.Down&&!C||v===O.Up&&!y;if(T&&_.x!==p.x){const k=h.scrollLeft+x.x,F=v===O.Right&&k<=j.x||v===O.Left&&k>=I.x;if(F&&!x.y){h.scrollTo({left:k,behavior:l});return}F?m.x=h.scrollLeft-k:m.x=v===O.Right?h.scrollLeft-j.x:h.scrollLeft-I.x,m.x&&h.scrollBy({left:-m.x,behavior:l});break}else if(A&&_.y!==p.y){const k=h.scrollTop+x.y,F=v===O.Down&&k<=j.y||v===O.Up&&k>=I.y;if(F&&!x.x){h.scrollTo({top:k,behavior:l});return}F?m.y=h.scrollTop-k:m.y=v===O.Down?h.scrollTop-j.y:h.scrollTop-I.y,m.y&&h.scrollBy({top:-m.y,behavior:l});break}}this.handleMove(t,at(Ft(p,this.referenceCoordinates),m))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}fo.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=uo,onActivation:o}=t,{active:a}=n;const{code:i}=e.nativeEvent;if(r.start.includes(i)){const l=a.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),o==null||o({event:e.nativeEvent}),!0)}return!1}}];function bs(e){return!!(e&&"distance"in e)}function ys(e){return!!(e&&"delay"in e)}class ns{constructor(t,n,r){var o;r===void 0&&(r=dl(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:a}=t,{target:i}=a;this.props=t,this.events=n,this.document=ut(i),this.documentListeners=new vt(this.document),this.listeners=new vt(r),this.windowListeners=new vt(oe(i)),this.initialCoordinates=(o=jn(a))!=null?o:ye,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(ge.Resize,this.handleCancel),this.windowListeners.add(ge.DragStart,vs),this.windowListeners.add(ge.VisibilityChange,this.handleCancel),this.windowListeners.add(ge.ContextMenu,vs),this.documentListeners.add(ge.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(ys(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(bs(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:o}=this.props;o(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(ge.Click,ul,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ge.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:o,props:a}=this,{onMove:i,options:{activationConstraint:l}}=a;if(!o)return;const d=(n=jn(t))!=null?n:ye,u=Ft(o,d);if(!r&&l){if(bs(l)){if(l.tolerance!=null&&dn(u,l.tolerance))return this.handleCancel();if(dn(u,l.distance))return this.handleStart()}if(ys(l)&&dn(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}t.cancelable&&t.preventDefault(),i(d)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===O.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const pl={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Jt extends ns{constructor(t){const{event:n}=t,r=ut(n.target);super(t,pl,r)}}Jt.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const hl={move:{name:"mousemove"},end:{name:"mouseup"}};var Sn;(function(e){e[e.RightClick=2]="RightClick"})(Sn||(Sn={}));class ml extends ns{constructor(t){super(t,hl,ut(t.event.target))}}ml.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Sn.RightClick?!1:(r==null||r({event:n}),!0)}}];const un={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class xl extends ns{constructor(t){super(t,un)}static setup(){return window.addEventListener(un.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(un.move.name,t)};function t(){}}}xl.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return o.length>1?!1:(r==null||r({event:n}),!0)}}];var bt;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(bt||(bt={}));var $t;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})($t||($t={}));function gl(e){let{acceleration:t,activator:n=bt.Pointer,canScroll:r,draggingRect:o,enabled:a,interval:i=5,order:l=$t.TreeOrder,pointerCoordinates:d,scrollableAncestors:u,scrollableAncestorRects:f,delta:p,threshold:x}=e;const m=bl({delta:p,disabled:!a}),[w,h]=Di(),v=c.useRef({x:0,y:0}),y=c.useRef({x:0,y:0}),g=c.useMemo(()=>{switch(n){case bt.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case bt.DraggableRect:return o}},[n,o,d]),b=c.useRef(null),C=c.useCallback(()=>{const I=b.current;if(!I)return;const R=v.current.x*y.current.x,_=v.current.y*y.current.y;I.scrollBy(R,_)},[]),j=c.useMemo(()=>l===$t.TreeOrder?[...u].reverse():u,[l,u]);c.useEffect(()=>{if(!a||!u.length||!g){h();return}for(const I of j){if((r==null?void 0:r(I))===!1)continue;const R=u.indexOf(I),_=f[R];if(!_)continue;const{direction:T,speed:A}=rl(I,_,g,t,x);for(const k of["x","y"])m[k][T[k]]||(A[k]=0,T[k]=0);if(A.x>0||A.y>0){h(),b.current=I,w(C,i),v.current=A,y.current=T;return}}v.current={x:0,y:0},y.current={x:0,y:0},h()},[t,C,r,h,a,i,JSON.stringify(g),JSON.stringify(m),w,u,j,f,JSON.stringify(x)])}const vl={x:{[Z.Backward]:!1,[Z.Forward]:!1},y:{[Z.Backward]:!1,[Z.Forward]:!1}};function bl(e){let{delta:t,disabled:n}=e;const r=Cn(t);return It(o=>{if(n||!r||!o)return vl;const a={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Z.Backward]:o.x[Z.Backward]||a.x===-1,[Z.Forward]:o.x[Z.Forward]||a.x===1},y:{[Z.Backward]:o.y[Z.Backward]||a.y===-1,[Z.Forward]:o.y[Z.Forward]||a.y===1}}},[n,t,r])}function yl(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return It(o=>{var a;return t==null?null:(a=r??o)!=null?a:null},[r,t])}function wl(e,t){return c.useMemo(()=>e.reduce((n,r)=>{const{sensor:o}=r,a=o.activators.map(i=>({eventName:i.eventName,handler:t(i.handler,r)}));return[...n,...a]},[]),[e,t])}var jt;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(jt||(jt={}));var Rn;(function(e){e.Optimized="optimized"})(Rn||(Rn={}));const ws=new Map;function Cl(e,t){let{dragging:n,dependencies:r,config:o}=t;const[a,i]=c.useState(null),{frequency:l,measure:d,strategy:u}=o,f=c.useRef(e),p=v(),x=Ct(p),m=c.useCallback(function(y){y===void 0&&(y=[]),!x.current&&i(g=>g===null?y:g.concat(y.filter(b=>!g.includes(b))))},[x]),w=c.useRef(null),h=It(y=>{if(p&&!n)return ws;if(!y||y===ws||f.current!==e||a!=null){const g=new Map;for(let b of e){if(!b)continue;if(a&&a.length>0&&!a.includes(b.id)&&b.rect.current){g.set(b.id,b.rect.current);continue}const C=b.node.current,j=C?new ts(d(C),C):null;b.rect.current=j,j&&g.set(b.id,j)}return g}return y},[e,a,n,p,d]);return c.useEffect(()=>{f.current=e},[e]),c.useEffect(()=>{p||m()},[n,p]),c.useEffect(()=>{a&&a.length>0&&i(null)},[JSON.stringify(a)]),c.useEffect(()=>{p||typeof l!="number"||w.current!==null||(w.current=setTimeout(()=>{m(),w.current=null},l))},[l,p,m,...r]),{droppableRects:h,measureDroppableContainers:m,measuringScheduled:a!=null};function v(){switch(u){case jt.Always:return!1;case jt.BeforeDragging:return n;default:return!n}}}function po(e,t){return It(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function jl(e,t){return po(e,t)}function Nl(e){let{callback:t,disabled:n}=e;const r=Jn(t),o=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(r)},[r,n]);return c.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function Qt(e){let{callback:t,disabled:n}=e;const r=Jn(t),o=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(r)},[n]);return c.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function Sl(e){return new ts(ft(e),e)}function Cs(e,t,n){t===void 0&&(t=Sl);const[r,o]=c.useState(null);function a(){o(d=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=d??n)!=null?u:null}const f=t(e);return JSON.stringify(d)===JSON.stringify(f)?d:f})}const i=Nl({callback(d){if(e)for(const u of d){const{type:f,target:p}=u;if(f==="childList"&&p instanceof HTMLElement&&p.contains(e)){a();break}}}}),l=Qt({callback:a});return _e(()=>{a(),e?(l==null||l.observe(e),i==null||i.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),i==null||i.disconnect())},[e]),r}function Rl(e){const t=po(e);return so(e,t)}const js=[];function _l(e){const t=c.useRef(e),n=It(r=>e?r&&r!==js&&e&&t.current&&e.parentNode===t.current.parentNode?r:es(e):js,[e]);return c.useEffect(()=>{t.current=e},[e]),n}function Il(e){const[t,n]=c.useState(null),r=c.useRef(e),o=c.useCallback(a=>{const i=cn(a.target);i&&n(l=>l?(l.set(i,Nn(i)),new Map(l)):null)},[]);return c.useEffect(()=>{const a=r.current;if(e!==a){i(a);const l=e.map(d=>{const u=cn(d);return u?(u.addEventListener("scroll",o,{passive:!0}),[u,Nn(u)]):null}).filter(d=>d!=null);n(l.length?new Map(l):null),r.current=e}return()=>{i(e),i(a)};function i(l){l.forEach(d=>{const u=cn(d);u==null||u.removeEventListener("scroll",o)})}},[o,e]),c.useMemo(()=>e.length?t?Array.from(t.values()).reduce((a,i)=>at(a,i),ye):co(e):ye,[e,t])}function Ns(e,t){t===void 0&&(t=[]);const n=c.useRef(null);return c.useEffect(()=>{n.current=null},t),c.useEffect(()=>{const r=e!==ye;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Ft(e,n.current):ye}function Dl(e){c.useEffect(()=>{if(!Zt)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function El(e,t){return c.useMemo(()=>e.reduce((n,r)=>{let{eventName:o,handler:a}=r;return n[o]=i=>{a(i,t)},n},{}),[e,t])}function ho(e){return c.useMemo(()=>e?el(e):null,[e])}const Ss=[];function kl(e,t){t===void 0&&(t=ft);const[n]=e,r=ho(n?oe(n):null),[o,a]=c.useState(Ss);function i(){a(()=>e.length?e.map(d=>io(d)?r:new ts(t(d),d)):Ss)}const l=Qt({callback:i});return _e(()=>{l==null||l.disconnect(),i(),e.forEach(d=>l==null?void 0:l.observe(d))},[e]),o}function Tl(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return _t(t)?t:e}function Ml(e){let{measure:t}=e;const[n,r]=c.useState(null),o=c.useCallback(u=>{for(const{target:f}of u)if(_t(f)){r(p=>{const x=t(f);return p?{...p,width:x.width,height:x.height}:x});break}},[t]),a=Qt({callback:o}),i=c.useCallback(u=>{const f=Tl(u);a==null||a.disconnect(),f&&(a==null||a.observe(f)),r(f?t(f):null)},[t,a]),[l,d]=Bt(i);return c.useMemo(()=>({nodeRef:l,rect:n,setRef:d}),[n,l,d])}const Al=[{sensor:Jt,options:{}},{sensor:fo,options:{}}],Pl={current:{}},Lt={draggable:{measure:gs},droppable:{measure:gs,strategy:jt.WhileDragging,frequency:Rn.Optimized},dragOverlay:{measure:ft}};class yt extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Ll={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new yt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Vt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Lt,measureDroppableContainers:Vt,windowRect:null,measuringScheduled:!1},Ol={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Vt,draggableNodes:new Map,over:null,measureDroppableContainers:Vt},en=c.createContext(Ol),mo=c.createContext(Ll);function zl(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new yt}}}function Bl(e,t){switch(t.type){case K.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case K.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case K.DragEnd:case K.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case K.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new yt(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case K.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const i=new yt(e.droppable.containers);return i.set(n,{...a,disabled:o}),{...e,droppable:{...e.droppable,containers:i}}}case K.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const a=new yt(e.droppable.containers);return a.delete(n),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function Fl(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:o}=c.useContext(en),a=Cn(r),i=Cn(n==null?void 0:n.id);return c.useEffect(()=>{if(!t&&!r&&a&&i!=null){if(!Qn(a)||document.activeElement===a.target)return;const l=o.get(i);if(!l)return;const{activatorNode:d,node:u}=l;if(!d.current&&!u.current)return;requestAnimationFrame(()=>{for(const f of[d.current,u.current]){if(!f)continue;const p=Ti(f);if(p){p.focus();break}}})}},[r,t,o,i,a]),null}function Vl(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((o,a)=>a({transform:o,...r}),n):n}function $l(e){return c.useMemo(()=>({draggable:{...Lt.draggable,...e==null?void 0:e.draggable},droppable:{...Lt.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Lt.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Hl(e){let{activeNode:t,measure:n,initialRect:r,config:o=!0}=e;const a=c.useRef(!1),{x:i,y:l}=typeof o=="boolean"?{x:o,y:o}:o;_e(()=>{if(!i&&!l||!t){a.current=!1;return}if(a.current||!r)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const f=n(u),p=so(f,r);if(i||(p.x=0),l||(p.y=0),a.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const x=ro(u);x&&x.scrollBy({top:p.y,left:p.x})}},[t,i,l,r,n])}const xo=c.createContext({...ye,scaleX:1,scaleY:1});var Be;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Be||(Be={}));const go=c.memo(function(t){var n,r,o,a;let{id:i,accessibility:l,autoScroll:d=!0,children:u,sensors:f=Al,collisionDetection:p=qi,measuring:x,modifiers:m,...w}=t;const h=c.useReducer(Bl,void 0,zl),[v,y]=h,[g,b]=zi(),[C,j]=c.useState(Be.Uninitialized),I=C===Be.Initialized,{draggable:{active:R,nodes:_,translate:T},droppable:{containers:A}}=v,k=R!=null?_.get(R):null,F=c.useRef({initial:null,translated:null}),z=c.useMemo(()=>{var te;return R!=null?{id:R,data:(te=k==null?void 0:k.data)!=null?te:Pl,rect:F}:null},[R,k]),E=c.useRef(null),[V,$]=c.useState(null),[B,ne]=c.useState(null),X=Ct(w,Object.values(w)),De=Dt("DndDescribedBy",i),Ee=c.useMemo(()=>A.getEnabled(),[A]),G=$l(x),{droppableRects:ae,measureDroppableContainers:se,measuringScheduled:Ce}=Cl(Ee,{dragging:I,dependencies:[T.x,T.y],config:G.droppable}),Y=yl(_,R),D=c.useMemo(()=>B?jn(B):null,[B]),P=Vo(),H=jl(Y,G.draggable.measure);Hl({activeNode:R!=null?_.get(R):null,config:P.layoutShiftCompensation,initialRect:H,measure:G.draggable.measure});const S=Cs(Y,G.draggable.measure,H),L=Cs(Y?Y.parentElement:null),M=c.useRef({activatorEvent:null,active:null,activeNode:Y,collisionRect:null,collisions:null,droppableRects:ae,draggableNodes:_,draggingNode:null,draggingNodeRect:null,droppableContainers:A,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),re=A.getNodeFor((n=M.current.over)==null?void 0:n.id),Q=Ml({measure:G.dragOverlay.measure}),je=(r=Q.nodeRef.current)!=null?r:Y,Ne=I?(o=Q.rect)!=null?o:S:null,Qe=!!(Q.nodeRef.current&&Q.rect),as=Rl(Qe?null:S),sn=ho(je?oe(je):null),Ae=_l(I?re??Y:null),kt=kl(Ae),Tt=Vl(m,{transform:{x:T.x-as.x,y:T.y-as.y,scaleX:1,scaleY:1},activatorEvent:B,active:z,activeNodeRect:S,containerNodeRect:L,draggingNodeRect:Ne,over:M.current.over,overlayNodeRect:Q.rect,scrollableAncestors:Ae,scrollableAncestorRects:kt,windowRect:sn}),is=D?at(D,T):null,ls=Il(Ae),Ao=Ns(ls),Po=Ns(ls,[S]),et=at(Tt,Ao),tt=Ne?Yi(Ne,Tt):null,pt=z&&tt?p({active:z,collisionRect:tt,droppableRects:ae,droppableContainers:Ee,pointerCoordinates:is}):null,cs=Ki(pt,"id"),[Pe,ds]=c.useState(null),Lo=Qe?Tt:at(Tt,Po),Oo=Xi(Lo,(a=Pe==null?void 0:Pe.rect)!=null?a:null,S),rn=c.useRef(null),us=c.useCallback((te,ie)=>{let{sensor:le,options:Le}=ie;if(E.current==null)return;const xe=_.get(E.current);if(!xe)return;const ce=te.nativeEvent,Se=new le({active:E.current,activeNode:xe,event:ce,options:Le,context:M,onAbort(ee){if(!_.get(ee))return;const{onDragAbort:Re}=X.current,ke={id:ee};Re==null||Re(ke),g({type:"onDragAbort",event:ke})},onPending(ee,Oe,Re,ke){if(!_.get(ee))return;const{onDragPending:mt}=X.current,ze={id:ee,constraint:Oe,initialCoordinates:Re,offset:ke};mt==null||mt(ze),g({type:"onDragPending",event:ze})},onStart(ee){const Oe=E.current;if(Oe==null)return;const Re=_.get(Oe);if(!Re)return;const{onDragStart:ke}=X.current,ht={activatorEvent:ce,active:{id:Oe,data:Re.data,rect:F}};Ue.unstable_batchedUpdates(()=>{ke==null||ke(ht),j(Be.Initializing),y({type:K.DragStart,initialCoordinates:ee,active:Oe}),g({type:"onDragStart",event:ht}),$(rn.current),ne(ce)})},onMove(ee){y({type:K.DragMove,coordinates:ee})},onEnd:nt(K.DragEnd),onCancel:nt(K.DragCancel)});rn.current=Se;function nt(ee){return async function(){const{active:Re,collisions:ke,over:ht,scrollAdjustedTranslate:mt}=M.current;let ze=null;if(Re&&mt){const{cancelDrop:xt}=X.current;ze={activatorEvent:ce,active:Re,collisions:ke,delta:mt,over:ht},ee===K.DragEnd&&typeof xt=="function"&&await Promise.resolve(xt(ze))&&(ee=K.DragCancel)}E.current=null,Ue.unstable_batchedUpdates(()=>{y({type:ee}),j(Be.Uninitialized),ds(null),$(null),ne(null),rn.current=null;const xt=ee===K.DragEnd?"onDragEnd":"onDragCancel";if(ze){const on=X.current[xt];on==null||on(ze),g({type:xt,event:ze})}})}}},[_]),zo=c.useCallback((te,ie)=>(le,Le)=>{const xe=le.nativeEvent,ce=_.get(Le);if(E.current!==null||!ce||xe.dndKit||xe.defaultPrevented)return;const Se={active:ce};te(le,ie.options,Se)===!0&&(xe.dndKit={capturedBy:ie.sensor},E.current=Le,us(le,ie))},[_,us]),fs=wl(f,zo);Dl(f),_e(()=>{S&&C===Be.Initializing&&j(Be.Initialized)},[S,C]),c.useEffect(()=>{const{onDragMove:te}=X.current,{active:ie,activatorEvent:le,collisions:Le,over:xe}=M.current;if(!ie||!le)return;const ce={active:ie,activatorEvent:le,collisions:Le,delta:{x:et.x,y:et.y},over:xe};Ue.unstable_batchedUpdates(()=>{te==null||te(ce),g({type:"onDragMove",event:ce})})},[et.x,et.y]),c.useEffect(()=>{const{active:te,activatorEvent:ie,collisions:le,droppableContainers:Le,scrollAdjustedTranslate:xe}=M.current;if(!te||E.current==null||!ie||!xe)return;const{onDragOver:ce}=X.current,Se=Le.get(cs),nt=Se&&Se.rect.current?{id:Se.id,rect:Se.rect.current,data:Se.data,disabled:Se.disabled}:null,ee={active:te,activatorEvent:ie,collisions:le,delta:{x:xe.x,y:xe.y},over:nt};Ue.unstable_batchedUpdates(()=>{ds(nt),ce==null||ce(ee),g({type:"onDragOver",event:ee})})},[cs]),_e(()=>{M.current={activatorEvent:B,active:z,activeNode:Y,collisionRect:tt,collisions:pt,droppableRects:ae,draggableNodes:_,draggingNode:je,draggingNodeRect:Ne,droppableContainers:A,over:Pe,scrollableAncestors:Ae,scrollAdjustedTranslate:et},F.current={initial:Ne,translated:tt}},[z,Y,pt,tt,_,je,Ne,ae,A,Pe,Ae,et]),gl({...P,delta:T,draggingRect:tt,pointerCoordinates:is,scrollableAncestors:Ae,scrollableAncestorRects:kt});const Bo=c.useMemo(()=>({active:z,activeNode:Y,activeNodeRect:S,activatorEvent:B,collisions:pt,containerNodeRect:L,dragOverlay:Q,draggableNodes:_,droppableContainers:A,droppableRects:ae,over:Pe,measureDroppableContainers:se,scrollableAncestors:Ae,scrollableAncestorRects:kt,measuringConfiguration:G,measuringScheduled:Ce,windowRect:sn}),[z,Y,S,B,pt,L,Q,_,A,ae,Pe,se,Ae,kt,G,Ce,sn]),Fo=c.useMemo(()=>({activatorEvent:B,activators:fs,active:z,activeNodeRect:S,ariaDescribedById:{draggable:De},dispatch:y,draggableNodes:_,over:Pe,measureDroppableContainers:se}),[B,fs,z,S,y,De,_,Pe,se]);return N.createElement(Qr.Provider,{value:b},N.createElement(en.Provider,{value:Fo},N.createElement(mo.Provider,{value:Bo},N.createElement(xo.Provider,{value:Oo},u)),N.createElement(Fl,{disabled:(l==null?void 0:l.restoreFocus)===!1})),N.createElement(Vi,{...l,hiddenTextDescribedById:De}));function Vo(){const te=(V==null?void 0:V.autoScrollEnabled)===!1,ie=typeof d=="object"?d.enabled===!1:d===!1,le=I&&!te&&!ie;return typeof d=="object"?{...d,enabled:le}:{enabled:le}}}),Wl=c.createContext(null),Rs="button",Kl="Draggable";function Ul(e){let{id:t,data:n,disabled:r=!1,attributes:o}=e;const a=Dt(Kl),{activators:i,activatorEvent:l,active:d,activeNodeRect:u,ariaDescribedById:f,draggableNodes:p,over:x}=c.useContext(en),{role:m=Rs,roleDescription:w="draggable",tabIndex:h=0}=o??{},v=(d==null?void 0:d.id)===t,y=c.useContext(v?xo:Wl),[g,b]=Bt(),[C,j]=Bt(),I=El(i,t),R=Ct(n);_e(()=>(p.set(t,{id:t,key:a,node:g,activatorNode:C,data:R}),()=>{const T=p.get(t);T&&T.key===a&&p.delete(t)}),[p,t]);const _=c.useMemo(()=>({role:m,tabIndex:h,"aria-disabled":r,"aria-pressed":v&&m===Rs?!0:void 0,"aria-roledescription":w,"aria-describedby":f.draggable}),[r,m,h,v,w,f.draggable]);return{active:d,activatorEvent:l,activeNodeRect:u,attributes:_,isDragging:v,listeners:r?void 0:I,node:g,over:x,setNodeRef:b,setActivatorNodeRef:j,transform:y}}function ql(){return c.useContext(mo)}const Xl="Droppable",Gl={timeout:25};function Yl(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:o}=e;const a=Dt(Xl),{active:i,dispatch:l,over:d,measureDroppableContainers:u}=c.useContext(en),f=c.useRef({disabled:n}),p=c.useRef(!1),x=c.useRef(null),m=c.useRef(null),{disabled:w,updateMeasurementsFor:h,timeout:v}={...Gl,...o},y=Ct(h??r),g=c.useCallback(()=>{if(!p.current){p.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{u(Array.isArray(y.current)?y.current:[y.current]),m.current=null},v)},[v]),b=Qt({callback:g,disabled:w||!i}),C=c.useCallback((_,T)=>{b&&(T&&(b.unobserve(T),p.current=!1),_&&b.observe(_))},[b]),[j,I]=Bt(C),R=Ct(t);return c.useEffect(()=>{!b||!j.current||(b.disconnect(),p.current=!1,b.observe(j.current))},[j,b]),c.useEffect(()=>(l({type:K.RegisterDroppable,element:{id:r,key:a,disabled:n,node:j,rect:x,data:R}}),()=>l({type:K.UnregisterDroppable,key:a,id:r})),[r]),c.useEffect(()=>{n!==f.current.disabled&&(l({type:K.SetDroppableDisabled,id:r,key:a,disabled:n}),f.current.disabled=n)},[r,a,n,l]),{active:i,rect:x,isOver:(d==null?void 0:d.id)===r,node:j,over:d,setNodeRef:I}}function tn(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Zl(e,t){return e.reduce((n,r,o)=>{const a=t.get(r);return a&&(n[o]=a),n},Array(e.length))}function At(e){return e!==null&&e>=0}function Jl(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Ql(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const vo=e=>{let{rects:t,activeIndex:n,overIndex:r,index:o}=e;const a=tn(t,r,n),i=t[o],l=a[o];return!l||!i?null:{x:l.left-i.left,y:l.top-i.top,scaleX:l.width/i.width,scaleY:l.height/i.height}},Pt={scaleX:1,scaleY:1},bo=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:o,rects:a,overIndex:i}=e;const l=(t=a[n])!=null?t:r;if(!l)return null;if(o===n){const u=a[i];return u?{x:0,y:n<i?u.top+u.height-(l.top+l.height):u.top-l.top,...Pt}:null}const d=ec(a,o,n);return o>n&&o<=i?{x:0,y:-l.height-d,...Pt}:o<n&&o>=i?{x:0,y:l.height+d,...Pt}:{x:0,y:0,...Pt}};function ec(e,t,n){const r=e[t],o=e[t-1],a=e[t+1];return r?n<t?o?r.top-(o.top+o.height):a?a.top-(r.top+r.height):0:a?a.top-(r.top+r.height):o?r.top-(o.top+o.height):0:0}const yo="Sortable",wo=N.createContext({activeIndex:-1,containerId:yo,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:vo,disabled:{draggable:!1,droppable:!1}});function Co(e){let{children:t,id:n,items:r,strategy:o=vo,disabled:a=!1}=e;const{active:i,dragOverlay:l,droppableRects:d,over:u,measureDroppableContainers:f}=ql(),p=Dt(yo,n),x=l.rect!==null,m=c.useMemo(()=>r.map(I=>typeof I=="object"&&"id"in I?I.id:I),[r]),w=i!=null,h=i?m.indexOf(i.id):-1,v=u?m.indexOf(u.id):-1,y=c.useRef(m),g=!Jl(m,y.current),b=v!==-1&&h===-1||g,C=Ql(a);_e(()=>{g&&w&&f(m)},[g,m,w,f]),c.useEffect(()=>{y.current=m},[m]);const j=c.useMemo(()=>({activeIndex:h,containerId:p,disabled:C,disableTransforms:b,items:m,overIndex:v,useDragOverlay:x,sortedRects:Zl(m,d),strategy:o}),[h,p,C.draggable,C.droppable,b,m,v,d,x,o]);return N.createElement(wo.Provider,{value:j},t)}const tc=e=>{let{id:t,items:n,activeIndex:r,overIndex:o}=e;return tn(n,r,o).indexOf(t)},nc=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:o,items:a,newIndex:i,previousItems:l,previousContainerId:d,transition:u}=e;return!u||!r||l!==a&&o===i?!1:n?!0:i!==o&&t===d},sc={duration:200,easing:"ease"},jo="transform",rc=lt.Transition.toString({property:jo,duration:0,easing:"linear"}),oc={roleDescription:"sortable"};function ac(e){let{disabled:t,index:n,node:r,rect:o}=e;const[a,i]=c.useState(null),l=c.useRef(n);return _e(()=>{if(!t&&n!==l.current&&r.current){const d=o.current;if(d){const u=ft(r.current,{ignoreTransform:!0}),f={x:d.left-u.left,y:d.top-u.top,scaleX:d.width/u.width,scaleY:d.height/u.height};(f.x||f.y)&&i(f)}}n!==l.current&&(l.current=n)},[t,n,r,o]),c.useEffect(()=>{a&&i(null)},[a]),a}function ss(e){let{animateLayoutChanges:t=nc,attributes:n,disabled:r,data:o,getNewIndex:a=tc,id:i,strategy:l,resizeObserverConfig:d,transition:u=sc}=e;const{items:f,containerId:p,activeIndex:x,disabled:m,disableTransforms:w,sortedRects:h,overIndex:v,useDragOverlay:y,strategy:g}=c.useContext(wo),b=ic(r,m),C=f.indexOf(i),j=c.useMemo(()=>({sortable:{containerId:p,index:C,items:f},...o}),[p,o,C,f]),I=c.useMemo(()=>f.slice(f.indexOf(i)),[f,i]),{rect:R,node:_,isOver:T,setNodeRef:A}=Yl({id:i,data:j,disabled:b.droppable,resizeObserverConfig:{updateMeasurementsFor:I,...d}}),{active:k,activatorEvent:F,activeNodeRect:z,attributes:E,setNodeRef:V,listeners:$,isDragging:B,over:ne,setActivatorNodeRef:X,transform:De}=Ul({id:i,data:j,attributes:{...oc,...n},disabled:b.draggable}),Ee=Ii(A,V),G=!!k,ae=G&&!w&&At(x)&&At(v),se=!y&&B,Ce=se&&ae?De:null,D=ae?Ce??(l??g)({rects:h,activeNodeRect:z,activeIndex:x,overIndex:v,index:C}):null,P=At(x)&&At(v)?a({id:i,items:f,activeIndex:x,overIndex:v}):C,H=k==null?void 0:k.id,S=c.useRef({activeId:H,items:f,newIndex:P,containerId:p}),L=f!==S.current.items,M=t({active:k,containerId:p,isDragging:B,isSorting:G,id:i,index:C,items:f,newIndex:S.current.newIndex,previousItems:S.current.items,previousContainerId:S.current.containerId,transition:u,wasDragging:S.current.activeId!=null}),re=ac({disabled:!M,index:C,node:_,rect:R});return c.useEffect(()=>{G&&S.current.newIndex!==P&&(S.current.newIndex=P),p!==S.current.containerId&&(S.current.containerId=p),f!==S.current.items&&(S.current.items=f)},[G,P,p,f]),c.useEffect(()=>{if(H===S.current.activeId)return;if(H&&!S.current.activeId){S.current.activeId=H;return}const je=setTimeout(()=>{S.current.activeId=H},50);return()=>clearTimeout(je)},[H]),{active:k,activeIndex:x,attributes:E,data:j,rect:R,index:C,newIndex:P,items:f,isOver:T,isSorting:G,isDragging:B,listeners:$,node:_,overIndex:v,over:ne,setNodeRef:Ee,setActivatorNodeRef:X,setDroppableNodeRef:A,setDraggableNodeRef:V,transform:re??D,transition:Q()};function Q(){if(re||L&&S.current.newIndex===C)return rc;if(!(se&&!Qn(F)||!u)&&(G||M))return lt.Transition.toString({...u,property:jo})}}function ic(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}O.Down,O.Right,O.Up,O.Left;const lc=({table:e})=>{const{updateTable:t,removeTable:n,createIndex:r,createField:o,createTable:a,schemas:i,filteredSchemas:l}=he(),{openTableSchemaDialog:d}=In(),{t:u}=me(),{fitView:f,setNodes:p}=St(),{hideSidePanel:x}=Ie(),[m,w]=N.useState(!1),[h,v]=N.useState(e.name),{isMd:y}=Wt("md"),g=N.useRef(null),{listeners:b}=ss({id:e.id}),C=c.useCallback(()=>{m&&(h.trim()&&t(e.id,{name:h.trim()}),w(!1))},[h,e.id,t,m]),j=c.useCallback(()=>{w(!1),v(e.name)},[e.name]);Ms(g,C),fn("Enter",C),fn("Escape",j);const I=E=>{E.stopPropagation(),w(!0)},R=c.useCallback(E=>{E.stopPropagation(),p(V=>V.map($=>$.id==e.id?{...$,selected:!0}:{...$,selected:!1})),f({duration:500,maxZoom:1,minZoom:1,nodes:[{id:e.id}]}),y||x()},[f,e.id,p,x,y]),_=c.useCallback(()=>{n(e.id)},[e.id,n]),T=c.useCallback(E=>{t(e.id,{schema:E})},[e.id,t]),A=c.useCallback(()=>{d({table:e,schemas:i,onConfirm:T})},[d,e,i,T]),k=c.useCallback(E=>{E.stopPropagation();const V=Wo(e);V.name=`${V.name}_copy`,V.x+=30,V.y+=50,a(V)},[a,e]),F=c.useCallback(()=>s.jsxs(En,{children:[s.jsx(kn,{children:s.jsx(be,{children:s.jsx(Bn,{})})}),s.jsxs(Tn,{className:"w-fit min-w-40",children:[s.jsx(Mn,{children:u("side_panel.tables_section.table.table_actions.title")}),s.jsx(rt,{}),i.length>0?s.jsxs(s.Fragment,{children:[s.jsx(ot,{children:s.jsxs(Ke,{className:"flex justify-between gap-4",onClick:E=>{E.stopPropagation(),A()},children:[u("side_panel.tables_section.table.table_actions.change_schema"),s.jsx(Da,{className:"size-3.5"})]})}),s.jsx(rt,{})]}):null,s.jsxs(ot,{children:[s.jsxs(Ke,{className:"flex justify-between gap-4",onClick:E=>{E.stopPropagation(),o(e.id)},children:[u("side_panel.tables_section.table.table_actions.add_field"),s.jsx(pn,{className:"size-3.5"})]}),s.jsxs(Ke,{className:"flex justify-between gap-4",onClick:E=>{E.stopPropagation(),r(e.id)},children:[u("side_panel.tables_section.table.table_actions.add_index"),s.jsx(hn,{className:"size-3.5"})]})]}),s.jsx(rt,{}),s.jsx(ot,{children:s.jsxs(Ke,{onClick:k,className:"flex justify-between",children:[u("side_panel.tables_section.table.table_actions.duplicate_table"),s.jsx(aa,{className:"size-3.5"})]})}),s.jsx(rt,{}),s.jsx(ot,{children:s.jsxs(Ke,{onClick:_,className:"flex justify-between !text-red-700",children:[u("side_panel.tables_section.table.table_actions.delete_table"),s.jsx(Je,{className:"size-3.5 text-red-700"})]})})]})]}),[e.id,o,r,_,k,u,A,i.length]);let z;return i.length>1&&l&&l.length>1&&(z=e.schema),s.jsxs("div",{className:"group flex h-11 flex-1 items-center justify-between gap-1 overflow-hidden",children:[s.jsx("div",{className:"flex cursor-move items-center justify-center",...b,children:s.jsx($s,{className:"size-4 text-muted-foreground"})}),s.jsx("div",{className:"flex min-w-0 flex-1 px-1",children:m?s.jsx($e,{ref:g,autoFocus:!0,type:"text",placeholder:e.name,value:h,onClick:E=>E.stopPropagation(),onChange:E=>v(E.target.value),className:"h-7 w-full focus-visible:ring-0"}):s.jsxs(de,{children:[s.jsx(ue,{asChild:!0,children:s.jsxs("div",{onDoubleClick:I,className:"text-editable truncate px-2 py-0.5",children:[e.name,s.jsx("span",{className:"text-xs text-muted-foreground",children:z?` (${z})`:""})]})}),s.jsx(fe,{children:u("tool_tips.double_click_to_edit")})]})}),s.jsx("div",{className:"flex flex-row-reverse",children:m?s.jsx(be,{onClick:C,children:s.jsx(Ps,{})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{children:F()}),s.jsxs("div",{className:"flex flex-row-reverse md:hidden md:group-hover:flex",children:[s.jsx(be,{onClick:I,children:s.jsx(As,{})}),s.jsx(be,{onClick:R,children:s.jsx(Dn,{})})]})]})})]})},Et=N.forwardRef(({className:e,variant:t,size:n,...r},o)=>s.jsx(Ls,{ref:o,className:J(xa({variant:t,size:n,className:e})),...r}));Et.displayName=Ls.displayName;const _n=N.forwardRef((e,t)=>s.jsx(Et,{...e,ref:t,variant:"default",className:"h-8 w-[32px] p-2 text-xs text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}));_n.displayName=Et.displayName;var rs="Checkbox",[cc,Wc]=Ht(rs),[dc,uc]=cc(rs),No=c.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:o,defaultChecked:a,required:i,disabled:l,value:d="on",onCheckedChange:u,form:f,...p}=e,[x,m]=c.useState(null),w=pe(t,C=>m(C)),h=c.useRef(!1),v=x?f||!!x.closest("form"):!0,[y=!1,g]=it({prop:o,defaultProp:a,onChange:u}),b=c.useRef(y);return c.useEffect(()=>{const C=x==null?void 0:x.form;if(C){const j=()=>g(b.current);return C.addEventListener("reset",j),()=>C.removeEventListener("reset",j)}},[x,g]),s.jsxs(dc,{scope:n,state:y,disabled:l,children:[s.jsx(q.button,{type:"button",role:"checkbox","aria-checked":Ve(y)?"mixed":y,"aria-required":i,"data-state":_o(y),"data-disabled":l?"":void 0,disabled:l,value:d,...p,ref:w,onKeyDown:W(e.onKeyDown,C=>{C.key==="Enter"&&C.preventDefault()}),onClick:W(e.onClick,C=>{g(j=>Ve(j)?!0:!j),v&&(h.current=C.isPropagationStopped(),h.current||C.stopPropagation())})}),v&&s.jsx(fc,{control:x,bubbles:!h.current,name:r,value:d,checked:y,required:i,disabled:l,form:f,style:{transform:"translateX(-100%)"},defaultChecked:Ve(a)?!1:a})]})});No.displayName=rs;var So="CheckboxIndicator",Ro=c.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...o}=e,a=uc(So,n);return s.jsx(_s,{present:r||Ve(a.state)||a.state===!0,children:s.jsx(q.span,{"data-state":_o(a.state),"data-disabled":a.disabled?"":void 0,...o,ref:t,style:{pointerEvents:"none",...e.style}})})});Ro.displayName=So;var fc=e=>{const{control:t,checked:n,bubbles:r=!0,defaultChecked:o,...a}=e,i=c.useRef(null),l=Ks(n),d=Ko(t);c.useEffect(()=>{const f=i.current,p=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(p,"checked").set;if(l!==n&&m){const w=new Event("click",{bubbles:r});f.indeterminate=Ve(n),m.call(f,Ve(n)?!1:n),f.dispatchEvent(w)}},[l,n,r]);const u=c.useRef(Ve(n)?!1:n);return s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:o??u.current,...a,tabIndex:-1,ref:i,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Ve(e){return e==="indeterminate"}function _o(e){return Ve(e)?"indeterminate":e?"checked":"unchecked"}var Io=No,pc=Ro;const os=N.forwardRef(({className:e,...t},n)=>s.jsx(Io,{ref:n,className:J("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(pc,{className:J("flex items-center justify-center text-current"),children:s.jsx(ks,{className:"size-4"})})}));os.displayName=Io.displayName;const hc=({field:e,updateField:t,removeField:n})=>{var l;const{t:r}=me(),[o,a]=N.useState(e),i=c.useRef(null);return c.useEffect(()=>(i.current=Uo(d=>{t({comments:d==null?void 0:d.comments,characterMaximumLength:d==null?void 0:d.characterMaximumLength,unique:d==null?void 0:d.unique})},200),()=>{i.current=null}),[t]),c.useEffect(()=>{i.current&&i.current(o)},[o]),s.jsxs(An,{onOpenChange:d=>{d&&a(e)},children:[s.jsx(Pn,{asChild:!0,children:s.jsx(U,{variant:"ghost",className:"h-8 w-[32px] p-2 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:s.jsx(Vs,{className:"size-3.5"})})}),s.jsx(Ln,{className:"w-52",children:s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("div",{className:"text-sm font-semibold",children:r("side_panel.tables_section.table.field_actions.title")}),s.jsx(wt,{orientation:"horizontal"}),s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(qe,{htmlFor:"width",className:"text-subtitle",children:r("side_panel.tables_section.table.field_actions.unique")}),s.jsx(os,{checked:o.unique,disabled:e.primaryKey,onCheckedChange:d=>a(u=>({...u,unique:!!d}))})]}),(l=ia(e.type.id))!=null&&l.hasCharMaxLength?s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(qe,{htmlFor:"width",className:"text-subtitle",children:r("side_panel.tables_section.table.field_actions.character_length")}),s.jsx($e,{value:o.characterMaximumLength??"",type:"number",onChange:d=>a(u=>({...u,characterMaximumLength:d.target.value})),className:"w-full rounded-md bg-muted text-sm"})]}):null,s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(qe,{htmlFor:"width",className:"text-subtitle",children:r("side_panel.tables_section.table.field_actions.comments")}),s.jsx(Os,{value:o.comments,onChange:d=>a(u=>({...u,comments:d.target.value})),placeholder:r("side_panel.tables_section.table.field_actions.no_comments"),className:"w-full rounded-md bg-muted text-sm"})]})]}),s.jsx(wt,{orientation:"horizontal"}),s.jsxs(U,{variant:"outline",className:"flex gap-2 !text-red-700",onClick:n,children:[s.jsx(Je,{className:"size-3.5 text-red-700"}),r("side_panel.tables_section.table.field_actions.delete_field")]})]})})]})},mc=({field:e,updateField:t,removeField:n})=>{const{databaseType:r}=he(),{t:o}=me(),{attributes:a,listeners:i,setNodeRef:l,transform:d,transition:u}=ss({id:e.id}),f=an[r].map(m=>({label:m.name,value:m.id,regex:m.hasCharMaxLength?`^${m.name}\\(\\d+\\)$`:void 0,extractRegex:m.hasCharMaxLength?/\((\d+)\)/:void 0})),p=c.useCallback((m,w)=>{const h=an[r].find(y=>y.id===m)??{id:m,name:m};let v;w!=null&&w.length&&(h!=null&&h.hasCharMaxLength)?v=w[1]:e.characterMaximumLength&&(h!=null&&h.hasCharMaxLength)&&(v=e.characterMaximumLength),t({characterMaximumLength:v,type:la(h??{id:m,name:m})})},[t,r,e.characterMaximumLength]),x={transform:lt.Translate.toString(d),transition:u};return s.jsxs("div",{className:"flex flex-1 touch-none flex-row justify-between p-1",ref:l,style:x,...a,children:[s.jsxs("div",{className:"flex w-8/12 items-center justify-start gap-1 overflow-hidden",children:[s.jsx("div",{className:"flex w-4 shrink-0 cursor-move items-center justify-center",...i,children:s.jsx($s,{className:"size-3.5  text-muted-foreground"})}),s.jsxs(de,{children:[s.jsx(ue,{asChild:!0,children:s.jsx("span",{className:"w-5/12",children:s.jsx($e,{className:"h-8 w-full !truncate focus-visible:ring-0",type:"text",placeholder:o("side_panel.tables_section.table.field_name"),value:e.name,onChange:m=>t({name:m.target.value})})})}),s.jsx(fe,{children:e.name})]}),s.jsxs(de,{children:[s.jsx(ue,{className:"flex h-8 !w-5/12",asChild:!0,children:s.jsx("span",{children:s.jsx(On,{className:"flex h-8 min-h-8 w-full",options:f,placeholder:o("side_panel.tables_section.table.field_type"),value:e.type.id,valueSuffix:e.characterMaximumLength?`(${e.characterMaximumLength})`:"",optionSuffix:m=>{const w=an[r].find(h=>h.id===m.value);return w&&w.hasCharMaxLength?`(${e.characterMaximumLength?e.characterMaximumLength:"n"})`:""},onChange:p,emptyPlaceholder:o("side_panel.tables_section.table.no_types_found")})})}),s.jsxs(fe,{children:[e.type.name,e.characterMaximumLength?`(${e.characterMaximumLength})`:""]})]})]}),s.jsxs("div",{className:"flex w-4/12 justify-end gap-1 overflow-hidden",children:[s.jsxs(de,{children:[s.jsx(ue,{asChild:!0,children:s.jsx("span",{children:s.jsx(_n,{pressed:e.nullable,onPressedChange:m=>t({nullable:m}),children:"N"})})}),s.jsx(fe,{children:o("side_panel.tables_section.table.nullable")})]}),s.jsxs(de,{children:[s.jsx(ue,{asChild:!0,children:s.jsx("span",{children:s.jsx(_n,{pressed:e.primaryKey,onPressedChange:m=>t({unique:m,primaryKey:m}),children:s.jsx(ca,{className:"h-3.5"})})})}),s.jsx(fe,{children:o("side_panel.tables_section.table.primary_key")})]}),s.jsx(hc,{field:e,updateField:t,removeField:n})]})]})},Do=N.forwardRef((e,t)=>s.jsx(Et,{...e,ref:t,variant:"default",className:"h-8 w-[32px] p-2 text-xs text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}));Do.displayName=Et.displayName;const xc=({fields:e,index:t,updateIndex:n,removeIndex:r})=>{const{t:o}=me(),a=e.map(l=>({label:l.name,value:l.id})),i=l=>{const d=Array.isArray(l)?l:[l];n({fieldIds:d})};return s.jsxs("div",{className:"flex flex-1 flex-row justify-between gap-2 p-1",children:[s.jsx(On,{className:"flex h-8 min-h-8 min-w-0 flex-1",multiple:!0,oneLine:!0,options:a,placeholder:o("side_panel.tables_section.table.index_select_fields"),value:t.fieldIds,onChange:i,emptyPlaceholder:o("side_panel.tables_section.table.no_types_found"),keepOrder:!0}),s.jsxs("div",{className:"flex shrink-0 gap-1",children:[s.jsxs(de,{children:[s.jsx(ue,{asChild:!0,children:s.jsx("span",{children:s.jsx(Do,{pressed:t.unique,onPressedChange:l=>n({unique:!!l}),children:"U"})})}),s.jsx(fe,{children:o("side_panel.tables_section.table.index_actions.unique")})]}),s.jsxs(An,{children:[s.jsx(Pn,{asChild:!0,children:s.jsx(U,{variant:"ghost",className:"h-8 w-[32px] p-2 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:s.jsx(Vs,{className:"size-3.5"})})}),s.jsx(Ln,{className:"w-52",children:s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("div",{className:"text-sm font-semibold",children:o("side_panel.tables_section.table.index_actions.title")}),s.jsx(wt,{orientation:"horizontal"}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(qe,{htmlFor:"width",className:"text-subtitle",children:o("side_panel.tables_section.table.index_actions.name")}),s.jsx($e,{value:t.name,onChange:l=>n({name:l.target.value})})]}),s.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[s.jsx(qe,{htmlFor:"width",className:"text-subtitle",children:o("side_panel.tables_section.table.index_actions.unique")}),s.jsx(os,{checked:t.unique,onCheckedChange:l=>n({unique:!!l})})]}),s.jsx(wt,{orientation:"horizontal"}),s.jsxs(U,{variant:"outline",className:"flex gap-2 !text-red-700",onClick:r,children:[s.jsx(Je,{className:"size-3.5 text-red-700"}),o("side_panel.tables_section.table.index_actions.delete_index")]})]})})]})]})]})},Eo=N.forwardRef(({color:e,onChange:t},n)=>s.jsxs(An,{children:[s.jsx(Pn,{asChild:!0,ref:n,children:s.jsx("div",{className:"h-6 w-8 cursor-pointer rounded-md border-2 border-muted transition-shadow hover:shadow-md",style:{backgroundColor:e}})}),s.jsx(Ln,{className:"w-fit",children:s.jsx("div",{className:"grid grid-cols-4 gap-2",children:ja.map(r=>s.jsx("div",{className:"size-8 cursor-pointer rounded-md border-2 border-muted transition-shadow hover:shadow-md",style:{backgroundColor:r},onClick:()=>t(r)},r))})})]}));Eo.displayName="ColorPicker";const gc=({table:e})=>{const{updateField:t,removeField:n,createField:r,createIndex:o,removeIndex:a,updateIndex:i,updateTable:l}=he(),{t:d}=me(),{color:u}=e,[f,p]=N.useState(["fields"]),x=to(eo(Jt)),m=v=>{const{active:y,over:g}=v;if((y==null?void 0:y.id)!==(g==null?void 0:g.id)&&g&&y){const b=e.fields,C=b.findIndex(I=>I.id===y.id),j=b.findIndex(I=>I.id===g.id);l(e.id,{fields:tn(b,C,j)})}},w=c.useCallback(v=>{v.stopPropagation(),p(y=>y.includes("indexes")?y:[...y,"indexes"]),o(e.id)},[o,e.id,p]),h=c.useCallback(v=>{v.stopPropagation(),r(e.id)},[r,e.id]);return s.jsxs("div",{className:"flex flex-col gap-1 rounded-b-md border-l-[6px] px-1",style:{borderColor:u},children:[s.jsxs(Yt,{type:"multiple",className:"w-full",value:f,onValueChange:v=>p(v),children:[s.jsxs(Xe,{value:"fields",className:"mb-2 border-y-0",children:[s.jsx(Ge,{iconPosition:"right",className:"group flex flex-1 p-0 px-2 py-1 text-xs text-subtitle hover:bg-secondary",asChild:!0,children:s.jsxs("div",{className:"flex flex-1 items-center justify-between",children:[s.jsxs("div",{className:"flex flex-row items-center gap-1",children:[s.jsx(pn,{className:"size-4"}),d("side_panel.tables_section.table.fields")]}),s.jsx("div",{className:"flex flex-row-reverse",children:s.jsx("div",{className:"hidden flex-row-reverse group-hover:flex",children:s.jsx(U,{variant:"ghost",className:"size-4 p-0 text-xs hover:bg-primary-foreground",onClick:h,children:s.jsx(Mt,{className:"size-4 shrink-0 text-muted-foreground transition-transform duration-200"})})})})]})}),s.jsx(Ye,{className:"flex flex-col pb-0 pt-1",children:s.jsxs(go,{sensors:x,collisionDetection:no,onDragEnd:m,children:[s.jsx(Co,{items:e.fields,strategy:bo,children:e.fields.map(v=>s.jsx(mc,{field:v,updateField:y=>t(e.id,v.id,y),removeField:()=>n(e.id,v.id)},v.id))}),s.jsx("div",{className:"flex justify-start p-1",children:s.jsxs(U,{variant:"ghost",className:"flex h-7 items-center gap-1 px-2 text-xs",onClick:h,children:[s.jsx(Mt,{className:"size-4 text-muted-foreground"}),d("side_panel.tables_section.table.add_field")]})})]})})]}),s.jsxs(Xe,{value:"indexes",className:"mb-2 border-y-0",children:[s.jsx(Ge,{iconPosition:"right",className:"group flex flex-1 p-0 px-2 py-1 text-xs text-subtitle hover:bg-secondary",asChild:!0,children:s.jsxs("div",{className:"flex flex-1 items-center justify-between",children:[s.jsxs("div",{className:"flex flex-row items-center gap-1",children:[s.jsx(hn,{className:"size-4"}),d("side_panel.tables_section.table.indexes")]}),s.jsx("div",{className:"flex flex-row-reverse",children:s.jsx("div",{className:"hidden flex-row-reverse group-hover:flex",children:s.jsx(U,{variant:"ghost",className:"size-4 p-0 text-xs hover:bg-primary-foreground",onClick:w,children:s.jsx(Mt,{className:"size-4 shrink-0 text-muted-foreground transition-transform duration-200"})})})})]})}),s.jsxs(Ye,{className:"pb-0 pt-1",children:[e.indexes.map(v=>s.jsx(xc,{index:v,removeIndex:()=>a(e.id,v.id),updateIndex:y=>i(e.id,v.id,y),fields:e.fields},v.id)),s.jsx("div",{className:"flex justify-start p-1",children:s.jsxs(U,{variant:"ghost",className:"flex h-7 items-center gap-1 px-2 text-xs",onClick:w,children:[s.jsx(Mt,{className:"size-4 text-muted-foreground"}),d("side_panel.tables_section.table.add_index")]})})]})]}),s.jsxs(Xe,{value:"comments",className:"border-y-0",children:[s.jsx(Ge,{iconPosition:"right",className:"group flex flex-1 p-0 px-2 py-1 text-xs text-subtitle hover:bg-secondary",asChild:!0,children:s.jsx("div",{className:"flex flex-1 items-center justify-between",children:s.jsxs("div",{className:"flex flex-row items-center gap-1",children:[s.jsx(da,{className:"size-4"}),d("side_panel.tables_section.table.comments")]})})}),s.jsx(Ye,{className:"pb-0 pt-1",children:s.jsx(Os,{value:e.comments,onChange:v=>l(e.id,{comments:v.target.value}),placeholder:d("side_panel.tables_section.table.no_comments"),className:"w-full rounded-md bg-muted text-sm focus-visible:ring-0"})})]})]}),s.jsx(wt,{className:""}),s.jsxs("div",{className:"flex flex-1 items-center justify-between",children:[s.jsx(Eo,{color:u,onChange:v=>l(e.id,{color:v})}),s.jsxs("div",{className:"flex gap-1",children:[s.jsxs(U,{variant:"outline",className:"h-8 p-2 text-xs",onClick:w,children:[s.jsx(hn,{className:"h-4"}),d("side_panel.tables_section.table.add_index")]}),s.jsxs(U,{variant:"outline",className:"h-8 p-2 text-xs",onClick:h,children:[s.jsx(pn,{className:"h-4"}),d("side_panel.tables_section.table.add_field")]})]})]})]})},ko=N.forwardRef(({table:e},t)=>{const{attributes:n,setNodeRef:r,transform:o,transition:a}=ss({id:e.id}),i={transform:lt.Translate.toString(o),transition:a};return s.jsx(Xe,{value:e.id,className:"border-none",ref:t,children:s.jsxs("div",{className:"w-full rounded-md border-b",ref:r,style:i,...n,children:[s.jsx(Ge,{className:"w-full rounded-md border-l-[6px] px-2 py-0 hover:bg-accent hover:no-underline data-[state=open]:rounded-b-none",style:{borderColor:e.color},asChild:!0,children:s.jsx(lc,{table:e})}),s.jsx(Ye,{children:s.jsx(gc,{table:e})})]})})});ko.displayName="TableListItem";const vc=({tables:e})=>{const{updateTablesState:t}=he(),{openTableFromSidebar:n,openedTableInSidebar:r}=Ie(),o=N.useRef(null),a=c.useMemo(()=>e.reduce((f,p)=>(f[p.id]=N.createRef(),f),{}),[e]),i=c.useCallback(f=>{var p,x;return(x=(p=a[f])==null?void 0:p.current)==null?void 0:x.scrollIntoView({behavior:"smooth",block:"start"})},[a]),l=to(eo(Jt)),d=f=>{const{active:p,over:x}=f;if((p==null?void 0:p.id)!==(x==null?void 0:x.id)&&x&&p){const m=e.findIndex(v=>v.id===p.id),w=e.findIndex(v=>v.id===x.id),h=tn(e,m,w).reduce((v,y,g)=>(v.set(y.id,g),v),new Map);t(v=>v.map(y=>({id:y.id,order:h.get(y.id)})))}},u=c.useCallback(()=>{r&&o.current!==r&&(o.current=r,i(r))},[i,r]);return s.jsx(Yt,{type:"single",collapsible:!0,className:"flex w-full flex-col gap-1",value:r,onValueChange:n,onAnimationEnd:u,children:s.jsx(go,{sensors:l,collisionDetection:no,onDragEnd:d,children:s.jsx(Co,{items:e,strategy:bo,children:e.sort((f,p)=>f.order&&p.order===void 0?-1:f.order===void 0&&p.order?1:f.order!==void 0&&p.order!==void 0?f.order-p.order:f.isView===p.isView?f.name.localeCompare(p.name):f.isView?1:-1).map(f=>s.jsx(ko,{table:f,ref:a[f.id]},f.id))})})})},bc="/chartdbjose/assets/empty_state.png",yc="/chartdbjose/assets/empty_state_dark.png",nn=c.forwardRef(({title:e,description:t,className:n,titleClassName:r,descriptionClassName:o,imageClassName:a},i)=>{const{effectiveTheme:l}=Fs();return s.jsxs("div",{ref:i,className:J("flex flex-1 flex-col items-center justify-center space-y-1",n),children:[s.jsx("img",{src:l==="dark"?yc:bc,alt:"Empty state",className:J("mb-2 w-20",a)}),s.jsx(qe,{className:J("text-base",r),children:e}),s.jsx(qe,{className:J("text-sm font-normal text-muted-foreground",o),children:t})]})});nn.displayName="EmptyState";const wc=e=>e==="dark"?"dbml-dark":"dbml-light",Cc=e=>{switch(e){case st.SQL_SERVER:return"mssql";case st.MYSQL:case st.MARIADB:return"mysql";case st.POSTGRESQL:case st.COCKROACHDB:case st.SQLITE:return"postgres";default:return"postgres"}},jc=({filteredTables:e})=>{const{currentDiagram:t}=he(),{effectiveTheme:n}=Fs(),{toast:r}=ua(),o=c.useMemo(()=>{var d,u;const a={...t,tables:e,relationships:((d=t.relationships)==null?void 0:d.filter(f=>{const p=e.find(m=>m.id===f.sourceTableId),x=e.find(m=>m.id===f.targetTableId);return p&&x}))??[]},i={...a,tables:((u=a.tables)==null?void 0:u.map(f=>{var p;return{...f,name:f.name.replace(/\s/g,"_"),fields:f.fields.map(x=>({...x,name:x.name.replace(/\s/g,"_")})),indexes:(p=f.indexes)==null?void 0:p.map(x=>({...x,name:x.name.replace(/\s/g,"_")}))}}))??[]},l=ga({diagram:i,targetDatabaseType:t.databaseType,isDBMLFlow:!0});try{const f=Cc(t.databaseType);return va.importer.import(l,f)}catch(f){return console.error(f),r({title:"Error",description:"Failed to generate DBML. We would appreciate if you could report this issue!",variant:"destructive"}),""}},[t,e,r]);return s.jsx(ba,{code:o,className:"my-0.5",editorProps:{height:"100%",defaultLanguage:"dbml",beforeMount:ya,loading:!1,theme:wc(n),options:{wordWrap:"off",mouseWheelZoom:!1,domReadOnly:!0}}})},Nc=()=>{const{createTable:e,tables:t,filteredSchemas:n,schemas:r}=he(),{openTableSchemaDialog:o}=In(),a=fa(),{t:i}=me(),{openTableFromSidebar:l}=Ie(),[d,u]=N.useState(""),[f,p]=c.useState(!1),x=N.useRef(null),m=c.useMemo(()=>{const g=C=>{var j;return!((j=d==null?void 0:d.trim)!=null&&j.call(d))||C.name.toLowerCase().includes(d.toLowerCase())},b=C=>pa(C,n);return t.filter(b).filter(g)},[t,d,n]),w=c.useCallback(async g=>{const C=-a.x/a.zoom+80/a.zoom,j=-a.y/a.zoom+80/a.zoom,I=await e({x:C,y:j,schema:g});l(I.id)},[e,l,a.x,a.y,a.zoom]),h=c.useCallback(async()=>{var g;if(u(""),((n==null?void 0:n.length)??0)>1)o({onConfirm:w,schemas:r.filter(b=>n==null?void 0:n.includes(b.id))});else{const b=(n==null?void 0:n.length)===1?(g=r.find(C=>C.id===n[0]))==null?void 0:g.name:void 0;w(b)}},[w,n,o,r,u]),v=c.useCallback(()=>{u("")},[]),y=c.useMemo(()=>qo(),[]);return hs(y==="mac"?"meta+f":"ctrl+f",()=>{var g;(g=x.current)==null||g.focus()},{preventDefault:!0},[x]),hs(y==="mac"?"meta+p":"ctrl+p",()=>{p(g=>!g)},{preventDefault:!0},[p]),s.jsxs("section",{className:"flex flex-1 flex-col overflow-hidden px-2","data-vaul-no-drag":!0,children:[s.jsxs("div",{className:"flex items-center justify-between gap-4 py-1",children:[s.jsx("div",{children:s.jsxs(de,{children:[s.jsx(ue,{asChild:!0,children:s.jsx("span",{children:s.jsx(U,{variant:"ghost",className:"size-8 p-0",onClick:()=>p(g=>!g),children:f?s.jsx(Ea,{className:"size-4"}):s.jsx(Ia,{className:"size-4"})})})}),s.jsxs(fe,{children:[i(f?"side_panel.tables_section.show_list":"side_panel.tables_section.show_dbml"),y==="mac"?" (âŒ˜P)":" (Ctrl+P)"]})]})}),s.jsx("div",{className:"flex-1",children:s.jsx($e,{ref:x,type:"text",placeholder:i("side_panel.tables_section.filter"),className:"h-8 w-full focus-visible:ring-0",value:d,onChange:g=>u(g.target.value)})}),s.jsxs(U,{variant:"secondary",className:"h-8 p-2 text-xs",onClick:h,children:[s.jsx(ka,{className:"h-4"}),i("side_panel.tables_section.add_table")]})]}),s.jsx("div",{className:"flex flex-1 flex-col overflow-hidden",children:f?s.jsx(jc,{filteredTables:m}):s.jsx(zn,{className:"h-full",children:t.length===0?s.jsx(nn,{title:i("side_panel.tables_section.empty_state.title"),description:i("side_panel.tables_section.empty_state.description"),className:"mt-20"}):d&&m.length===0?s.jsxs("div",{className:"mt-10 flex flex-col items-center gap-2",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:i("side_panel.tables_section.no_results")}),s.jsxs(U,{variant:"outline",size:"sm",onClick:v,className:"gap-1",children:[s.jsx(wa,{className:"size-3.5"}),i("side_panel.tables_section.clear")]})]}):s.jsx(vc,{tables:m})})})]})},Sc=({relationship:e})=>{const{updateRelationship:t,removeRelationship:n}=he(),{fitView:r,deleteElements:o,setEdges:a}=St(),{t:i}=me(),{hideSidePanel:l}=Ie(),[d,u]=N.useState(!1),{isMd:f}=Wt("md"),[p,x]=N.useState(e.name),m=N.useRef(null),w=c.useCallback(()=>{d&&(p.trim()&&p!==e.name&&t(e.id,{name:p.trim()}),u(!1))},[p,e.id,t,d,e.name]);Ms(m,w),fn("Enter",w);const h=b=>{b.stopPropagation(),u(!0)},v=c.useCallback(b=>{b.stopPropagation(),a(C=>C.map(j=>j.id==e.id?{...j,selected:!0}:{...j,selected:!1})),r({duration:500,maxZoom:1,minZoom:1,nodes:[{id:e.sourceTableId},{id:e.targetTableId}]}),f||l()},[r,e.sourceTableId,e.targetTableId,a,e.id,f,l]),y=c.useCallback(()=>{n(e.id),o({edges:[{id:e.id}]})},[e.id,n,o]),g=c.useCallback(()=>s.jsxs(En,{children:[s.jsx(kn,{children:s.jsx(be,{children:s.jsx(Bn,{})})}),s.jsxs(Tn,{className:"w-40",children:[s.jsx(Mn,{children:i("side_panel.relationships_section.relationship.relationship_actions.title")}),s.jsx(rt,{}),s.jsx(ot,{children:s.jsxs(Ke,{onClick:y,className:"flex justify-between !text-red-700",children:[i("side_panel.relationships_section.relationship.relationship_actions.delete_relationship"),s.jsx(Je,{className:"size-3.5 text-red-700"})]})})]})]}),[y,i]);return s.jsxs("div",{className:"group flex h-11 flex-1 items-center justify-between overflow-hidden",children:[s.jsx("div",{className:"flex min-w-0 flex-1",children:d?s.jsx($e,{ref:m,autoFocus:!0,type:"text",placeholder:e.name,value:p,onClick:b=>b.stopPropagation(),onChange:b=>x(b.target.value),className:"h-7 w-full focus-visible:ring-0"}):s.jsx("div",{className:"truncate",children:e.name})}),s.jsx("div",{className:"flex flex-row-reverse",children:d?s.jsx(be,{onClick:w,children:s.jsx(Ps,{})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{children:g()}),s.jsxs("div",{className:"flex flex-row-reverse md:hidden md:group-hover:flex",children:[s.jsx(be,{onClick:h,children:s.jsx(As,{})}),s.jsx(be,{onClick:v,children:s.jsx(Dn,{})})]})]})})]})},Rc=({relationship:e})=>{const{getTable:t,getField:n,updateRelationship:r,removeRelationship:o}=he(),{deleteElements:a}=St(),{t:i}=me(),l=c.useMemo(()=>Na({sourceCardinality:e.sourceCardinality,targetCardinality:e.targetCardinality}),[e.sourceCardinality,e.targetCardinality]),d=c.useCallback(w=>{const{sourceCardinality:h,targetCardinality:v}=Sa(w);r(e.id,{sourceCardinality:h,targetCardinality:v})},[e.id,r]),u=t(e.targetTableId),f=n(e.targetTableId,e.targetFieldId),p=t(e.sourceTableId),x=n(e.sourceTableId,e.sourceFieldId),m=c.useCallback(()=>{o(e.id),a({edges:[{id:e.id}]})},[e.id,o,a]);return s.jsxs("div",{className:"my-1 flex flex-col rounded-b-md px-1",children:[s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs("div",{className:"flex items-center justify-between gap-1 text-xs",children:[s.jsxs("div",{className:"flex basis-1/2 flex-col gap-2 overflow-hidden text-xs",children:[s.jsxs("div",{className:"flex flex-row items-center gap-1",children:[s.jsx(zs,{className:"size-4 text-subtitle"}),s.jsx("div",{className:"font-bold text-subtitle",children:i("side_panel.relationships_section.relationship.primary")})]}),s.jsxs(de,{children:[s.jsx(ue,{children:s.jsxs("div",{className:"truncate text-left text-sm",children:[p!=null&&p.schema?`${p.schema}.`:"",p==null?void 0:p.name,"(",x==null?void 0:x.name,")"]})}),s.jsxs(fe,{children:[p!=null&&p.schema?`${p.schema}.`:"",p==null?void 0:p.name,"(",x==null?void 0:x.name,")"]})]})]}),s.jsxs("div",{className:"flex basis-1/2 flex-col gap-2 overflow-hidden text-xs",children:[s.jsxs("div",{className:"flex flex-row items-center gap-1",children:[s.jsx(Bs,{className:"size-4 text-subtitle"}),s.jsx("div",{className:"font-bold text-subtitle",children:i("side_panel.relationships_section.relationship.foreign")})]}),s.jsxs(de,{children:[s.jsx(ue,{children:s.jsxs("div",{className:"truncate text-left text-sm",children:[u!=null&&u.schema?`${u.schema}.`:"",u==null?void 0:u.name,"(",f==null?void 0:f.name,")"]})}),s.jsxs(fe,{children:[u!=null&&u.schema?`${u.schema}.`:"",u==null?void 0:u.name,"(",f==null?void 0:f.name,")"]})]})]})]}),s.jsxs("div",{className:"flex flex-col gap-2 text-xs",children:[s.jsxs("div",{className:"flex flex-row items-center gap-1",children:[s.jsx(_a,{className:"size-4 text-subtitle"}),s.jsx("div",{className:"font-bold text-subtitle",children:i("side_panel.relationships_section.relationship.cardinality")})]}),s.jsxs(Ir,{value:l,onValueChange:d,children:[s.jsx(Vn,{className:"h-8",children:s.jsx(Er,{})}),s.jsx($n,{children:s.jsxs(Dr,{children:[s.jsx(Fe,{value:"one_to_one",children:i("relationship_type.one_to_one")}),s.jsx(Fe,{value:"one_to_many",children:i("relationship_type.one_to_many")}),s.jsx(Fe,{value:"many_to_one",children:i("relationship_type.many_to_one")}),s.jsx(Fe,{value:"many_to_many",children:i("relationship_type.many_to_many")})]})})]})]})]}),s.jsx("div",{className:"flex flex-1 items-center justify-center pt-2",children:s.jsxs(U,{variant:"ghost",className:"h-8 p-2 text-xs",onClick:m,children:[s.jsx(Je,{className:"mr-1 size-3.5 text-red-700"}),s.jsx("div",{className:"text-red-700",children:i("side_panel.relationships_section.relationship.delete_relationship")})]})})]})},To=N.forwardRef(({relationship:e},t)=>s.jsxs(Xe,{value:e.id,className:"rounded-md",ref:t,children:[s.jsx(Ge,{asChild:!0,className:"w-full rounded-md px-2 py-0 hover:bg-accent hover:no-underline data-[state=open]:rounded-b-none",children:s.jsx(Sc,{relationship:e})}),s.jsx(Ye,{className:"p-1 pb-0",children:s.jsx(Rc,{relationship:e})})]}));To.displayName="RelationshipListItem";const _c=({relationships:e})=>{const{openRelationshipFromSidebar:t,openedRelationshipInSidebar:n}=Ie(),r=N.useRef(null),o=e.reduce((l,d)=>(l[d.id]=N.createRef(),l),{}),a=c.useCallback(l=>{var d,u;return(u=(d=o[l])==null?void 0:d.current)==null?void 0:u.scrollIntoView({behavior:"smooth",block:"start"})},[o]),i=c.useCallback(()=>{n&&r.current!==n&&(r.current=n,a(n))},[a,n]);return s.jsx(Yt,{type:"single",collapsible:!0,className:"flex w-full flex-col gap-1",value:n,onValueChange:t,onAnimationEnd:i,children:e.map(l=>s.jsx(To,{relationship:l,ref:o[l.id]},l.id))})},Ic=()=>{const{relationships:e,filteredSchemas:t}=he(),[n,r]=N.useState(""),{closeAllRelationshipsInSidebar:o}=Ie(),{t:a}=me(),{openCreateRelationshipDialog:i}=In(),l=c.useMemo(()=>{const u=p=>{var x;return!((x=n==null?void 0:n.trim)!=null&&x.call(n))||p.name.toLowerCase().includes(n.toLowerCase())},f=p=>Ra(p,t);return e.filter(f).filter(u)},[e,n,t]),d=c.useCallback(async()=>{r(""),i()},[i,r]);return s.jsxs("section",{className:"flex flex-1 flex-col overflow-hidden px-2",children:[s.jsxs("div",{className:"flex items-center justify-between gap-4 py-1",children:[s.jsx("div",{children:s.jsxs(de,{children:[s.jsx(ue,{asChild:!0,children:s.jsx("span",{children:s.jsx(U,{variant:"ghost",className:"size-8 p-0",onClick:o,children:s.jsx(Hs,{className:"size-4"})})})}),s.jsx(fe,{children:a("side_panel.relationships_section.collapse")})]})}),s.jsx("div",{className:"flex-1",children:s.jsx($e,{type:"text",placeholder:a("side_panel.relationships_section.filter"),className:"h-8 w-full focus-visible:ring-0",value:n,onChange:u=>r(u.target.value)})}),s.jsxs(U,{variant:"secondary",className:"h-8 p-2 text-xs",onClick:d,children:[s.jsx(ha,{className:"h-4"}),a("side_panel.relationships_section.add_relationship")]})]}),s.jsx("div",{className:"flex flex-1 flex-col overflow-hidden",children:s.jsx(zn,{className:"h-full",children:e.length===0?s.jsx(nn,{title:a("side_panel.relationships_section.empty_state.title"),description:a("side_panel.relationships_section.empty_state.description"),className:"mt-20"}):s.jsx(_c,{relationships:l})})})]})},Dc=({dependency:e})=>{const{removeDependency:t,getTable:n}=he(),{fitView:r,deleteElements:o,setEdges:a}=St(),{t:i}=me(),{hideSidePanel:l}=Ie(),{isMd:d}=Wt("md"),u=c.useMemo(()=>{const m=n(e.tableId),w=n(e.dependentTableId);return!m||!w?"":`${w.name} -> ${m.name}`},[e.tableId,e.dependentTableId,n]),f=c.useCallback(m=>{m.stopPropagation(),a(w=>w.map(h=>h.id==e.id?{...h,selected:!0}:{...h,selected:!1})),r({duration:500,maxZoom:1,minZoom:1,nodes:[{id:e.tableId},{id:e.dependentTableId}]}),d||l()},[r,e.tableId,e.dependentTableId,a,e.id,d,l]),p=c.useCallback(()=>{t(e.id),o({edges:[{id:e.id}]})},[e.id,t,o]),x=c.useCallback(()=>s.jsxs(En,{children:[s.jsx(kn,{children:s.jsx(be,{children:s.jsx(Bn,{})})}),s.jsxs(Tn,{className:"w-40",children:[s.jsx(Mn,{children:i("side_panel.dependencies_section.dependency.dependency_actions.title")}),s.jsx(rt,{}),s.jsx(ot,{children:s.jsxs(Ke,{onClick:p,className:"flex justify-between !text-red-700",children:[i("side_panel.dependencies_section.dependency.dependency_actions.delete_dependency"),s.jsx(Je,{className:"size-3.5 text-red-700"})]})})]})]}),[p,i]);return s.jsxs("div",{className:"group flex h-11 flex-1 items-center justify-between overflow-hidden",children:[s.jsx("div",{className:"flex min-w-0 flex-1",children:s.jsx("div",{className:"truncate",children:u})}),s.jsxs("div",{className:"flex flex-row-reverse",children:[s.jsx("div",{children:x()}),s.jsx("div",{className:"flex flex-row-reverse md:hidden md:group-hover:flex",children:s.jsx(be,{onClick:f,children:s.jsx(Dn,{})})})]})]})},Ec=({dependency:e})=>{const{getTable:t,removeDependency:n}=he(),{deleteElements:r}=St(),{t:o}=me(),a=t(e.tableId),i=t(e.dependentTableId),l=c.useCallback(()=>{n(e.id),r({edges:[{id:e.id}]})},[e.id,n,r]);return s.jsxs("div",{className:"my-1 flex flex-col rounded-b-md px-1",children:[s.jsx("div",{className:"flex flex-col gap-6",children:s.jsxs("div",{className:"flex items-center justify-between gap-1 text-xs",children:[s.jsxs("div",{className:"flex basis-1/2 flex-col gap-2 overflow-hidden text-xs",children:[s.jsxs("div",{className:"flex flex-row items-center gap-1",children:[s.jsx(Bs,{className:"size-4 text-subtitle"}),s.jsx("div",{className:"font-bold text-subtitle",children:o("side_panel.dependencies_section.dependency.dependent_table")})]}),s.jsxs(de,{children:[s.jsx(ue,{children:s.jsx("div",{className:"truncate text-left text-sm	",children:i==null?void 0:i.name})}),s.jsx(fe,{children:i==null?void 0:i.name})]})]}),s.jsxs("div",{className:"flex basis-1/2 flex-col gap-2 overflow-hidden text-xs",children:[s.jsxs("div",{className:"flex flex-row items-center gap-1",children:[s.jsx(zs,{className:"size-4 text-subtitle"}),s.jsx("div",{className:"font-bold text-subtitle",children:o("side_panel.dependencies_section.dependency.table")})]}),s.jsxs(de,{children:[s.jsx(ue,{children:s.jsx("div",{className:"truncate text-left text-sm",children:a==null?void 0:a.name})}),s.jsx(fe,{children:a==null?void 0:a.name})]})]})]})}),s.jsx("div",{className:"flex flex-1 items-center justify-center pt-2",children:s.jsxs(U,{variant:"ghost",className:"h-8 p-2 text-xs",onClick:l,children:[s.jsx(Je,{className:"mr-1 size-3.5 text-red-700"}),s.jsx("div",{className:"text-red-700",children:o("side_panel.dependencies_section.dependency.delete_dependency")})]})})]})},Mo=N.forwardRef(({dependency:e},t)=>s.jsxs(Xe,{value:e.id,className:"rounded-md",ref:t,children:[s.jsx(Ge,{asChild:!0,className:"w-full rounded-md px-2 py-0 hover:bg-accent hover:no-underline data-[state=open]:rounded-b-none",children:s.jsx(Dc,{dependency:e})}),s.jsx(Ye,{className:"p-1 pb-0",children:s.jsx(Ec,{dependency:e})})]}));Mo.displayName="DependencyListItem";const kc=({dependencies:e})=>{const{openDependencyFromSidebar:t,openedDependencyInSidebar:n}=Ie(),r=N.useRef(null),o=e.reduce((l,d)=>(l[d.id]=N.createRef(),l),{}),a=c.useCallback(l=>{var d,u;return(u=(d=o[l])==null?void 0:d.current)==null?void 0:u.scrollIntoView({behavior:"smooth",block:"start"})},[o]),i=c.useCallback(()=>{n&&r.current!==n&&(r.current=n,a(n))},[a,n]);return s.jsx(Yt,{type:"single",collapsible:!0,className:"flex w-full flex-col gap-1",value:n,onValueChange:t,onAnimationEnd:i,children:e.map(l=>s.jsx(Mo,{dependency:l,ref:o[l.id]},l.id))})},Tc=()=>{const{dependencies:e,filteredSchemas:t,getTable:n}=he(),[r,o]=N.useState(""),{closeAllDependenciesInSidebar:a}=Ie(),{t:i}=me(),l=c.useMemo(()=>{const d=f=>{var m,w,h;if(!((m=r==null?void 0:r.trim)!=null&&m.call(r)))return!0;const p=((w=n(f.tableId))==null?void 0:w.name)??"",x=((h=n(f.dependentTableId))==null?void 0:h.name)??"";return p.toLowerCase().includes(r.toLowerCase())||x.toLowerCase().includes(r.toLowerCase())},u=f=>Ca(f,t);return e.filter(u).filter(d).sort((f,p)=>{const x=n(f.dependentTableId),m=n(f.tableId),w=n(p.dependentTableId),h=n(p.tableId);return`${x==null?void 0:x.name}${m==null?void 0:m.name}`.localeCompare(`${w==null?void 0:w.name}${h==null?void 0:h.name}`)})},[e,r,t,n]);return s.jsxs("section",{className:"flex flex-1 flex-col overflow-hidden px-2",children:[s.jsxs("div",{className:"flex items-center justify-between gap-4 py-1",children:[s.jsx("div",{children:s.jsxs(de,{children:[s.jsx(ue,{asChild:!0,children:s.jsx("span",{children:s.jsx(U,{variant:"ghost",className:"size-8 p-0",onClick:a,children:s.jsx(Hs,{className:"size-4"})})})}),s.jsx(fe,{children:i("side_panel.dependencies_section.collapse")})]})}),s.jsx("div",{className:"flex-1",children:s.jsx($e,{type:"text",placeholder:i("side_panel.dependencies_section.filter"),className:"h-8 w-full focus-visible:ring-0",value:r,onChange:d=>o(d.target.value)})})]}),s.jsx("div",{className:"flex flex-1 flex-col overflow-hidden",children:s.jsx(zn,{className:"h-full",children:e.length===0?s.jsx(nn,{title:i("side_panel.dependencies_section.empty_state.title"),description:i("side_panel.dependencies_section.empty_state.description"),className:"mt-20"}):s.jsx(kc,{dependencies:l})})})]})},Kc=()=>{const{t:e}=me(),{schemas:t,filterSchemas:n,filteredSchemas:r}=he(),{selectSidebarSection:o,selectedSidebarSection:a,isSelectSchemaOpen:i,openSelectSchema:l,closeSelectSchema:d}=Ie(),{isMd:u}=Wt("md"),f=c.useMemo(()=>t.map(x=>({label:x.name,value:x.id,description:`(${x.tableCount} tables)`})),[t]),p=c.useCallback(x=>{x?l():d()},[l,d]);return s.jsxs("aside",{className:"flex h-full flex-col overflow-hidden",children:[f.length>0?s.jsxs("div",{className:"flex items-center justify-center border-b pl-3 pt-0.5",children:[s.jsx("div",{className:"shrink-0 text-sm font-semibold",children:e("side_panel.schema")}),s.jsx("div",{className:"flex min-w-0 flex-1",children:s.jsx(On,{oneLine:!0,className:"w-full rounded-none border-none",selectAll:!0,deselectAll:!0,options:f,value:r??[],onChange:x=>{n(x)},placeholder:e("side_panel.filter_by_schema"),inputPlaceholder:e("side_panel.search_schema"),emptyPlaceholder:e("side_panel.no_schemas_found"),multiple:!0,open:i,onOpenChange:p})})]}):null,u?null:s.jsx("div",{className:"flex justify-center border-b pt-0.5",children:s.jsxs(Ir,{value:a,onValueChange:x=>o(x),children:[s.jsxs(Vn,{className:"rounded-none border-none font-semibold shadow-none hover:bg-secondary hover:underline focus:border-transparent focus:ring-0",children:[s.jsx(Er,{}),s.jsx("div",{className:"flex flex-1 justify-end px-2 text-xs font-normal text-muted-foreground",children:e("side_panel.view_all_options")})]}),s.jsx($n,{children:s.jsxs(Dr,{children:[s.jsx(Fe,{value:"tables",children:e("side_panel.tables_section.tables")}),s.jsx(Fe,{value:"relationships",children:e("side_panel.relationships_section.relationships")}),s.jsx(Fe,{value:"dependencies",children:e("side_panel.dependencies_section.dependencies")})]})})]})}),a==="tables"?s.jsx(Nc,{}):a==="relationships"?s.jsx(Ic,{}):s.jsx(Tc,{})]})};export{Kc as S,ka as T};
